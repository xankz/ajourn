(function(e){function t(t){for(var a,r,l=t[0],i=t[1],u=t[2],d=0,b=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&b.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);s&&s(t);while(b.length)b.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==o[i]&&(a=!1)}a&&(c.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},o={app:0},c=[];function r(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-2d0c9189":"4312ce11","chunk-2d0cf391":"1c4b4848","chunk-2d0da8f3":"f59eb4b6","chunk-2d22523a":"c0744dc4"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=o[e]=[t,a]}));t.push(n[2]=a);var c,i=document.createElement("script");i.charset="utf-8",i.timeout=120,l.nc&&i.setAttribute("nonce",l.nc),i.src=r(e);var u=new Error;c=function(t){i.onerror=i.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+c+")",u.name="ChunkLoadError",u.type=a,u.request=c,n[1](u)}o[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:i})}),12e4);i.onerror=i.onload=c,document.head.appendChild(i)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/ajourn/",l.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var s=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0d88":function(e,t,n){},"0e21":function(e,t,n){},1:function(e,t){},1990:function(e,t,n){},2:function(e,t){},"20a9":function(e,t,n){"use strict";n("f712")},3:function(e,t){},"53d5":function(e,t,n){"use strict";n("ae03")},"74d3":function(e,t,n){"use strict";n("bc7f")},"7e51":function(e,t,n){"use strict";n("0d88")},8594:function(e,t,n){},ae03:function(e,t,n){},bc7f:function(e,t,n){},c1d8:function(e,t,n){"use strict";n("ef68")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("9483");Object(a["a"])("".concat("/ajourn/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("6cc5"),n("2f74"),n("f7aa");var o=n("e11e"),c=(n("b9f6"),n("b05d")),r=n("93bf"),l=n.n(r),i=n("7a23"),u=n("d1d6"),d=n.n(u),s=n("f03e"),b=n.n(s);function p(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("router-view");return Object(i["openBlock"])(),Object(i["createBlock"])(r)}n("96cf");var m=n("1da1"),O=n("a78e"),j=n.n(O),f=n("b3fe"),v=n("6c02"),h=(n("a4d3"),n("e01a"),n("4de4"),n("7db0"),n("d81d"),n("13d5"),n("b0c0"),n("d3b7"),n("ac1f"),n("5319"),n("2ca0"),n("ddb0"),n("5530")),g=n("ade3"),y=n("cc1d"),V=n("82fd"),C=n.n(V),k=n("5502"),x=n("16b2"),w=n("8dfe"),N=n.n(w),_=n("9918"),B=n.n(_);function q(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return new x["a"](e);try{var n=new x["a"](e,{skip_setup:!0});return n}catch(a){throw console.log(a),new Error("Database does not exist")}}N()(x["a"]),x["a"].plugin(B.a);n("fb6a"),n("3ca3"),n("466d"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("2b3d");var S,T,D,A="API_FETCH_JOURNALS",Q="API_CREATE_JOURNAL",I="API_OPEN_JOURNAL",R="API_FETCH_JOURNAL",E="API_CLOSE_JOURNAL",U="API_CREATE_ENTRY",F="API_FETCH_ENTRIES",L="API_FETCH_ENTRY",P="API_UPDATE_ENTRY",J="API_DELETE_ENTRY",H="API_ADD_ENTRY_ATTACHMENT",z="API_DELETE_ENTRY_ATTACHMENT",M="API_SET_LAST_ENTRY",K="API_UPDATE_JOURNAL",W="SET_JOURNAL",Y="SET_JOURNALS",$="SET_ENTRIES",G="SET_ENTRY",Z="SET_CURRENT_JOURNAL",X="SET_LAST_ENTRY",ee="SET_USER_PREFS",te="0";(function(e){e[e["Text"]=0]="Text",e[e["Description"]=1]="Description",e[e["Number"]=2]="Number",e[e["Toggle"]=3]="Toggle",e[e["Progress"]=4]="Progress",e[e["Attachments"]=5]="Attachments",e[e["Map"]=6]="Map",e[e["Reference"]=7]="Reference",e[e["Embed"]=8]="Embed"})(S||(S={})),function(e){e["Entry"]="entry",e["Category"]="category"}(T||(T={})),function(e){e[e["Invalid"]=-1]="Invalid",e[e["Unknown"]=0]="Unknown",e[e["YouTube"]=1]="YouTube",e[e["Spotify"]=2]="Spotify",e[e["Soundcloud"]=3]="Soundcloud"}(D||(D={}));var ne,ae,oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!e.match(t)},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!e.match(/^(https?:\/\/)?(www\.)?(soundcloud\.com|snd\.sc)\/.*$/)},re=function(e){try{new URL(e)}catch(t){return D.Invalid}return oe(e)?D.YouTube:ce(e)?D.Soundcloud:D.Unknown},le=function(e,t){return"data:"+e+";base64,"+t},ie=function(e){return e.startsWith("text/")?"description":e.startsWith("image/")?"insert_photo":e.startsWith("audio/")?"headset":e.startsWith("video/")?"movie":"insert_drive_file"},ue=function(e){return atob(e)},de=function(e,t,n){t=t||"",n=n||512;for(var a=atob(e),o=[],c=0;c<a.length;c+=n){for(var r=a.slice(c,c+n),l=new Array(r.length),i=0;i<r.length;i++)l[i]=r.charCodeAt(i);var u=new Uint8Array(l);o.push(u)}var d=new Blob(o,{type:t});return d},se=Symbol(),be=[["title"],["type"],["category"]];function pe(){return Object(k["c"])(se)}var me=Object(k["b"])({state:{fetchingJournals:!1,fetchingEntries:!1,currentJournal:void 0,entries:{},lastEntry:"",journals:{},userPrefs:{darkMode:!1}},mutations:(ne={},Object(g["a"])(ne,ee,(function(e,t){var n=Object.assign({},e.userPrefs,t);e.userPrefs=n,j.a.set("userPrefs",n)})),Object(g["a"])(ne,X,(function(e,t){e.lastEntry=t})),Object(g["a"])(ne,Y,(function(e,t){e.journals=t})),Object(g["a"])(ne,W,(function(e,t){e.journals[t.id]=t.journal})),Object(g["a"])(ne,Z,(function(e,t){e.currentJournal=t})),Object(g["a"])(ne,$,(function(e,t){e.currentJournal&&(e.entries=t)})),Object(g["a"])(ne,G,(function(e,t){e.entries[t.id]=t.entry})),ne),getters:{currentJournal:function(e){return e.currentJournal?e.journals[e.currentJournal]:void 0},entryAttachment:function(e){return function(t,n){if(t in e.entries&&n in e.entries[t].attachments)return le(e.entries[t].attachments[n].content_type,e.entries[t].attachments[n].data)}},entryAttachmentFull:function(e){return function(t,n){if(t in e.entries&&n in e.entries[t].attachments)return e.entries[t].attachments[n]}}},actions:(ae={},Object(g["a"])(ae,M,(function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,j.a.set("lastEntry",t),a(X,t);case 3:case"end":return n.stop()}}),n)})))()})),Object(g["a"])(ae,z,(function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var o,c,r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=e.state,c=e.dispatch,n.state.currentJournal){a.next=3;break}throw new Error("Journal not opened");case 3:return a.prev=3,r=q("aj_".concat(o.currentJournal)),a.next=7,r.get(t.id);case 7:return l=a.sent,a.next=10,r.removeAttachment(t.id,t.name,l._rev);case 10:return a.next=12,r.close();case 12:return a.next=14,c(L,{id:t.id,force:!0});case 14:a.next=19;break;case 16:throw a.prev=16,a.t0=a["catch"](3),new Error(a.t0.message);case 19:case"end":return a.stop()}}),a,null,[[3,16]])})))()})),Object(g["a"])(ae,H,(function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var o,c,r,l,i,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=e.state,c=e.dispatch,n.state.currentJournal){a.next=3;break}throw new Error("Journal not opened");case 3:return a.prev=3,r=q("aj_".concat(o.currentJournal)),a.next=7,r.get(t.id);case 7:return l=a.sent,i="text/plain",t.attachment.data instanceof File&&(u=y["extension"](t.attachment.data.name)||"text/plain",i=t.attachment.data.type||u),a.next=12,r.putAttachment(t.id,t.attachment.name,l._rev,new Blob([t.attachment.data],{type:i}),i);case 12:return a.next=14,r.close();case 14:return a.next=16,c(L,{id:t.id,force:!0});case 16:a.next=21;break;case 18:throw a.prev=18,a.t0=a["catch"](3),new Error(a.t0.message);case 21:case"end":return a.stop()}}),a,null,[[3,18]])})))()})),Object(g["a"])(ae,J,(function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var o,c,r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=e.state,c=e.dispatch,n.state.currentJournal){a.next=3;break}throw new Error("Journal not opened");case 3:return a.prev=3,r=q("aj_".concat(o.currentJournal)),a.next=7,r.get(t);case 7:return l=a.sent,a.next=10,r.remove(l._id,l._rev);case 10:return a.next=12,r.close();case 12:a.next=17;break;case 14:throw a.prev=14,a.t0=a["catch"](3),new Error(a.t0.message);case 17:return a.next=19,c(F);case 19:case"end":return a.stop()}}),a,null,[[3,14]])})))()})),Object(g["a"])(ae,P,(function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var o,c,r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=e.state,c=e.dispatch,n.state.currentJournal){a.next=3;break}throw new Error("Journal not opened.");case 3:return a.prev=3,r=q("aj_".concat(o.currentJournal)),a.next=7,r.get(t.id);case 7:return l=a.sent,l=Object(h["a"])(Object(h["a"])({},l),t.data),Object.prototype.hasOwnProperty.call(l,"attachments")&&delete l["attachments"],a.next=12,r.put(l);case 12:return a.next=14,r.close();case 14:a.next=19;break;case 16:throw a.prev=16,a.t0=a["catch"](3),new Error(a.t0.message);case 19:return a.next=21,c(F);case 21:case"end":return a.stop()}}),a,null,[[3,16]])})))()})),Object(g["a"])(ae,A,(function(e){return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,a,o,c,r,l,i,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,a=e.state,o=e.dispatch,a.fetchingJournals=!0,t.next=4,x["a"].allDbs();case 4:c=t.sent.filter((function(e){return e.startsWith("aj_")})),r={},l=0;case 7:if(!(l<c.length)){t.next=28;break}return i=q(c[l]),t.prev=9,t.next=12,i.get(te);case 12:u=t.sent,d=c[l].replace("aj_",""),r[d]=u,t.next=20;break;case 17:return t.prev=17,t.t0=t["catch"](9),t.abrupt("continue",25);case 20:return t.prev=20,t.next=23,i.close();case 23:return a.fetchingJournals=!1,t.finish(20);case 25:l++,t.next=7;break;case 28:if(n(Y,r),!a.fetchingJournalsOpen){t.next=33;break}return t.next=32,o(I,a.fetchingJournalsOpen);case 32:a.fetchingJournalsOpen="";case 33:case"end":return t.stop()}}),t,null,[[9,17,20,25]])})))()})),Object(g["a"])(ae,R,(function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,o,c,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,o=e.commit,!a.journals[t]){n.next=3;break}return n.abrupt("return",a.journals[t]);case 3:return c=new x["a"](t,{skip_setup:!0}),n.prev=4,n.next=7,c.get(te);case 7:return r=n.sent,o(W,{id:t,journal:r}),n.abrupt("return",r);case 12:throw n.prev=12,n.t0=n["catch"](4),new Error("Journal does not exist");case 15:return n.prev=15,n.next=18,c.close();case 18:return n.finish(15);case 19:case"end":return n.stop()}}),n,null,[[4,12,15,19]])})))()})),Object(g["a"])(ae,E,(function(e){return Object(m["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.state,n=e.commit,n(Z,""),n($,{});case 3:case"end":return t.stop()}}),t)})))()})),Object(g["a"])(ae,K,(function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,o,c,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,o=e.commit,a.currentJournal){n.next=3;break}throw new Error("Journal not opened.");case 3:return c=q("aj_".concat(a.currentJournal)),n.prev=4,n.next=7,c.get(te);case 7:return r=n.sent,r=Object(h["a"])(Object(h["a"])({},r),t),n.next=11,c.put(r);case 11:o(W,{id:a.currentJournal,journal:r}),n.next=17;break;case 14:throw n.prev=14,n.t0=n["catch"](4),new Error(n.t0.message);case 17:return n.prev=17,n.next=20,c.close();case 20:return n.finish(17);case 21:case"end":return n.stop()}}),n,null,[[4,14,17,21]])})))()})),Object(g["a"])(ae,I,(function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,o,c,r,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.dispatch,o=e.commit,c=e.state,!c.fetchingJournals){n.next=4;break}return c.fetchingJournalsOpen=t,n.abrupt("return");case 4:r=q("aj_".concat(t)),n.prev=5,l=0;case 7:if(!(l<be.length)){n.next=13;break}return n.next=10,r.createIndex({index:{fields:be[l]}});case 10:l++,n.next=7;break;case 13:n.next=18;break;case 15:throw n.prev=15,n.t0=n["catch"](5),new Error(n.t0.message);case 18:return n.prev=18,n.next=21,r.close();case 21:return n.finish(18);case 22:return o(Z,t),n.next=25,a(F);case 25:case"end":return n.stop()}}),n,null,[[5,15,18,22]])})))()})),Object(g["a"])(ae,U,(function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,o,c,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,o=e.dispatch,a.currentJournal){n.next=3;break}throw new Error("Journal not opened.");case 3:return c=q("aj_".concat(a.currentJournal)),r=C.a.generate(),n.next=7,c.put(Object(h["a"])(Object(h["a"])({_id:r},t),{},{type:T.Entry,fields:[]}));case 7:return n.next=9,c.close();case 9:return n.next=11,o(F);case 11:return n.next=13,o(L,{id:r});case 13:return n.abrupt("return",n.sent);case 14:case"end":return n.stop()}}),n)})))()})),Object(g["a"])(ae,L,(function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,o,c,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,e.dispatch,o=e.commit,a.currentJournal||a.fetchingEntries){n.next=3;break}throw new Error("Journal not opened.");case 3:if(!a.entries[t.id]||!Object.prototype.hasOwnProperty.call(a.entries[t.id],"attachments")||t.force){n.next=5;break}return n.abrupt("return",a.entries[t.id]);case 5:return c=q("aj_".concat(a.currentJournal)),n.prev=6,n.next=9,c.get(t.id,{attachments:!0});case 9:return r=n.sent,r=Object(h["a"])(Object(h["a"])({},r),{},{attachments:r._attachments?r._attachments:{},id:r._id}),r._attachments&&delete r._attachments,o(G,{id:r._id,entry:r}),n.abrupt("return",r);case 16:throw n.prev=16,n.t0=n["catch"](6),new Error("Entry does not exist.");case 19:return n.prev=19,n.next=22,c.close();case 22:return n.finish(19);case 23:case"end":return n.stop()}}),n,null,[[6,16,19,23]])})))()})),Object(g["a"])(ae,F,(function(e){var t=arguments;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,o,c,r,l,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,o=e.commit,c=t.length>1&&void 0!==t[1]?t[1]:{save:!0,category:"",flush:!0},a.currentJournal){n.next=4;break}throw new Error("Journal not opened.");case 4:return r=q("aj_".concat(a.currentJournal)),a.fetchingEntries=!0,n.prev=6,n.next=9,r.find({selector:{type:T.Entry,category:c.category?{$elemMatch:{$eq:c.category}}:void 0},fields:["_id","title","avatar","category","type","fields","_attachments"]});case 9:return l=n.sent,i=l.docs.map((function(e){return{id:e._id,title:e.title,avatar:e.avatar,category:e.category,type:e.type,fields:e.fields,attachments:e._attachments?e._attachments:{}}})),c.save&&(i=c.flush?i:Object(h["a"])(Object(h["a"])({},a.entries),i),o($,i.reduce((function(e,t){return Object(h["a"])(Object(g["a"])({},t.id,t),e)}),{}))),n.abrupt("return",i);case 15:throw n.prev=15,n.t0=n["catch"](6),new Error(n.t0.message);case 18:return n.prev=18,n.next=21,r.close();case 21:return a.fetchingEntries=!1,n.finish(18);case 23:case"end":return n.stop()}}),n,null,[[6,15,18,23]])})))()})),Object(g["a"])(ae,Q,(function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.state,o=C.a.generate(),c=q("aj_".concat(o),!1),a.next=5,c.put({_id:te,title:t.title,description:"".concat(t.title,"... What a strange place."),categories:[]});case 5:return a.next=7,c.close();case 7:return a.next=9,n.dispatch(A);case 9:return a.abrupt("return",o);case 10:case"end":return a.stop()}}),a)})))()})),ae),modules:{},plugins:[Object(k["a"])()]}),Oe=Object(i["defineComponent"])({name:"App",setup:function(){var e=pe(),t=Object(f["a"])();Object(v["f"])();return Object(i["onMounted"])(Object(m["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=j.a.get("userPrefs"),n&&e.commit(ee,JSON.parse(n)),a=j.a.get("lastEntry"),a&&e.commit(X,a);case 4:case"end":return t.stop()}}),t)})))),Object(i["watchEffect"])((function(){t.dark.set(e.state.userPrefs.darkMode)})),{}}});Oe.render=p;var je=Oe,fe={install:function(e){0}},ve=(n("0e21"),n("e54f"),n("573e"),n("436b")),he=n("2a19"),ge={config:{notify:{position:"bottom-right",timeout:3e3}},plugins:{Dialog:ve["a"],Notify:he["a"]}},ye=n("f508"),Ve=n("981c"),Ce=Object(i["withScopeId"])("data-v-6d61f85b");Object(i["pushScopeId"])("data-v-6d61f85b");var ke={class:"row"},xe={class:"absolute row",style:{top:"0",left:"16px",transform:"translateY(-50%)",width:"calc(100% - 32px)"}},we={class:"col q-mr-md"},Ne={key:0,class:"ellipsis",style:{padding:"4px 0"}},_e={class:"ellipsis"},Be={class:"col-auto"},qe=Object(i["createTextVNode"])("Attachments"),Se=Object(i["createTextVNode"])("Info"),Te=Object(i["createTextVNode"])("Delete"),De=Object(i["createTextVNode"])(" No fields for this entry. ");Object(i["popScopeId"])();var Ae=Ce((function(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-icon"),l=Object(i["resolveComponent"])("q-avatar"),u=Object(i["resolveComponent"])("q-img"),d=Object(i["resolveComponent"])("q-item-section"),s=Object(i["resolveComponent"])("q-item"),b=Object(i["resolveComponent"])("q-separator"),p=Object(i["resolveComponent"])("q-badge"),m=Object(i["resolveComponent"])("q-item-label"),O=Object(i["resolveComponent"])("q-list"),j=Object(i["resolveComponent"])("q-btn-dropdown"),f=Object(i["resolveComponent"])("q-card-section"),v=Object(i["resolveComponent"])("q-card"),h=Object(i["resolveDirective"])("close-popup");return Object(i["openBlock"])(),Object(i["createBlock"])("div",ke,[Object(i["createVNode"])(v,{class:"col col-md-5"},{default:Ce((function(){return[Object(i["createVNode"])(s,{class:"q-my-sm"},{default:Ce((function(){return[e.entry?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:0,avatar:""},{default:Ce((function(){return["icon"==e.entry.avatar.type?(Object(i["openBlock"])(),Object(i["createBlock"])(l,{key:0,size:"64px",rounded:""},{default:Ce((function(){return[Object(i["createVNode"])(r,{name:e.entry.avatar.data,color:"primary"},null,8,["name"])]})),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:1,src:e.entryAvatar,ratio:1,style:{width:"64px",height:"64px"},class:"rounded-borders cursor-pointer",loading:"lazy",onClick:e.previewAvatar},null,8,["src","onClick"]))]})),_:1})):Object(i["createCommentVNode"])("",!0),e.entry?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:1},{default:Ce((function(){return[Object(i["createVNode"])("div",{class:"text-h5",style:{lineHeight:"1.25em"}},Object(i["toDisplayString"])(e.entry.title),5)]})),_:1})):Object(i["createCommentVNode"])("",!0)]})),_:1}),Object(i["createVNode"])(b,{class:{"q-mt-md":e.categories.length}},null,8,["class"]),Object(i["createVNode"])(f,{class:"q-pt-sm q-px-none q-pb-none"},{default:Ce((function(){return[Object(i["createVNode"])("div",xe,[Object(i["createVNode"])("div",we,[e.categories.length?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Ne,[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.categories,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(p,{ref:"categoryBadgeRef",class:"text-weight-bold shadow-2 q-mr-sm",style:[{backgroundColor:t.color,color:e.getCategoryTextColor(t.color),borderColor:e.getCategoryBorderColor(t.color)},{padding:"6px 8px","font-size":"12px","border-width":"1px","border-style":"solid","max-width":"200px"}],key:t.id},{default:Ce((function(){return[Object(i["createVNode"])("div",_e,Object(i["toDisplayString"])(t.name),1)]})),_:2},1032,["style"])})),128))])):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])("div",Be,[Object(i["createVNode"])(j,{size:"10px",class:"edit self-end",color:e.darkActive?"primary":"white","text-color":"dark",split:"",label:"Edit",onClick:e.editEntry,style:{margin:"4px 0"}},{default:Ce((function(){return[Object(i["createVNode"])(O,{dense:""},{default:Ce((function(){return[Object(i["withDirectives"])(Object(i["createVNode"])(s,{clickable:"",onClick:e.viewAttachments},{default:Ce((function(){return[Object(i["createVNode"])(d,{avatar:"",style:{"min-width":"0"}},{default:Ce((function(){return[Object(i["createVNode"])(r,{name:"perm_media",size:"16px"})]})),_:1}),Object(i["createVNode"])(d,null,{default:Ce((function(){return[Object(i["createVNode"])(m,null,{default:Ce((function(){return[qe]})),_:1})]})),_:1})]})),_:1},8,["onClick"]),[[h]]),Object(i["createVNode"])(b),Object(i["withDirectives"])(Object(i["createVNode"])(s,{clickable:""},{default:Ce((function(){return[Object(i["createVNode"])(d,{avatar:"",style:{"min-width":"0"}},{default:Ce((function(){return[Object(i["createVNode"])(r,{name:"info_outline",size:"16px"})]})),_:1}),Object(i["createVNode"])(d,null,{default:Ce((function(){return[Object(i["createVNode"])(m,null,{default:Ce((function(){return[Se]})),_:1})]})),_:1})]})),_:1},512),[[h]]),Object(i["withDirectives"])(Object(i["createVNode"])(s,{clickable:"",class:"text-red",onClick:e.deleteEntry},{default:Ce((function(){return[Object(i["createVNode"])(d,{avatar:"",style:{"min-width":"0"}},{default:Ce((function(){return[Object(i["createVNode"])(r,{name:"delete_outline",size:"16px"})]})),_:1}),Object(i["createVNode"])(d,null,{default:Ce((function(){return[Object(i["createVNode"])(m,null,{default:Ce((function(){return[Te]})),_:1})]})),_:1})]})),_:1},8,["onClick"]),[[h]])]})),_:1})]})),_:1},8,["color","onClick"])])])]})),_:1}),e.entry&&e.entry.fields.length?(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:0},{default:Ce((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.entry.fields,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(e.getComponentFromField(t)),{modelValue:t,key:t?t.id:n,editView:!1,entry:e.entry,class:{"q-mb-sm":n!=e.entry.fields.length-1}},null,8,["modelValue","entry","class"])})),128))]})),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:1,class:"text-subtitle1 text-grey-8"},{default:Ce((function(){return[De]})),_:1}))]})),_:1})])})),Qe=n("2ef0"),Ie=n("bc78"),Re=(n("4fad"),Object(i["withScopeId"])("data-v-6f505ae6"));Object(i["pushScopeId"])("data-v-6f505ae6");var Ee={class:"row items-center"},Ue={class:"text-body text-grey"},Fe={key:1},Le={class:"text-subtitle2 q-mb-xs"},Pe={key:0,class:"shadow-1 rounded-borders row q-gutter-sm q-mb-md",style:{"margin-left":"0","margin-top":"0","padding-bottom":"8px"}},Je={key:1,class:"text-subtitle2 text-grey"};Object(i["popScopeId"])();var He=Re((function(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-space"),l=Object(i["resolveComponent"])("q-btn"),u=Object(i["resolveComponent"])("q-icon"),d=Object(i["resolveComponent"])("q-item-section"),s=Object(i["resolveComponent"])("q-tooltip"),b=Object(i["resolveComponent"])("q-item"),p=Object(i["resolveComponent"])("q-list"),m=Object(i["resolveComponent"])("attachments-field-icon");return e.editView?(Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],{key:0},[Object(i["createVNode"])("div",Ee,[Object(i["createVNode"])("div",Ue,Object(i["toDisplayString"])(e.linkedAttachments.length)+" selected",1),Object(i["createVNode"])(r),Object(i["createVNode"])(l,{onClick:e.selectAttachments,label:"Select",icon:"upload_file",class:"select-att",flat:"",color:"primary"},null,8,["onClick"])]),Object(i["createVNode"])(p,{bordered:"",separator:"",class:"q-mt-sm",dense:""},{default:Re((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.linkedAttachments,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(b,{key:t.name},{default:Re((function(){return[Object(i["createVNode"])(d,{avatar:"",class:"q-pr-none",style:{"min-width":"36px"}},{default:Re((function(){return[Object(i["createVNode"])(u,{name:e.getAttachmentIcon(t.content_type),color:"grey-8"},null,8,["name"])]})),_:2},1024),Object(i["createVNode"])(d,{class:"text-weight-bold ellipsis",style:{"line-height":"1.3em"}},{default:Re((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.name)+" ",1),Object(i["createVNode"])(s,null,{default:Re((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.name),1)]})),_:2},1024)]})),_:2},1024),Object(i["createVNode"])(d,{side:""},{default:Re((function(){return[Object(i["createVNode"])(l,{flat:"",dense:"",round:"",icon:"close",onClick:function(n){return e.removeAttachment(t.name)}},null,8,["onClick"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})],64)):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Fe,[Object(i["createVNode"])("div",Le,Object(i["toDisplayString"])(e.modelValue.name),1),e.linkedAttachments.length?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Pe,[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.linkedAttachments,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:t.name,attachment:t,entryId:e.entry.id,onClick:function(n){return e.previewAttachment(t)}},null,8,["attachment","entryId","onClick"])})),128))])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Je,"No attachments for this field."))]))})),ze=(n("99af"),n("caad"),n("2532"),n("2909")),Me={class:"text-h6"},Ke=Object(i["createTextVNode"])(" Select attachment "),We={key:0},Ye=Object(i["createTextVNode"])("Create a new attachment"),$e={class:"text-body q-pl-md text-grey"};function Ge(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-space"),l=Object(i["resolveComponent"])("q-tooltip"),u=Object(i["resolveComponent"])("q-btn"),d=Object(i["resolveComponent"])("q-card-section"),s=Object(i["resolveComponent"])("q-icon"),b=Object(i["resolveComponent"])("q-item-section"),p=Object(i["resolveComponent"])("q-badge"),m=Object(i["resolveComponent"])("q-item"),O=Object(i["resolveComponent"])("q-list"),j=Object(i["resolveComponent"])("q-card-actions"),f=Object(i["resolveComponent"])("q-card"),v=Object(i["resolveComponent"])("q-dialog"),h=Object(i["resolveDirective"])("ripple");return Object(i["openBlock"])(),Object(i["createBlock"])(v,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(f,{class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{class:"row align-items-center"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",Me,[Ke,e.selected.length?(Object(i["openBlock"])(),Object(i["createBlock"])("span",We,"("+Object(i["toDisplayString"])(e.selected.length)+")",1)):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])(r),Object(i["createVNode"])(u,{icon:"add",color:"primary",flat:"",round:"",dense:"",onClick:e.createAttachment},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Ye]})),_:1})]})),_:1},8,["onClick"])]})),_:1}),Object(i["createVNode"])(O,{bordered:"",separator:"",dense:"",style:{"max-height":"150px",overflow:"auto"}},{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.filteredAttachments,(function(t,n){return Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createBlock"])(m,{clickable:"",key:n,onClick:function(t){return e.setSelected(n)},active:e.selected.includes(n)},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(b,{avatar:"",class:"q-pr-none",style:{"min-width":"0",width:"28px"}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{name:e.getAttachmentIcon(t.content_type),size:"20px"},null,8,["name"])]})),_:2},1024),Object(i["createVNode"])(b,{class:"ellipsis"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(n),1)]})),_:2},1024),Object(i["createVNode"])(b,{side:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{outline:"",color:"grey"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.getExtension(t.content_type)||"?"),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["onClick","active"])),[[h]])})),128))]})),_:1}),Object(i["createVNode"])(j,{align:"right"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",$e,Object(i["toDisplayString"])(e.filteredAttachmentsLen)+" attachment"+Object(i["toDisplayString"])(1===e.filteredAttachmentsLen?"":"s"),1),Object(i["createVNode"])(r),Object(i["createVNode"])(u,{color:"primary",flat:"",disable:!e.selected.length,label:"Select",onClick:e.onOKClick},null,8,["disable","onClick"]),Object(i["createVNode"])(u,{color:"primary",flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}n("b64b");var Ze=n("b27b"),Xe={key:0,class:"text-h6 ellipsis"},et={key:1,class:"text-h6 ellipsis"};function tt(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-card-section"),l=Object(i["resolveComponent"])("q-tab"),u=Object(i["resolveComponent"])("q-tabs"),d=Object(i["resolveComponent"])("q-separator"),s=Object(i["resolveComponent"])("q-icon"),b=Object(i["resolveComponent"])("q-file"),p=Object(i["resolveComponent"])("q-tab-panel"),m=Object(i["resolveComponent"])("q-input"),O=Object(i["resolveComponent"])("q-tab-panels"),j=Object(i["resolveComponent"])("q-btn"),f=Object(i["resolveComponent"])("q-card-actions"),v=Object(i["resolveComponent"])("q-card"),h=Object(i["resolveComponent"])("q-dialog");return Object(i["openBlock"])(),Object(i["createBlock"])(h,{ref:"dialogRef",onHide:e.onDialogHide,persistent:!!e.uploadData},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(v,{class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,{class:"row align-items-center q-pb-sm"},{default:Object(i["withCtx"])((function(){return[e.replace?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Xe,' Replace attachment "'+Object(i["toDisplayString"])(e.replace)+'" ',1)):(Object(i["openBlock"])(),Object(i["createBlock"])("div",et,"Create attachment"))]})),_:1}),Object(i["createVNode"])(u,{modelValue:e.currentTab,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.currentTab=t}),dense:"",class:"text-primary"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{name:"upload",label:"Upload"}),Object(i["createVNode"])(l,{name:"raw",label:"Raw"})]})),_:1},8,["modelValue"]),Object(i["createVNode"])(d),Object(i["createVNode"])(O,{modelValue:e.currentTab,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.currentTab=t}),animated:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{name:"upload"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(b,{outlined:"",label:"Upload a file...",modelValue:e.uploadData,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.updateUploadData(t)}),hint:"Size: "+e.uploadDataSize,debounce:"600"},{prepend:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{name:"attach_file"})]})),_:1},8,["modelValue","hint"])]})),_:1}),Object(i["createVNode"])(p,{name:"raw"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(m,{type:"textarea",outlined:"",modelValue:e.rawData,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.rawData=t}),hint:"Size: "+e.rawDataSize,debounce:"600"},null,8,["modelValue","hint"])]})),_:1})]})),_:1},8,["modelValue"]),Object(i["createVNode"])(d),Object(i["createVNode"])(m,{label:"Name",class:"q-pt-md q-px-md q-pb-md",modelValue:e.attachmentName,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.attachmentName=t}),outlined:"",dense:"",rules:[function(e){return/^\w+$/.test(e)||"Please use only letters, numbers, and underscores"},function(t){return t.length<=e.AttachmentNameLength||"Name will be capped to "+e.AttachmentNameLength+" characters"}]},null,8,["modelValue","rules"]),Object(i["createVNode"])(f,{align:"right"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(j,{flat:"",color:"primary",label:e.replace?"Replace":"Create",disable:!e.attachmentName||!/^\w+$/.test(e.attachmentName),onClick:e.onOKClick},null,8,["label","disable","onClick"]),Object(i["createVNode"])(j,{color:"primary",flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide","persistent"])}var nt=n("7937"),at=Object(i["withScopeId"])("data-v-3bf8cc3c");Object(i["pushScopeId"])("data-v-3bf8cc3c");var ot={class:"row items-center ellipsis"};Object(i["popScopeId"])();var ct=at((function(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("preview"),l=Object(i["resolveComponent"])("cropper"),u=Object(i["resolveComponent"])("q-tooltip"),d=Object(i["resolveComponent"])("q-select"),s=Object(i["resolveComponent"])("q-btn"),b=Object(i["resolveComponent"])("q-card-actions"),p=Object(i["resolveComponent"])("q-card"),m=Object(i["resolveComponent"])("q-dialog");return Object(i["openBlock"])(),Object(i["createBlock"])(m,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:at((function(){return[Object(i["createVNode"])(p,{class:"q-dialog-plugin"},{default:at((function(){var n,a;return["square"===e.cropValue?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:0,image:null===(n=e.cropResults)||void 0===n?void 0:n.image,coordinates:null===(a=e.cropResults)||void 0===a?void 0:a.coordinates,ref:"previewRef",width:64,height:64,class:"preview",style:{position:"absolute",top:"12px",left:"12px","z-index":"300","border-radius":"4px"}},null,8,["image","coordinates"])):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(l,{class:"cropper",debounce:!1,ref:"cropperRef",src:e.imgUrl,"stencil-props":e.cropStencilOpts,onChange:e.onCropChange},null,8,["src","stencil-props","onChange"]),Object(i["createVNode"])(b,{align:"between"},{default:at((function(){return[Object(i["createVNode"])("div",ot,[Object(i["createVNode"])(d,{label:"Crop",options:e.cropOptions,"option-label":"label",class:"q-mr-md","map-options":"",outlined:"",dense:"","option-value":"value",modelValue:e.cropValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.cropValue=t}),"emit-value":""},{default:at((function(){return[e.cropValue?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:0,anchor:"top middle"},{default:at((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.cropHelp),1)]})),_:1})):Object(i["createCommentVNode"])("",!0)]})),_:1},8,["options","modelValue"])]),Object(i["createVNode"])("div",null,[Object(i["createVNode"])(s,{color:"primary",flat:"",label:"Save changes",onClick:e.submit},null,8,["onClick"]),Object(i["createVNode"])(s,{color:"primary",flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])})),rt=n("94e0"),lt=Object(i["defineComponent"])({name:"CropAttachmentDialog",props:{image:{type:Blob,required:!0},imageType:{type:String,required:!0}},components:{Cropper:rt["a"],Preview:rt["b"]},emits:Object(ze["a"])(Ze["a"].emits),setup:function(e){var t=Object(Ze["a"])(),n=t.dialogRef,a=t.onDialogHide,o=t.onDialogOK,c=t.onDialogCancel,r=Object(i["ref"])([{label:"Free",value:"free",help:"Free is unconstrained, use any size."},{label:"Square",value:"square",help:"Square is best for avatars."}]),l=Object(i["ref"])(""),u=Object(i["ref"])("free"),d=Object(i["ref"])(void 0),s=Object(i["ref"])(void 0),b=Object(i["ref"])(void 0),p=Object(i["computed"])((function(){var e;return null===(e=r.value.find((function(e){return e.value===u.value})))||void 0===e?void 0:e.help})),m=Object(i["computed"])((function(){var e={movable:!0,scalable:!0};return u.value&&"square"==u.value&&(e.aspectRatio=1),e})),O=function(e){b.value=e},j=function(){if(d.value){var t=d.value.getResult(),n=t.canvas;n.toBlob((function(e){o(e)}),e.imageType)}};return Object(i["onMounted"])((function(){l.value=URL.createObjectURL(e.image)})),Object(i["onUnmounted"])((function(){l.value&&URL.revokeObjectURL(l.value)})),{dialogRef:n,onDialogHide:a,imgUrl:l,cropValue:u,cropHelp:p,cropOptions:r,cropStencilOpts:m,cropperRef:d,cropResults:b,previewRef:s,onCropChange:O,submit:j,onCancelClick:c}}}),it=(n("f55b"),n("24e8")),ut=n("f09f"),dt=n("4b7e"),st=n("ddd8"),bt=n("05c0"),pt=n("9c40"),mt=n("93dc"),Ot=n.n(mt);lt.render=ct,lt.__scopeId="data-v-3bf8cc3c";var jt=lt;Ot()(lt,"components",{QDialog:it["a"],QCard:ut["a"],QCardActions:dt["a"],QSelect:st["a"],QTooltip:bt["a"],QBtn:pt["a"]});var ft=Object(i["defineComponent"])({name:"CreateAttachmentsDialog",props:{attachments:{type:Object,required:!0},replace:{type:String},replaceData:{type:String}},emits:Object(ze["a"])(Ze["a"].emits),setup:function(e,t){t.emit;var n=Object(Ze["a"])(),a=n.dialogRef,o=n.onDialogHide,c=n.onDialogOK,r=n.onDialogCancel,l=Object(f["a"])(),u=Object(i["ref"])(e.replaceData?"raw":"upload"),d=Object(i["ref"])(void 0),s=Object(i["ref"])(e.replaceData?e.replaceData:""),b=Object(i["ref"])(e.replace?e.replace:""),p=Object(i["computed"])((function(){return nt["b"].humanStorageSize(new Blob([s.value]).size)})),m=Object(i["computed"])((function(){return nt["b"].humanStorageSize(d.value?d.value.size:0)})),O=function(){b.value.length>=Co&&(b.value=b.value.slice(0,Co));try{switch(u.value){case"upload":if(!d.value)throw new Error("File never uploaded");c({data:d.value,name:b.value});break;case"raw":c({data:s.value,name:b.value});break}}catch(e){l.notify({type:"negative",message:e.message})}},j=function(e){e&&e.type.startsWith("image")?l.dialog({component:jt,componentProps:{image:e,imageType:e.type}}).onOk((function(t){var n=new File([t],e.name,{type:e.type});d.value=n})):d.value=e},v=function(){try{if(!b.value)throw new Error("Attachment name empty");if(!/^\w+$/.test(b.value))throw new Error("Invalid attachment name");b.value in e.attachments&&e.replace!==b.value?l.dialog({title:"Attachment already exists",message:'Attachment "'.concat(b.value,'" already exists in this entry. Would you like to replace it?'),cancel:!0,ok:"replace",persistent:!0}).onOk((function(){O()})).onCancel((function(){!0})):O()}catch(t){l.notify({type:"negative",message:t.message})}};return{dialogRef:a,onDialogHide:o,currentTab:u,rawData:s,uploadData:d,rawDataSize:p,uploadDataSize:m,attachmentName:b,AttachmentNameLength:Co,updateUploadData:j,onOKClick:function(){v()},onCancelClick:r}}}),vt=n("a370"),ht=n("429b"),gt=n("7460"),yt=n("eb85"),Vt=n("adad"),Ct=n("823b"),kt=n("7d53"),xt=n("0016"),wt=n("27f9");ft.render=tt;var Nt=ft;Ot()(ft,"components",{QDialog:it["a"],QCard:ut["a"],QCardSection:vt["a"],QTabs:ht["a"],QTab:gt["a"],QSeparator:yt["a"],QTabPanels:Vt["a"],QTabPanel:Ct["a"],QFile:kt["a"],QIcon:xt["a"],QInput:wt["a"],QCardActions:dt["a"],QBtn:pt["a"]});var _t=Object(i["defineComponent"])({props:{entryId:{type:String,required:!0},multiple:{type:Boolean,default:!1}},emits:Object(ze["a"])(Ze["a"].emits),setup:function(e){var t=Object(Ze["a"])(),n=t.dialogRef,a=t.onDialogHide,o=t.onDialogOK,c=t.onDialogCancel,r=Object(f["a"])(),l=pe(),u=Object(i["ref"])([]),d=Object(i["computed"])((function(){return l.state.entries[e.entryId]?l.state.entries[e.entryId].attachments:[]})),s=Object(i["computed"])((function(){return Object.keys(d.value).length})),b=function(t){u.value.includes(t)?u.value=u.value.filter((function(e){return e!==t})):e.multiple?u.value=[].concat(Object(ze["a"])(u.value),[t]):u.value=[t]},p=function(){r.dialog({component:Nt,componentProps:{attachments:d}}).onOk(function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,l.dispatch(H,{id:e.entryId,attachment:n});case 5:b(n.name),r.notify({message:"Attachment saved",type:"positive"}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),r.notify({message:t.t0.message,type:"negative"});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}())};return{dialogRef:n,onDialogHide:a,getAttachmentIcon:ie,getExtension:y["extension"],selected:u,filteredAttachments:d,filteredAttachmentsLen:s,setSelected:b,createAttachment:p,onOKClick:function(){u.value&&o(e.multiple?u.value:u.value[0])},onCancelClick:c}}}),Bt=n("2c91"),qt=n("1c1c"),St=n("66e5"),Tt=n("4074"),Dt=n("58a8"),At=n("714f");_t.render=Ge;var Qt=_t;Ot()(_t,"components",{QDialog:it["a"],QCard:ut["a"],QCardSection:vt["a"],QSpace:Bt["a"],QBtn:pt["a"],QTooltip:bt["a"],QList:qt["a"],QItem:St["a"],QItemSection:Tt["a"],QIcon:xt["a"],QBadge:Dt["a"],QCardActions:dt["a"]}),Ot()(_t,"directives",{Ripple:At["a"]});var It={class:"absolute-bottom-right text-subtitle2 text-weight-bold"},Rt={class:"text-subtitle2"};function Et(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-img"),l=Object(i["resolveComponent"])("q-card-section"),u=Object(i["resolveComponent"])("q-card"),d=Object(i["resolveComponent"])("q-dialog");return Object(i["openBlock"])(),Object(i["createBlock"])(d,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["withCtx"])((function(){return[e.attachment.content_type.startsWith("image")?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:0,src:e.entryAttachment(e.entryId,e.attachment.name)},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",It,Object(i["toDisplayString"])(e.attachment.name),1)]})),_:1},8,["src"])):e.attachment.content_type.startsWith("text")?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:1},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{class:"text-h6 q-pb-none ellipsis"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.attachment.name),1)]})),_:1}),Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.renderText(e.attachment.data)),1)]})),_:1})]})),_:1})):e.attachment.content_type.startsWith("audio")?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:2,class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{class:"text-h6 ellipsis"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.attachment.name),1)]})),_:1}),Object(i["createVNode"])("audio",{controls:"",src:e.entryAttachment(e.entryId,e.attachment.name)},null,8,["src"])]})),_:1})):e.attachment.content_type.startsWith("video")?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:3,class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{class:"text-h6 ellipsis"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.attachment.name),1)]})),_:1}),Object(i["createVNode"])("video",{controls:"",class:"q-dialog-plugin",src:e.entryAttachment(e.entryId,e.attachment.name),style:{"max-width":"600px"}},null,8,["src"])]})),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:4,class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{class:"text-h6 ellipsis"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.attachment.name)+" ",1),Object(i["createVNode"])("div",Rt,Object(i["toDisplayString"])(e.attachment.content_type),1)]})),_:1})]})),_:1}))]})),_:1},8,["onHide"])}var Ut=Object(i["defineComponent"])({name:"PreviewAttachmentDialog",props:{attachment:{type:Object,required:!0},entryId:{type:String,required:!0}},emits:Object(ze["a"])(Ze["a"].emits),setup:function(){var e=Object(Ze["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,o=e.onDialogCancel,c=pe();return{dialogRef:t,onDialogHide:n,onOKClick:function(){a()},onCancelClick:o,entryAttachment:c.getters.entryAttachment,renderText:ue}}}),Ft=n("068f");Ut.render=Et;var Lt=Ut;Ot()(Ut,"components",{QDialog:it["a"],QImg:Ft["a"],QCard:ut["a"],QCardSection:vt["a"]});var Pt={key:1,class:"bg-grey-3 rounded-borders text-caption q-pa-xs ellipsis-3-lines cursor-pointer",style:{width:"64px",height:"64px","line-height":"1.3em","font-size":"10px","word-wrap":"break-word"}};function Jt(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-tooltip"),l=Object(i["resolveComponent"])("q-img"),u=Object(i["resolveComponent"])("q-avatar");return e.attachment.content_type.startsWith("image")?(Object(i["openBlock"])(),Object(i["createBlock"])(l,{key:0,class:"bg-grey-3 rounded-borders cursor-pointer",style:{width:"64px",height:"64px"},src:e.entryAttachment(e.entryId,e.attachment.name)},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,{target:!0,anchor:"center middle",self:"bottom middle",class:"text-weight-bold bg-black","transition-show":"scale","transition-hide":"scale"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.attachment.name),1)]})),_:1})]})),_:1},8,["src"])):e.attachment.content_type.startsWith("text")?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Pt,[Object(i["createVNode"])(r,{target:!0,anchor:"center middle",self:"bottom middle",class:"text-weight-bold bg-black","transition-show":"scale","transition-hide":"scale"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.attachment.name),1)]})),_:1}),Object(i["createTextVNode"])(" "+Object(i["toDisplayString"])(e.renderText(e.attachment.data)),1)])):e.attachment.content_type.startsWith("audio")?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:2,rounded:"",color:"blue-grey-3",class:"cursor-pointer",icon:"headset","text-color":"dark",style:{width:"64px",height:"64px"}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,{target:!0,anchor:"center middle",self:"bottom middle",class:"text-weight-bold bg-black","transition-show":"scale","transition-hide":"scale"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.attachment.name),1)]})),_:1})]})),_:1})):e.attachment.content_type.startsWith("video")?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:3,rounded:"",color:"red-3",class:"cursor-pointer",icon:"play_circle_outline","text-color":"dark",style:{width:"64px",height:"64px"}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,{target:!0,anchor:"center middle",self:"bottom middle",class:"text-weight-bold bg-black","transition-show":"scale","transition-hide":"scale"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.attachment.name),1)]})),_:1})]})),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:4,rounded:"",color:"grey-3",class:"cursor-pointer",icon:"insert_drive_file","text-color":"dark",style:{width:"64px",height:"64px"}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,{target:!0,anchor:"center middle",self:"bottom middle",class:"text-weight-bold bg-black","transition-show":"scale","transition-hide":"scale"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.attachment.name),1)]})),_:1})]})),_:1}))}var Ht=Object(i["defineComponent"])({name:"AttachmentsFieldIcon",props:{attachment:{type:Object,required:!0},entryId:{type:String,required:!0}},setup:function(e){var t=pe();return{entryAttachment:t.getters.entryAttachment,renderText:ue}}}),zt=n("cb32");Ht.render=Jt;var Mt=Ht;Ot()(Ht,"components",{QImg:Ft["a"],QTooltip:bt["a"],QAvatar:zt["a"]});var Kt=Object(i["defineComponent"])({components:{AttachmentsFieldIcon:Mt},name:"AttachmentsField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=Object(f["a"])(),o=pe(),c=Object(i["ref"])(""),r=Object(i["computed"])((function(){return o.state.entries[e.entry.id]?o.state.entries[e.entry.id].attachments:[]})),l=Object(i["computed"])((function(){return Object.entries(r.value).filter((function(t){return e.modelValue.attachments.includes(t[0])})).map((function(e){return Object(h["a"])({name:e[0]},e[1])}))})),u=function(t){t=t.filter((function(e){return e in r.value})),n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{attachments:t}))},d=function(t){e.modelValue.attachments.includes(t)&&n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{attachments:e.modelValue.attachments.filter((function(e){return e!==t}))}))},s=function(){a.dialog({component:Qt,componentProps:{entryId:e.entry.id}}).onOk((function(t){t in r.value&&(e.modelValue.attachments.includes(t)||u([].concat(Object(ze["a"])(e.modelValue.attachments),[t])))}))},b=function(t){a.dialog({component:Lt,componentProps:{attachment:t,entryId:e.entry.id}})};return{selectAttachments:s,linkedAttachments:l,getAttachmentIcon:ie,removeAttachment:d,currentSlide:c,liveAttachments:r,entryAttachment:o.getters.entryAttachment,renderText:ue,previewAttachment:b}}});n("7e51");Kt.render=He,Kt.__scopeId="data-v-6f505ae6";var Wt=Kt;Ot()(Kt,"components",{QSpace:Bt["a"],QBtn:pt["a"],QList:qt["a"],QItem:St["a"],QItemSection:Tt["a"],QIcon:xt["a"],QTooltip:bt["a"]});var Yt={key:0},$t={key:1},Gt={class:"text-subtitle2 q-mb-xs"},Zt={key:1,class:"text-subtitle2 text-grey"};function Xt(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-editor");return e.editView?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Yt,[Object(i["createVNode"])(r,{dense:"",modelValue:e.modelValue.content,"onUpdate:modelValue":e.updateValue,class:"q-mt-md","max-height":"200px",toolbar:[["bold","italic","underline","strike","subscript","superscript"],["undo","redo"],["removeFormat"]]},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",$t,[Object(i["createVNode"])("div",Gt,Object(i["toDisplayString"])(e.modelValue.name),1),e.modelValue.content?(Object(i["openBlock"])(),Object(i["createBlock"])("div",{key:0,class:"text-body2",innerHTML:e.modelValue.content,style:{"word-wrap":"break-word"}},null,8,["innerHTML"])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Zt,"No content for this field."))]))}var en=Object(i["defineComponent"])({name:"DescriptionField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{content:t}))};return{FieldType:S,updateValue:a}}}),tn=n("d66b");en.render=Xt;var nn=en;Ot()(en,"components",{QEditor:tn["a"]});var an=Object(i["withScopeId"])("data-v-23affd3c");Object(i["pushScopeId"])("data-v-23affd3c");var on={key:0},cn={class:"text-body text-grey-8 q-pt-md row items-center"},rn={key:0,class:"text-red"},ln=Object(i["createTextVNode"])(" Please enter a valid URL "),un=Object(i["createTextVNode"])(" Unknown, will use generic style. "),dn={key:1},sn={class:"text-subtitle2 q-mb-xs"},bn={key:3,class:"text-subtitle2 text-grey"},pn={key:4,class:"text-negative text-subtitle2"};Object(i["popScopeId"])();var mn=an((function(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-input"),l=Object(i["resolveComponent"])("q-icon"),u=Object(i["resolveComponent"])("q-video"),d=Object(i["resolveComponent"])("q-item-section"),s=Object(i["resolveComponent"])("q-item"),b=Object(i["resolveComponent"])("q-card");return e.editView?(Object(i["openBlock"])(),Object(i["createBlock"])("div",on,[Object(i["createVNode"])(r,{label:"URL",modelValue:e.modelValue.url,"onUpdate:modelValue":e.updateUrl,debounce:"600",loading:e.embedLoading,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","loading"]),Object(i["createVNode"])("div",cn,[e.embedService==e.EmbedFieldService.Invalid?(Object(i["openBlock"])(),Object(i["createBlock"])("div",rn,[Object(i["createVNode"])(l,{name:"clear",class:"q-pr-sm"}),ln])):e.embedService!=e.EmbedFieldService.Unknown?(Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],{key:1},[Object(i["createVNode"])(l,{name:"checkmark",class:"q-pr-sm"}),Object(i["createTextVNode"])(" Will use "+Object(i["toDisplayString"])(e.EmbedFieldService[e.embedService])+" style. ",1)],64)):(Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],{key:2},[Object(i["createVNode"])(l,{name:"help_outline",class:"q-pr-sm"}),un],64))])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",dn,[Object(i["createVNode"])("div",sn,Object(i["toDisplayString"])(e.modelValue.name),1),e.embedServiceC==e.EmbedFieldService.YouTube?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:0,src:e.modelValue.url.replace("watch?v=","embed/")},null,8,["src"])):e.embedServiceC==e.EmbedFieldService.Soundcloud?(Object(i["openBlock"])(),Object(i["createBlock"])("iframe",{key:1,src:"https://soundcloud.com/oembed?format=js&url="+encodeURIComponent(e.modelValue.url)+"&iframe=true"},null,8,["src"])):e.embedServiceC==e.EmbedFieldService.Unknown?(Object(i["openBlock"])(),Object(i["createBlock"])(b,{key:2,class:"q-mt-sm",flat:"",bordered:""},{default:an((function(){return[Object(i["createVNode"])(s,null,{default:an((function(){return[Object(i["createVNode"])(d,{avatar:"",class:"q-pr-none",style:{"min-width":"48px"}},{default:an((function(){return[Object(i["createVNode"])(l,{name:"link"})]})),_:1}),Object(i["createVNode"])(d,{class:"text-subtitle2"},{default:an((function(){return[Object(i["createVNode"])("a",{href:e.modelValue.url},Object(i["toDisplayString"])(e.modelValue.url),9,["href"])]})),_:1})]})),_:1})]})),_:1})):e.modelValue.url?(Object(i["openBlock"])(),Object(i["createBlock"])("div",pn,"Error parsing URL!")):(Object(i["openBlock"])(),Object(i["createBlock"])("div",bn," No URL for this field. "))]))})),On=Object(i["defineComponent"])({name:"EmbedField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=(Object(f["a"])(),Object(i["ref"])(!1)),o=Object(i["ref"])(D.Unknown),c=Object(i["computed"])((function(){return re(e.modelValue.url)})),r=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{url:t}))};return Object(i["watchEffect"])(Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.modelValue.url){t.next=2;break}return t.abrupt("return");case 2:return a.value=!0,t.next=5,r(200);case 5:o.value=re(e.modelValue.url),a.value=!1;case 7:case"end":return t.stop()}}),t)})))),{FieldType:S,updateUrl:l,embedLoading:a,embedService:o,embedServiceC:c,EmbedFieldService:D}}}),jn=(n("c1d8"),n("6ac0"));On.render=mn,On.__scopeId="data-v-23affd3c";var fn=On;Ot()(On,"components",{QInput:wt["a"],QIcon:xt["a"],QVideo:jn["a"],QCard:ut["a"],QItem:St["a"],QItemSection:Tt["a"]});var vn={key:0},hn=Object(i["createTextVNode"])(" No attachments saved "),gn={key:1},yn={class:"text-subtitle2 q-mb-xs"},Vn={key:1,class:"text-subtitle2 q-mb-xs text-negative"};function Cn(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-btn"),l=Object(i["resolveComponent"])("q-item-label"),u=Object(i["resolveComponent"])("q-item-section"),d=Object(i["resolveComponent"])("q-icon"),s=Object(i["resolveComponent"])("q-item"),b=Object(i["resolveComponent"])("q-select"),p=Object(i["resolveComponent"])("q-input"),m=Object(i["resolveComponent"])("map-view");return e.editView?(Object(i["openBlock"])(),Object(i["createBlock"])("div",vn,[Object(i["createVNode"])(r,{label:"Edit locations",outline:"",color:"primary",class:"full-width",disable:!e.modelValue.imageKey,onClick:e.editLocations},null,8,["disable","onClick"]),Object(i["createVNode"])(b,{label:"Image attachment",outlined:"",dense:"",class:"q-mt-sm",options:e.attachmentOptions,modelValue:e.modelValue.imageKey,"onUpdate:modelValue":e.updateImageKey},{option:Object(i["withCtx"])((function(e){return[Object(i["createVNode"])(s,Object(i["mergeProps"])(e.itemProps,Object(i["toHandlers"])(e.itemEvents),{dense:""}),{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{innerHTML:e.opt.label},null,8,["innerHTML"])]})),_:2},1024),Object(i["createVNode"])(u,{avatar:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{size:"16px",name:e.opt.icon},null,8,["name"])]})),_:2},1024)]})),_:2},1040)]})),"no-option":Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{class:"text-italic text-grey"},{default:Object(i["withCtx"])((function(){return[hn]})),_:1})]})),_:1})]})),_:1},8,["options","modelValue","onUpdate:modelValue"]),Object(i["createVNode"])(p,{class:"q-mt-sm",outlined:"",dense:"",label:"Custom name",modelValue:e.modelValue.customName,"onUpdate:modelValue":e.updateCustomName},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",gn,[Object(i["createVNode"])("div",yn,Object(i["toDisplayString"])(e.modelValue.name),1),e.mapBackground?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:0,locations:e.modelValue.locations,background:e.mapBackground,showLocations:"",style:{height:"200px"}},null,8,["locations","background"])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Vn," Set a background to load this map. "))]))}var kn={class:"text-h6"},xn=Object(i["createTextVNode"])("Create a new location"),wn={class:"row"},Nn={class:"col col-md-4"},_n={class:"col"},Bn={class:"col-auto"},qn={class:"row"},Sn={class:"col col-md-2 q-pr-sm"},Tn={class:"col col-md-2 q-pr-sm"};function Dn(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-space"),l=Object(i["resolveComponent"])("q-tooltip"),u=Object(i["resolveComponent"])("q-btn"),d=Object(i["resolveComponent"])("q-card-section"),s=Object(i["resolveComponent"])("map-view"),b=Object(i["resolveComponent"])("q-select"),p=Object(i["resolveComponent"])("select-entry"),m=Object(i["resolveComponent"])("q-input"),O=Object(i["resolveComponent"])("q-card"),j=Object(i["resolveComponent"])("q-dialog");return Object(i["openBlock"])(),Object(i["createBlock"])(j,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(O,{class:"q-dialog-plugin",style:{width:"100%"}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{class:"row align-items-center"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",kn,'Editing "'+Object(i["toDisplayString"])(e.modelValue.name)+'"',1),Object(i["createVNode"])(r),Object(i["createVNode"])(u,{icon:"add_location_alt",color:"primary",flat:"",round:"",dense:"",onClick:e.addLocation},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[xn]})),_:1})]})),_:1},8,["onClick"])]})),_:1}),Object(i["createVNode"])("div",null,[Object(i["createVNode"])(s,{background:e.mapBackground,locations:e.mapLocations,showLocations:"",editLocations:"","onUpdate:locations":t[1]||(t[1]=function(t){return e.mapLocations=t}),onSelected:t[2]||(t[2]=function(t){return e.mapSelected=t}),style:{height:"300px"},ref:"mapRef"},null,8,["background","locations"])]),Object(i["createVNode"])(d,{class:"q-pb-sm"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",wn,[Object(i["createVNode"])("div",Nn,[Object(i["createVNode"])(b,{label:e.selectOpts.length?"Select a location":"(no locations)",disable:!e.selectOpts.length,dense:"",options:e.selectOpts,outlined:"",class:"q-mr-sm",modelValue:e.mapSelected,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.mapSelected=t})},null,8,["label","disable","options","modelValue"])]),Object(i["createVNode"])("div",_n,[e.mapSelectedPtr?(Object(i["openBlock"])(),Object(i["createBlock"])(p,{key:0,outlined:"",dense:"",class:"q-mr-sm","options-dense":"",modelValue:e.mapSelectedPtr.entryId,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.mapSelectedPtr.entryId=t})},null,8,["modelValue"])):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])("div",Bn,[Object(i["createVNode"])(u,{icon:"delete_outline",class:"full-height",outline:"",color:"negative",disable:!e.mapSelectedPtr},null,8,["disable"])])])]})),_:1}),Object(i["createVNode"])(d,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",qn,[Object(i["createVNode"])("div",Sn,[e.mapSelectedPtr?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:0,type:"number",label:"X",dense:"",outlined:"",modelValue:e.mapSelectedPtr.position[0],"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.mapRef.moveLocation(e.mapSelected,{lat:e.mapSelectedPtr.position[1],lng:t})})},null,8,["modelValue"])):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])("div",Tn,[e.mapSelectedPtr?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:0,type:"number",label:"Y",dense:"",outlined:"",modelValue:e.mapSelectedPtr.position[1],"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.mapRef.moveLocation(e.mapSelected,{lat:t,lng:e.mapSelectedPtr.position[0]})})},null,8,["modelValue"])):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])(r),Object(i["createVNode"])(u,{label:"Save changes",color:"primary",flat:"",onClick:e.saveChanges},null,8,["onClick"])])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}function An(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-avatar"),l=Object(i["resolveComponent"])("q-item-section"),u=Object(i["resolveComponent"])("q-item-label"),d=Object(i["resolveComponent"])("q-item"),s=Object(i["resolveComponent"])("q-select");return Object(i["openBlock"])(),Object(i["createBlock"])(s,Object(i["mergeProps"])(e.attrs,{label:"Select an entry",options:e.selectOpts,modelValue:e.modelValue,"onUpdate:modelValue":e.updateValue,"option-value":function(e){return void 0!==e?e.id:""},"emit-value":"",multiple:e.multiple,"map-options":""}),Object(i["createSlots"])({option:Object(i["withCtx"])((function(e){return[Object(i["createVNode"])(d,e.itemProps,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{avatar:"",style:{"min-width":"0"}},{default:Object(i["withCtx"])((function(){return["attachment"===e.opt.avatar.type?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:0,rounded:"",size:"24px"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("img",{src:e.opt.avatar.data},null,8,["src"])]})),_:2},1024)):(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:1,"text-color":"primary",rounded:"",icon:e.opt.avatar.data,size:"24px"},null,8,["icon"]))]})),_:2},1024),Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.opt.label),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1040)]})),_:2},[e.multiple?void 0:{name:"prepend",fn:Object(i["withCtx"])((function(){return[e.currentOpt&&"attachment"===e.currentOpt.avatar.type?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:0,rounded:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("img",{src:e.currentOpt.avatar.data},null,8,["src"])]})),_:1})):e.currentOpt&&"icon"===e.currentOpt.avatar.type?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:1,"text-color":"primary",rounded:"",icon:e.currentOpt.avatar.data},null,8,["icon"])):Object(i["createCommentVNode"])("",!0)]}))}]),1040,["options","modelValue","onUpdate:modelValue","option-value","multiple"])}var Qn=Object(i["defineComponent"])({name:"SelectEntry",props:{modelValue:{type:Object,required:!0},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup:function(e,t){var n=pe(),a=Object(i["computed"])((function(){return Object.entries(n.state.entries).map((function(e){var t="attachment"===e[1].avatar.type?n.getters.entryAttachment(e[1].id,e[1].avatar.data):e[1].avatar.data;return{label:e[1].title,avatar:{type:e[1].avatar.type,data:t},id:e[1].id}}))})),o=Object(i["computed"])((function(){return a.value.find((function(t){return t.id===e.modelValue}))})),c=function(e){t.emit("update:modelValue",e)};return{attrs:t.attrs,updateValue:c,selectOpts:a,currentOpt:o}}}),In=n("0170");Qn.render=An;var Rn=Qn;function En(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("l-image-overlay"),l=Object(i["resolveComponent"])("entry-link"),u=Object(i["resolveComponent"])("l-popup"),d=Object(i["resolveComponent"])("l-marker"),s=Object(i["resolveComponent"])("q-btn"),b=Object(i["resolveComponent"])("l-control"),p=Object(i["resolveComponent"])("l-map");return e.mapReady?(Object(i["openBlock"])(),Object(i["createBlock"])(p,{key:0,crs:e.CRS.Simple,center:e.mapCenter,zoom:e.mapZoom,"onUpdate:zoom":t[1]||(t[1]=function(t){return e.mapZoom=t}),minZoom:-2,ref:"mapRef",options:{fullscreenControl:!0,fullscreenControlOptions:{position:"topleft"}}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,{url:e.mapImage,bounds:e.mapBounds},null,8,["url","bounds"]),e.showLocations?(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],{key:0},Object(i["renderList"])(e.mapLocations,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:n,"lat-lng":t.coordinates,draggable:e.editLocations,ref:function(t){t&&(e.mapLocationRefs[n]=t)},"onUpdate:latLng":function(t){return e.updateLocation(n,t)},onClick:function(t){return e.$emit("selected",n)}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{options:{minWidth:200,closeButton:!1}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{entryId:t.entryId,showLink:!e.editLocations},null,8,["entryId","showLink"])]})),_:2},1024)]})),_:2},1032,["lat-lng","draggable","onUpdate:latLng","onClick"])})),128)):Object(i["createCommentVNode"])("",!0),e.locations.length?(Object(i["openBlock"])(),Object(i["createBlock"])(b,{key:1,class:"leaflet-control leaflet-demo-control"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{icon:"chevron_left",dense:"",flat:"",size:"10px",onClick:e.focusPrevLocation},null,8,["onClick"]),Object(i["createVNode"])(s,{icon:"chevron_right",dense:"",flat:"",size:"10px",onClick:e.focusNextLocation},null,8,["onClick"])]})),_:1})):Object(i["createCommentVNode"])("",!0)]})),_:1},8,["crs","center","zoom"])):Object(i["createCommentVNode"])("",!0)}Ot()(Qn,"components",{QSelect:st["a"],QItem:St["a"],QItemSection:Tt["a"],QAvatar:zt["a"],QItemLabel:In["a"]});var Un=n("5afd"),Fn=Object(i["createTextVNode"])(" Untitled entry "),Ln={key:1},Pn={class:"row"},Jn={class:"col-auto q-mr-md"},Hn={class:"col"},zn={class:"text-h6",style:{"line-height":"1.2em"}},Mn=Object(i["createTextVNode"])(" View entry "),Kn={key:2,class:"text-subtitle2 q-mb-xs text-negative"};function Wn(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-avatar"),l=Object(i["resolveComponent"])("q-item-section"),u=Object(i["resolveComponent"])("q-item"),d=Object(i["resolveComponent"])("router-link");return e.item&&e.entry&&e.currentJournal?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:0,to:"/j/"+e.currentJournal+"/e/"+e.entry.id},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{avatar:""},{default:Object(i["withCtx"])((function(){return["attachment"===e.entryAvatar.type?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:0,rounded:"",size:e.avatarSize},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("img",{src:e.entryAvatar.data},null,8,["src"])]})),_:1},8,["size"])):(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:1,"text-color":"primary",rounded:"",icon:e.entryAvatar.data,size:e.avatarSize},null,8,["icon","size"]))]})),_:1}),e.entry.title?(Object(i["openBlock"])(),Object(i["createBlock"])(l,{key:0},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.entry.title),1)]})),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])(l,{key:1,class:"text-grey text-italic"},{default:Object(i["withCtx"])((function(){return[Fn]})),_:1}))]})),_:1},8,["to"])):e.entry&&e.currentJournal?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Ln,[Object(i["createVNode"])("div",Pn,[Object(i["createVNode"])("div",Jn,["attachment"===e.entryAvatar.type?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:0,rounded:"",size:e.avatarSize},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("img",{src:e.entryAvatar.data},null,8,["src"])]})),_:1},8,["size"])):(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:1,"text-color":"primary",rounded:"",icon:e.entryAvatar.data,size:e.avatarSize},null,8,["icon","size"]))]),Object(i["createVNode"])("div",Hn,[Object(i["createVNode"])("div",zn,Object(i["toDisplayString"])(e.entry.title),1),e.showLink?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:0,to:"/j/"+e.currentJournal+"/e/"+e.entryId,style:{"text-decoration":"none"},class:"text-subtitle2"},{default:Object(i["withCtx"])((function(){return[Mn]})),_:1},8,["to"])):Object(i["createCommentVNode"])("",!0)])])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Kn,"Error loading link!"))}var Yn=Object(i["defineComponent"])({name:"EntryLink",props:{entryId:{type:String,required:!0},showLink:{type:Boolean,default:!0},item:{type:Boolean,default:!1},avatarSize:{type:String}},setup:function(e){var t=pe(),n=Object(i["computed"])((function(){return t.state.entries[e.entryId]})),a=Object(i["computed"])((function(){if(n.value)return{data:"attachment"===n.value.avatar.type?t.getters.entryAttachment(n.value.id,n.value.avatar.data):n.value.avatar.data,type:n.value.avatar.type}})),o=Object(i["computed"])((function(){return t.state.currentJournal}));return{entry:n,entryAvatar:a,currentJournal:o}}});Yn.render=Wn;var $n=Yn;Ot()(Yn,"components",{QItem:St["a"],QItemSection:Tt["a"],QAvatar:zt["a"]});var Gn=Object(i["defineComponent"])({name:"MapView",props:{background:{type:Object,required:!0},locations:{type:Array,default:[]},showLocations:{type:Boolean,default:!1},editLocations:{type:Boolean,default:!1}},components:{LMap:Un["c"],LImageOverlay:Un["b"],LMarker:Un["d"],LPopup:Un["e"],EntryLink:$n,LControl:Un["a"]},emits:["selected","update:locations"],setup:function(e,t){var n=Object(i["ref"])(""),a=Object(i["ref"])([[0,0],[0,0]]),c=Object(i["ref"])([0,0]),r=Object(i["ref"])(0),l=Object(i["ref"])([]),u=Object(i["ref"])(void 0),d=Object(i["ref"])(!1),s=Object(i["ref"])(0),b=Object(i["computed"])((function(){return e.locations.map((function(e,t){return{entryId:e.entryId,coordinates:{lng:e.position[0],lat:e.position[1]},ref:l.value[t]?l.value[t].leafletObject:void 0}}))})),p=function(e){return{entryId:e.entryId,position:[e.coordinates.lat,e.coordinates.lng]}},m=function(e,n){t.emit("update:locations",b.value.map((function(t,a){return{entryId:t.entryId,position:e===a?[n.lng,n.lat]:[t.coordinates.lng,t.coordinates.lat]}})))},O=function(t){u.value&&l.value[t]&&u.value.leafletObject.flyTo({lat:e.locations[t].position[1],lng:e.locations[t].position[0]})},j=function(){s.value=s.value<=0?e.locations.length-1:s.value-1,O(s.value)},f=function(){s.value=s.value>=e.locations.length-1?0:s.value+1,O(s.value)},v=function(e,t){l.value[e]&&l.value[e].leafletObject.setLatLng(t)},h=function(){d.value=!1;var t=de(e.background.data,e.background.contentType);n.value=URL.createObjectURL(t);var o=new Image;o.onload=function(){a.value=[[0,0],[o.height,o.width]],c.value=[o.width/2,o.height/2],d.value=!0},o.src=n.value},g=function(){return c};return Object(i["onMounted"])((function(){h(),setTimeout((function(){u.value&&o["control"].fullscreen().addTo(u.value.leafletObject)}),500)})),Object(i["watchEffect"])((function(){e.background&&h()})),Object(i["onBeforeUpdate"])((function(){l.value=[]})),Object(i["onBeforeUnmount"])((function(){n.value&&URL.revokeObjectURL(n.value)})),{mapImage:n,mapBounds:a,mapCenter:c,mapLocations:b,mapZoom:r,normalizeLocation:p,CRS:o["CRS"],updateLocation:m,focusPrevLocation:j,focusNextLocation:f,focusLocation:O,mapFocus:s,mapLocationRefs:l,mapRef:u,getMapCenter:g,moveLocation:v,mapReady:d}}});n("20a9");Gn.render=En;var Zn=Gn;Ot()(Gn,"components",{QBtn:pt["a"]});var Xn=Object(i["defineComponent"])({name:"EditMapDialog",props:{entryId:{type:String,required:!0},modelValue:{type:Object,required:!0}},components:{SelectEntry:Rn,MapView:Zn},emits:Object(ze["a"])(Ze["a"].emits),setup:function(e){var t=Object(Ze["a"])(),n=t.dialogRef,a=t.onDialogHide,c=t.onDialogOK,r=t.onDialogCancel,l=pe(),u=(Object(f["a"])(),Object(i["computed"])((function(){var t=l.getters.entryAttachmentFull(e.entryId,e.modelValue.imageKey);if(t)return{data:t.data,contentType:t.content_type}}))),d=Object(i["ref"])(e.modelValue.locations),s=Object(i["ref"])(void 0),b=Object(i["ref"])(void 0),p=Object(i["computed"])((function(){return d.value.map((function(e,t){return t}))})),m=Object(i["computed"])((function(){return void 0!==s.value?d.value[s.value]:void 0})),O=function(){d.value=[].concat(Object(ze["a"])(d.value),[{entryId:"",position:b.value?b.value.getMapCenter():[0,0]}]),s.value=d.value.length-1},j=function(){c({locations:d})};return{mapBackground:u,saveChanges:j,dialogRef:n,onDialogHide:a,mapLocations:d,selectOpts:p,CRS:o["CRS"],addLocation:O,mapSelected:s,mapSelectedPtr:m,mapRef:b,onCancelClick:r}}});Xn.render=Dn;var ea=Xn;Ot()(Xn,"components",{QDialog:it["a"],QCard:ut["a"],QCardSection:vt["a"],QSpace:Bt["a"],QBtn:pt["a"],QTooltip:bt["a"],QSelect:st["a"],QInput:wt["a"],QCardActions:dt["a"]});var ta=Object(i["defineComponent"])({name:"MapField",emits:["update:modelValue"],components:{MapView:Zn},props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=pe(),o=Object(f["a"])(),c=Object(i["computed"])((function(){return a.state.entries[e.entry.id]?Object.entries(a.state.entries[e.entry.id].attachments).filter((function(e){return e[1].content_type.startsWith("image")})).map((function(e){return{label:e[0],value:e[0],icon:ie(e[1].content_type)}})):[]})),r=Object(i["computed"])((function(){var t=a.getters.entryAttachmentFull(e.entry.id,e.modelValue.imageKey);if(t)return{data:t.data,contentType:t.content_type}})),l=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{customName:t}))},u=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{imageKey:t.value}))},d=function(){o.dialog({component:ea,componentProps:{modelValue:e.modelValue,entryId:e.entry.id}}).onOk((function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{locations:t.locations}))}))};return{FieldType:S,updateCustomName:l,updateImageKey:u,attachmentOptions:c,editLocations:d,mapBackground:r}}});ta.render=Cn;var na=ta;Ot()(ta,"components",{QBtn:pt["a"],QSelect:st["a"],QItem:St["a"],QItemSection:Tt["a"],QItemLabel:In["a"],QIcon:xt["a"],QInput:wt["a"]});var aa={key:0},oa={key:1},ca={class:"text-subtitle2 q-mb-xs"},ra={class:"text-body1"};function la(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-input");return e.editView?(Object(i["openBlock"])(),Object(i["createBlock"])("div",aa,[Object(i["createVNode"])(r,{label:"Value",type:"number",outlined:"",dense:"",modelValue:e.modelValue.value,"onUpdate:modelValue":e.updateValue},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",oa,[Object(i["createVNode"])("div",ca,Object(i["toDisplayString"])(e.modelValue.name),1),Object(i["createVNode"])("div",ra,Object(i["toDisplayString"])(e.modelValue.value),1)]))}n("a9e3"),n("25eb");var ia=Object(i["defineComponent"])({name:"NumberField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{value:Number.parseInt(t)}))};return{FieldType:S,updateValue:a}}});ia.render=la;var ua=ia;Ot()(ia,"components",{QInput:wt["a"]});var da={key:0},sa=Object(i["createTextVNode"])(" Available variables:"),ba=Object(i["createVNode"])("br",null,null,-1),pa=Object(i["createTextVNode"])(" %min = Minimum value"),ma=Object(i["createVNode"])("br",null,null,-1),Oa=Object(i["createTextVNode"])(" %max = Maximum value "),ja=Object(i["createVNode"])("br",null,null,-1),fa=Object(i["createTextVNode"])(" %val = Current value"),va=Object(i["createVNode"])("br",null,null,-1),ha=Object(i["createTextVNode"])(" %val2 = Current value (%)"),ga=Object(i["createVNode"])("br",null,null,-1),ya=Object(i["createTextVNode"])(" %rem = Remaining value"),Va=Object(i["createVNode"])("br",null,null,-1),Ca=Object(i["createTextVNode"])(" %rem2 = Remaining value (%) "),ka=Object(i["createTextVNode"])("hi"),xa={class:"row q-gutter-md q-pt-sm"},wa={class:"col-md"},Na={class:"col-md"},_a={class:"col-md"},Ba={class:"row"},qa={class:"col-md"},Sa={class:"col-md"},Ta={key:1},Da={class:"text-subtitle2 q-mb-xs"},Aa={class:"absolute-full flex flex-center"},Qa={key:1,style:{display:"inline-block"}},Ia={key:1,class:"text-weight-bold text-h6"};function Ra(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-tooltip"),l=Object(i["resolveComponent"])("q-dialog"),u=Object(i["resolveComponent"])("q-icon"),d=Object(i["resolveComponent"])("q-input"),s=Object(i["resolveComponent"])("q-separator"),b=Object(i["resolveComponent"])("q-checkbox"),p=Object(i["resolveComponent"])("q-select"),m=Object(i["resolveComponent"])("q-color"),O=Object(i["resolveComponent"])("q-popup-proxy"),j=Object(i["resolveComponent"])("q-badge"),f=Object(i["resolveComponent"])("q-linear-progress"),v=Object(i["resolveComponent"])("q-circular-progress");return e.editView?(Object(i["openBlock"])(),Object(i["createBlock"])("div",da,[Object(i["createVNode"])(d,{label:"Label",modelValue:e.modelValue.label,"onUpdate:modelValue":e.updateLabel,style:{"font-family":"monospace"},outlined:"",dense:""},{append:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{name:"help"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[sa,ba,pa,ma,Oa,ja,fa,va,ha,ga,ya,Va,Ca]})),_:1}),Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[ka]})),_:1})]})),_:1})]})),_:1},8,["modelValue","onUpdate:modelValue"]),Object(i["createVNode"])("div",xa,[Object(i["createVNode"])("div",wa,[Object(i["createVNode"])(d,{outlined:"",dense:"",label:"Min",type:"number",modelValue:e.modelValue.minValue,"onUpdate:modelValue":e.updateMinValue},null,8,["modelValue","onUpdate:modelValue"])]),Object(i["createVNode"])("div",Na,[Object(i["createVNode"])(d,{label:"Max",type:"number",outlined:"",dense:"",modelValue:e.modelValue.maxValue,"onUpdate:modelValue":e.updateMaxValue},null,8,["modelValue","onUpdate:modelValue"])]),Object(i["createVNode"])("div",_a,[Object(i["createVNode"])(d,{label:"Value",type:"number",outlined:"",dense:"",modelValue:e.modelValue.value,"onUpdate:modelValue":e.updateValue},null,8,["modelValue","onUpdate:modelValue"])])]),Object(i["createVNode"])(s,{class:"q-my-md"}),Object(i["createVNode"])("div",Ba,[Object(i["createVNode"])("div",qa,[Object(i["createVNode"])(b,{modelValue:e.modelValue.showBar,"onUpdate:modelValue":e.updateShowBar,style:{transform:"translateX(-10px)"},label:"Show bar"},null,8,["modelValue","onUpdate:modelValue"])]),Object(i["createVNode"])("div",Sa,[Object(i["createVNode"])(p,{label:"Bar type",disable:!e.modelValue.showBar,options:e.barOptions,modelValue:e.modelValue.barType,"onUpdate:modelValue":e.updateBarType,outlined:"",dense:""},null,8,["disable","options","modelValue","onUpdate:modelValue"])])]),Object(i["createVNode"])(d,{class:"q-mt-sm",label:"Bar color",disable:!e.modelValue.showBar,modelValue:e.modelValue.barColor,"onUpdate:modelValue":e.updateBarColor,outlined:"",dense:""},{append:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{name:"colorize",class:"cursor-pointer"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(O,{"transition-show":"scale","transition-hide":"scale"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(m,{modelValue:e.modelValue.barColor,"onUpdate:modelValue":e.updateBarColor},null,8,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1})]})),_:1},8,["disable","modelValue","onUpdate:modelValue"])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Ta,[Object(i["createVNode"])("div",Da,Object(i["toDisplayString"])(e.modelValue.name),1),e.modelValue.showBar?(Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],{key:0},["linear"==e.modelValue.barType?(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:0,size:"24px",rounded:"",value:e.barValue,ref:"progress"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",Aa,[Object(i["createVNode"])(j,{color:"white","text-color":"accent",class:"text-weight-bold",label:e.progressLabel},null,8,["label"])])]})),_:1},8,["value"])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Qa,[Object(i["createVNode"])(v,{value:e.modelValue.value,size:"xl",min:e.modelValue.minValue,max:e.modelValue.maxValue,"show-value":"",style:{color:e.modelValue.barColor},"center-color":"grey-3","track-color":"grey-3"},null,8,["value","min","max","style"]),Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.progressLabel),1)]})),_:1})]))],64)):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Ia,Object(i["toDisplayString"])(e.progressLabel),1))]))}n("b680");var Ea=n("7962"),Ua=Object(i["defineComponent"])({name:"ProgressField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=Object(i["ref"])(null),o=function(t){var a=Number.parseInt(t)||0;n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{minValue:a}))},c=function(t){var a=Number.parseInt(t)||0;n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{maxValue:a}))},r=function(t){var a=Number.parseInt(t)||0;n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{value:a}))},l=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{showBar:t}))},u=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{barType:t.value}))},d=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{barColor:t}))},s=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{label:t}))},b=Object(i["computed"])((function(){return e.modelValue.value/(e.modelValue.maxValue-e.modelValue.minValue)})),p=Object(i["computed"])((function(){var t=e.modelValue.label.replaceAll("%min",String(e.modelValue.minValue));return t=t.replaceAll("%max",String(e.modelValue.maxValue)),t=t.replaceAll("%rem2",String((100*(1-b.value)).toFixed(2))),t=t.replaceAll("%rem",String(e.modelValue.maxValue-e.modelValue.value)),t=t.replaceAll("%val2",String((100*b.value).toFixed(2))),t=t.replaceAll("%val",String(e.modelValue.value)),t}));Object(i["watchEffect"])((function(){a.value&&Object(Ea["a"])("primary",e.modelValue.barColor,a.value.$el)}));var m=[{label:"Linear",value:"linear"},{label:"Circular",value:"circular"}];return{FieldType:S,updateLabel:s,updateMinValue:o,updateMaxValue:c,updateValue:r,updateShowBar:l,updateBarType:u,updateBarColor:d,barOptions:m,barValue:b,progress:a,progressLabel:p}}}),Fa=n("8f8e"),La=n("7cbe"),Pa=n("b498"),Ja=n("6b1d"),Ha=n("58ea");Ua.render=Ra;var za=Ua;Ot()(Ua,"components",{QInput:wt["a"],QIcon:xt["a"],QTooltip:bt["a"],QDialog:it["a"],QSeparator:yt["a"],QCheckbox:Fa["a"],QSelect:st["a"],QPopupProxy:La["a"],QColor:Pa["a"],QLinearProgress:Ja["a"],QBadge:Dt["a"],QCircularProgress:Ha["a"]});var Ma={key:0},Ka=Object(i["createTextVNode"])(" No categories"),Wa={key:1},Ya={class:"text-subtitle2 q-mb-xs"},$a={key:1,class:"text-subtitle2 text-grey"};function Ga(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-item-section"),l=Object(i["resolveComponent"])("q-item"),u=Object(i["resolveComponent"])("q-select"),d=Object(i["resolveComponent"])("select-entry"),s=Object(i["resolveComponent"])("entry-link"),b=Object(i["resolveComponent"])("q-list");return e.editView?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Ma,[Object(i["createVNode"])(u,{label:"Categories",outlined:"",dense:"",multiple:"",modelValue:e.modelValue.categories,"onUpdate:modelValue":e.updateCategories,options:e.categories,class:"q-mt-md","new-value-mode":"add-unique","option-label":"name","options-dense":"","option-value":"id","emit-value":"","map-options":"","use-chips":""},{"no-option":Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{dense:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,{class:"text-italic text-grey"},{default:Object(i["withCtx"])((function(){return[Ka]})),_:1})]})),_:1})]})),_:1},8,["modelValue","onUpdate:modelValue","options"]),Object(i["createVNode"])(d,{multiple:"",modelValue:e.modelValue.entries,"onUpdate:modelValue":e.updateEntries,outlined:"",dense:"",class:"q-mt-sm","options-dense":"",label:"Entries"},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Wa,[Object(i["createVNode"])("div",Ya,Object(i["toDisplayString"])(e.modelValue.name),1),e.entryReferences.length?(Object(i["openBlock"])(),Object(i["createBlock"])(b,{key:0,bordered:"",separator:"",class:"rounded-borders"},{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.entryReferences,(function(e){return Object(i["openBlock"])(),Object(i["createBlock"])(s,{entryId:e,key:e,item:""},null,8,["entryId"])})),128))]})),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])("div",$a,"No references for this field."))]))}n("07ac"),n("159b");var Za=Object(i["defineComponent"])({name:"ReferenceField",emits:["update:modelValue"],components:{SelectEntry:Rn,EntryLink:$n},props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=pe(),o=Object(i["computed"])((function(){return a.state.currentJournal?a.state.journals[a.state.currentJournal].categories:[]})),c=Object(i["computed"])((function(){return e.entry.category.map((function(e){return o.value.find((function(t){return t.id===e}))})).filter((function(e){return void 0!==e}))})),r=Object(i["computed"])((function(){return Object.values(a.state.entries).filter((function(t){return Object(Qe["intersection"])(t.category,e.modelValue.categories).length||e.modelValue.entries.includes(t.id)})).map((function(e){return e.id}))})),l=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{categories:t}))},u=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{entries:t}))};return Object(i["watchEffect"])((function(){e.editView||(e.modelValue.categories.forEach(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.dispatch(F,{category:t,flush:!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.modelValue.entries.forEach(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.dispatch(L,{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),{FieldType:S,categories:c,updateCategories:l,updateEntries:u,entryReferences:r}}});Za.render=Ga;var Xa=Za;Ot()(Za,"components",{QSelect:st["a"],QItem:St["a"],QItemSection:Tt["a"],QList:qt["a"]});var eo={key:0},to={key:1},no={class:"text-subtitle2 q-mb-xs"},ao={key:0,class:"text-body2"},oo={key:1,class:"text-subtitle2 text-grey"};function co(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-input");return e.editView?(Object(i["openBlock"])(),Object(i["createBlock"])("div",eo,[Object(i["createVNode"])(r,{label:"Content",outlined:"",dense:"",modelValue:e.modelValue.content,"onUpdate:modelValue":e.updateValue},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",to,[Object(i["createVNode"])("div",no,Object(i["toDisplayString"])(e.modelValue.name),1),e.modelValue.content?(Object(i["openBlock"])(),Object(i["createBlock"])("div",ao,Object(i["toDisplayString"])(e.modelValue.content),1)):(Object(i["openBlock"])(),Object(i["createBlock"])("div",oo,"No content for this field."))]))}var ro=Object(i["defineComponent"])({name:"TextField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{content:t}))};return{FieldType:S,updateValue:a}}});ro.render=co;var lo=ro;Ot()(ro,"components",{QInput:wt["a"]});var io={key:0},uo=Object(i["createTextVNode"])(" On"),so={class:"text-italic text-grey q-ml-sm"},bo=Object(i["createTextVNode"])(" Off"),po={class:"text-italic text-grey q-ml-sm"},mo={key:1},Oo={class:"text-subtitle2 q-mb-xs"},jo={class:"text-body2"};function fo(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-checkbox"),l=Object(i["resolveComponent"])("q-input");return e.editView?(Object(i["openBlock"])(),Object(i["createBlock"])("div",io,[Object(i["createVNode"])(r,{modelValue:e.modelValue.value,"onUpdate:modelValue":e.updateValue,style:{transform:"translateX(-10px)"}},{default:Object(i["withCtx"])((function(){return[e.modelValue.value?Object(i["renderSlot"])(e.$slots,"default",{key:0},(function(){return[uo,Object(i["createVNode"])("span",so,'"'+Object(i["toDisplayString"])(e.modelValue.whenTrue)+'"',1)]})):Object(i["renderSlot"])(e.$slots,"default",{key:1},(function(){return[bo,Object(i["createVNode"])("span",po,'"'+Object(i["toDisplayString"])(e.modelValue.whenFalse)+'"',1)]}))]})),_:1},8,["modelValue","onUpdate:modelValue"]),Object(i["createVNode"])(l,{label:"When on",outlined:"",class:"q-mt-md",dense:"",modelValue:e.modelValue.whenTrue,"onUpdate:modelValue":e.updateWhenTrue},null,8,["modelValue","onUpdate:modelValue"]),Object(i["createVNode"])(l,{label:"When off",outlined:"",dense:"",class:"q-mt-sm",modelValue:e.modelValue.whenFalse,"onUpdate:modelValue":e.updateWhenFalse},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",mo,[Object(i["createVNode"])("div",Oo,Object(i["toDisplayString"])(e.modelValue.name),1),Object(i["createVNode"])("div",jo,Object(i["toDisplayString"])(e.modelValue.value?e.modelValue.whenTrue:e.modelValue.whenFalse),1)]))}var vo=Object(i["defineComponent"])({name:"ToggleField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{value:t}))},o=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{whenTrue:t}))},c=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{whenFalse:t}))};return{FieldType:S,updateValue:a,updateWhenTrue:o,updateWhenFalse:c}}});vo.render=fo;var ho,go=vo;Ot()(vo,"components",{QCheckbox:Fa["a"],QInput:wt["a"]});var yo="1.1.0",Vo="https://gist.githubusercontent.com/milkdazombie/6fe765d5be0349ef42ae44f5e07f0018/raw",Co=64,ko={name:"New Text",content:""},xo={name:"New Description",content:""},wo={name:"New Number",value:0},No={name:"New Toggle",value:!0,whenTrue:"On",whenFalse:"Off"},_o={name:"New Progress",maxValue:100,minValue:0,value:100,showBar:!0,barType:"linear",barColor:"#007bf5",label:"%val / %max"},Bo={name:"New Attachments",attachments:[]},qo={name:"New Embed",url:""},So={name:"New Map",imageKey:void 0,locations:[]},To={name:"New Reference",categories:[],entries:[]},Do=(ho={},Object(g["a"])(ho,S.Text,{component:lo,default:ko,label:"Text",icon:"short_text"}),Object(g["a"])(ho,S.Description,{component:nn,default:xo,label:"Description",icon:"subject"}),Object(g["a"])(ho,S.Number,{component:ua,default:wo,label:"Number",icon:"pin"}),Object(g["a"])(ho,S.Toggle,{component:go,default:No,label:"Toggle",icon:"toggle_on"}),Object(g["a"])(ho,S.Progress,{component:za,default:_o,label:"Progress",icon:"horizontal_rule"}),Object(g["a"])(ho,S.Attachments,{component:Wt,default:Bo,label:"Attachments",icon:"perm_media"}),Object(g["a"])(ho,S.Map,{component:na,default:So,label:"Map",icon:"map"}),Object(g["a"])(ho,S.Reference,{component:Xa,default:To,label:"Reference",icon:"file_present"}),Object(g["a"])(ho,S.Embed,{component:fn,default:qo,label:"Embed",icon:"link"}),ho),Ao=[{label:"General",icon:"folder",selectable:!1,fieldType:"_",children:Object.entries(Do).map((function(e){return{fieldType:e[0],label:e[1].label,icon:e[1].icon}}))}],Qo={class:"text-h6"},Io=Object(i["createTextVNode"])("Create a new attachment"),Ro=Object(i["createTextVNode"])("Close dialog"),Eo={key:1,class:"text-grey q-pa-md"},Uo={key:0,class:"q-px-sm text-caption",style:{"line-height":"1.3em"}},Fo={key:1,class:"q-px-sm text-grey"},Lo={key:1},Po={key:2},Jo={key:3},Ho={key:4,class:"text-body text-grey q-px-sm"},zo=Object(i["createVNode"])("td",{class:"text-left text-grey"},"Name",-1),Mo={class:"text-right"},Ko=Object(i["createVNode"])("td",{class:"text-left text-grey"},"Type",-1),Wo={class:"text-right"},Yo=Object(i["createVNode"])("td",{class:"text-left text-grey"},"Size",-1),$o={class:"text-right"},Go={class:"row justify-end"},Zo={key:1,class:"text-grey q-pa-md text-center"},Xo={class:"text-body q-pl-md text-grey"};function ec(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-space"),l=Object(i["resolveComponent"])("q-tooltip"),u=Object(i["resolveComponent"])("q-btn"),d=Object(i["resolveComponent"])("q-card-section"),s=Object(i["resolveComponent"])("q-icon"),b=Object(i["resolveComponent"])("q-item-section"),p=Object(i["resolveComponent"])("q-badge"),m=Object(i["resolveComponent"])("q-item"),O=Object(i["resolveComponent"])("q-list"),j=Object(i["resolveComponent"])("q-img"),f=Object(i["resolveComponent"])("q-dialog"),v=Object(i["resolveComponent"])("q-markup-table"),h=Object(i["resolveComponent"])("q-splitter"),g=Object(i["resolveComponent"])("q-card-actions"),y=Object(i["resolveComponent"])("q-card"),V=Object(i["resolveDirective"])("close-popup"),C=Object(i["resolveDirective"])("ripple");return Object(i["openBlock"])(),Object(i["createBlock"])(f,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(y,{class:"q-dialog-plugin",style:{width:"800px"}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{class:"row align-items-center"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",Qo,'"'+Object(i["toDisplayString"])(e.entry.title)+'" - Attachments',1),Object(i["createVNode"])(r),Object(i["createVNode"])(u,{icon:"add",color:"primary",flat:"",round:"",dense:"",class:"q-mr-sm",onClick:e.createAttachment},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Io]})),_:1})]})),_:1},8,["onClick"]),Object(i["withDirectives"])(Object(i["createVNode"])(u,{icon:"close",flat:"",round:"",dense:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Ro]})),_:1})]})),_:1},512),[[V]])]})),_:1}),Object(i["createVNode"])(d,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(h,{modelValue:e.splitVal,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.splitVal=t}),limits:[40,55]},{before:Object(i["withCtx"])((function(){return[e.isEmpty(e.filteredAttachments)?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Eo,"No attachments found.")):(Object(i["openBlock"])(),Object(i["createBlock"])(O,{key:0,separator:"",dense:"",style:{overflow:"auto",height:"200px"}},{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.filteredAttachments,(function(t,n){return Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createBlock"])(m,{clickable:"",key:n,onClick:function(t){return e.setSelected(n)},active:n===e.selectedAttKey},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(b,{avatar:"",class:"q-pr-none",style:{"min-width":"0",width:"28px"}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{name:e.getAttachmentIcon(t.content_type),size:"20px"},null,8,["name"])]})),_:2},1024),Object(i["createVNode"])(b,{class:"ellipsis"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(n),1)]})),_:2},1024),Object(i["createVNode"])(b,{side:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{outline:"",color:"grey"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.getExtension(t.content_type)||"?"),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["onClick","active"])),[[C]])})),128))]})),_:1}))]})),after:Object(i["withCtx"])((function(){return[e.selectedAttKey&&e.selectedAtt?(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:0,horizontal:"",modelValue:e.selectedAttSplitter,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selectedAttSplitter=t}),limits:[40,60],style:{height:"200px"}},{before:Object(i["withCtx"])((function(){return["text/plain"===e.selectedAtt.content_type?(Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],{key:0},[e.renderText(e.selectedAtt.data)?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Uo,Object(i["toDisplayString"])(e.renderText(e.selectedAtt.data)),1)):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Fo,"Empty content"))],64)):e.selectedAtt.content_type.startsWith("audio")?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Lo,[Object(i["createVNode"])("audio",{controls:"",src:e.selectedAttData},null,8,["src"])])):e.selectedAtt.content_type.startsWith("image")?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Po,[Object(i["createVNode"])(j,{onClick:t[1]||(t[1]=function(t){return e.zoomImage=!0}),src:e.selectedAttData,class:"cursor-pointer"},null,8,["src"]),Object(i["createVNode"])(f,{modelValue:e.zoomImage,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.zoomImage=t})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(j,{src:e.selectedAttData},null,8,["src"])]})),_:1},8,["modelValue"])])):e.selectedAtt.content_type.startsWith("video")?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Jo,[Object(i["createVNode"])("video",{controls:"",src:e.selectedAttData},null,8,["src"])])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Ho," Unable to load preview "))]})),after:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(v,{flat:"",dense:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("tbody",null,[Object(i["createVNode"])("tr",null,[zo,Object(i["createVNode"])("td",Mo,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.truncate(e.selectedAttKey,{length:16}))+" ",1),Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.selectedAttKey),1)]})),_:1})])]),Object(i["createVNode"])("tr",null,[Ko,Object(i["createVNode"])("td",Wo,Object(i["toDisplayString"])(e.truncate(e.selectedAtt.content_type,{length:16})),1)]),Object(i["createVNode"])("tr",null,[Yo,Object(i["createVNode"])("td",$o,Object(i["toDisplayString"])(e.humanStorageSize(e.selectedAtt.data.length)),1)])])]})),_:1}),Object(i["createVNode"])("div",Go,[Object(i["createVNode"])(u,{round:"",icon:"mode_edit",class:"q-mr-sm",size:"12px",flat:"",onClick:e.replaceAttachment},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])('Replace "'+Object(i["toDisplayString"])(e.selectedAttKey)+'"',1)]})),_:1})]})),_:1},8,["onClick"]),Object(i["createVNode"])(u,{onClick:e.deleteAttachment,round:"",icon:"delete_outline",color:"red",size:"12px",flat:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])('Delete "'+Object(i["toDisplayString"])(e.selectedAttKey)+'"',1)]})),_:1})]})),_:1},8,["onClick"])])]})),_:1},8,["modelValue"])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Zo," No attachment selected. "))]})),_:1},8,["modelValue"])]})),_:1}),Object(i["createVNode"])(g,{align:"left"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",Xo,Object(i["toDisplayString"])(e.filteredAttachmentsLen)+" attachment"+Object(i["toDisplayString"])(1===e.filteredAttachmentsLen?"":"s"),1),Object(i["createVNode"])(r),Object(i["createVNode"])(u,{flat:"",color:"primary",label:"OK",onClick:e.onOKClick},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}var tc={class:"text-h6"},nc=Object(i["createTextVNode"])(" Are you sure you want to delete "),ac={class:"text-weight-bold"},oc=Object(i["createTextVNode"])(" This action cannot be undone! "),cc=Object(i["createVNode"])("br",null,null,-1);function rc(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-card-section"),l=Object(i["resolveComponent"])("q-btn"),u=Object(i["resolveComponent"])("q-card-actions"),d=Object(i["resolveComponent"])("q-card"),s=Object(i["resolveComponent"])("q-dialog");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",tc,'Delete attachment "'+Object(i["toDisplayString"])(e.name)+'"',1)]})),_:1}),Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[nc,Object(i["createVNode"])("span",ac,'"'+Object(i["toDisplayString"])(e.name)+'"?',1),oc,cc]})),_:1}),Object(i["createVNode"])(u,{align:"right"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{color:"primary",label:"Cancel",onClick:e.onCancelClick,flat:""},null,8,["onClick"]),Object(i["createVNode"])(l,{color:"red",label:"Delete",onClick:e.onOKClick,flat:""},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}var lc=Object(i["defineComponent"])({name:"DeleteAttachmentDialog",props:{name:{type:String,required:!0}},emits:Object(ze["a"])(Ze["a"].emits),setup:function(){var e=Object(Ze["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,o=e.onDialogCancel;return{dialogRef:t,onDialogHide:n,onOKClick:function(){a()},onCancelClick:o}}});lc.render=rc;var ic=lc;Ot()(lc,"components",{QDialog:it["a"],QCard:ut["a"],QCardSection:vt["a"],QCardActions:dt["a"],QBtn:pt["a"]});var uc=Object(i["defineComponent"])({name:"ViewAttachmentsDialog",props:{entryId:{type:String,required:!0}},emits:Object(ze["a"])(Ze["a"].emits),setup:function(e){var t=Object(Ze["a"])(),n=t.dialogRef,a=t.onDialogHide,o=t.onDialogOK,c=t.onDialogCancel,r=Object(f["a"])(),l=pe(),u=Object(i["ref"])(55),d=Object(i["ref"])(""),s=Object(i["ref"])(30),b=Object(i["ref"])(!1),p=Object(i["computed"])((function(){return l.state.entries[e.entryId]})),O=Object(i["computed"])((function(){return p.value.attachments})),j=Object(i["computed"])((function(){return Object.keys(O.value).length})),v=Object(i["computed"])((function(){return p.value.attachments[d.value]||void 0})),g=Object(i["computed"])((function(){return v.value?le(v.value.content_type,v.value.data):void 0})),V=function(e){e in p.value.attachments&&(d.value=e)},C=function(){r.dialog({component:Nt,componentProps:{attachments:O}}).onOk(function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,l.dispatch(H,{id:e.entryId,attachment:n});case 5:return t.next=7,l.dispatch(L,{id:e.entryId,force:!0});case 7:V(n.name),r.notify({message:"Attachment saved",type:"positive"}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),r.notify({message:t.t0.message,type:"negative"});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}())},k=function(){r.dialog({component:Nt,componentProps:{attachments:p.value.attachments,replace:d.value,replaceData:"text/plain"===v.value.content_type?ue(v.value.data):void 0}}).onOk(function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(n){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,a=d.value,t.next=6,l.dispatch(z,{id:e.entryId,name:a});case 6:return t.next=8,l.dispatch(H,{id:e.entryId,attachment:n});case 8:if(V(n.name),r.notify({message:"Attachment updated",type:"positive"}),!p.value){t.next=15;break}return o=p.value.fields.map((function(e){switch("string"==typeof e.type&&(e.type=Number.parseInt(e.type)),e.type){case S.Attachments:e.attachments=e.attachments.map((function(e){return e==a?n.name:e}));break;case S.Map:e.imageKey=e.imageKey==a?n.name:e.imageKey;break}return e})),"attachment"==p.value.avatar.type&&p.value.avatar.data==a&&(p.value.avatar.data=n.name),t.next=15,l.dispatch(P,{id:e.entryId,data:Object(h["a"])(Object(h["a"])({},p.value),{},{fields:o})});case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](2),r.notify({message:t.t0.message,type:"negative"});case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}())},x=function(){d.value&&v.value&&r.dialog({component:ic,componentProps:{name:d.value}}).onOk(Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.dispatch(z,{id:e.entryId,name:d.value});case 3:d.value="",r.notify({message:"Attachment deleted",type:"positive"}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r.notify({message:t.t0.message,type:"negative"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))))};return Object(i["onMounted"])((function(){})),{dialogRef:n,onDialogHide:a,splitVal:u,filteredAttachments:O,filteredAttachmentsLen:j,createAttachment:C,getAttachmentIcon:ie,selectedAtt:v,selectedAttKey:d,setSelected:V,entry:p,renderText:ue,deleteAttachment:x,isEmpty:Qe["isEmpty"],selectedAttSplitter:s,truncate:Qe["truncate"],zoomImage:b,selectedAttData:g,getExtension:y["extension"],replaceAttachment:k,humanStorageSize:nt["b"].humanStorageSize,b64:le,onOKClick:function(){o()},onCancelClick:c}}}),dc=n("8562"),sc=n("2bb1"),bc=n("7f67");uc.render=ec;var pc=uc;Ot()(uc,"components",{QDialog:it["a"],QCard:ut["a"],QCardSection:vt["a"],QSpace:Bt["a"],QBtn:pt["a"],QTooltip:bt["a"],QSplitter:dc["a"],QList:qt["a"],QItem:St["a"],QItemSection:Tt["a"],QIcon:xt["a"],QBadge:Dt["a"],QImg:Ft["a"],QMarkupTable:sc["a"],QCardActions:dt["a"]}),Ot()(uc,"directives",{ClosePopup:bc["a"],Ripple:At["a"]});var mc={class:"text-h6"},Oc=Object(i["createTextVNode"])(" Are you sure you want to delete "),jc={class:"text-weight-bold"},fc=Object(i["createTextVNode"])(" This action cannot be undone! "),vc=Object(i["createVNode"])("br",null,null,-1),hc=Object(i["createVNode"])("div",{class:"text-red q-mt-sm"}," All fields and relationships will be permanently deleted. ",-1);function gc(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-card-section"),l=Object(i["resolveComponent"])("q-btn"),u=Object(i["resolveComponent"])("q-card-actions"),d=Object(i["resolveComponent"])("q-card"),s=Object(i["resolveComponent"])("q-dialog");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",mc,'Delete entry "'+Object(i["toDisplayString"])(e.entry.title)+'"',1)]})),_:1}),Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[Oc,Object(i["createVNode"])("span",jc,'"'+Object(i["toDisplayString"])(e.entry.title)+'"?',1),fc,vc,hc]})),_:1}),Object(i["createVNode"])(u,{align:"right"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{color:"primary",label:"Cancel",onClick:e.onCancelClick,flat:""},null,8,["onClick"]),Object(i["createVNode"])(l,{color:"red",label:"Delete",onClick:e.onOKClick,flat:""},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}var yc=Object(i["defineComponent"])({name:"DeleteEntryDialog",props:{entry:{type:Object,required:!0}},emits:Object(ze["a"])(Ze["a"].emits),setup:function(){var e=Object(Ze["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,o=e.onDialogCancel;return{dialogRef:t,onDialogHide:n,onOKClick:function(){a()},onCancelClick:o}}});yc.render=gc;var Vc=yc;Ot()(yc,"components",{QDialog:it["a"],QCard:ut["a"],QCardSection:vt["a"],QCardActions:dt["a"],QBtn:pt["a"]});var Cc=Object(i["withScopeId"])("data-v-710af520");Object(i["pushScopeId"])("data-v-710af520");var kc={class:"text-h6"},xc=Object(i["createTextVNode"])("Create a new field"),wc=Object(i["createTextVNode"])("Cancel editing"),Nc={class:"row"},_c={class:"col col-md-6"},Bc={class:"row items-center"},qc={key:3,class:"text-italic text-red"},Sc={key:0,class:"col col-md-6"},Tc={class:"row items-center"},Dc=Object(i["createTextVNode"])("Change entry avatar"),Ac=Object(i["createTextVNode"])("Change entry avatar"),Qc=Object(i["createTextVNode"])(" No categories "),Ic={key:1,class:"col col-md-6"},Rc={class:"row q-mt-md"},Ec=Object(i["createTextVNode"])(" Move current field up "),Uc=Object(i["createTextVNode"])(" Move current field down "),Fc={key:2,class:"col col-md-6 text-h6 align-items-center q-px-lg q-py-xl text-grey"},Lc=Object(i["createTextVNode"])(" Select a field to view more information "),Pc=Object(i["createTextVNode"])("Create a field to get started");Object(i["popScopeId"])();var Jc=Cc((function(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-space"),l=Object(i["resolveComponent"])("q-input"),u=Object(i["resolveComponent"])("q-item"),d=Object(i["resolveComponent"])("q-tree"),s=Object(i["resolveComponent"])("q-list"),b=Object(i["resolveComponent"])("q-popup-proxy"),p=Object(i["resolveComponent"])("q-tooltip"),m=Object(i["resolveComponent"])("q-btn"),O=Object(i["resolveComponent"])("q-card-section"),j=Object(i["resolveComponent"])("q-icon"),f=Object(i["resolveComponent"])("q-img"),v=Object(i["resolveComponent"])("entry-icon-dialog"),h=Object(i["resolveComponent"])("q-avatar"),g=Object(i["resolveComponent"])("q-item-section"),y=Object(i["resolveComponent"])("q-select"),V=Object(i["resolveComponent"])("q-form"),C=Object(i["resolveComponent"])("q-separator"),k=Object(i["resolveComponent"])("q-btn-group"),x=Object(i["resolveComponent"])("q-card-actions"),w=Object(i["resolveComponent"])("q-card"),N=Object(i["resolveComponent"])("q-dialog"),_=Object(i["resolveDirective"])("close-popup");return Object(i["openBlock"])(),Object(i["createBlock"])(N,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:Cc((function(){return[Object(i["createVNode"])(w,{class:"q-dialog-plugin",style:{width:"800px"}},{default:Cc((function(){return[Object(i["createVNode"])(O,{class:"row align-items-center"},{default:Cc((function(){return[Object(i["createVNode"])("div",kc,'Editing "'+Object(i["toDisplayString"])(e.entryModel.title)+'"',1),Object(i["createVNode"])(r),Object(i["createVNode"])(m,{icon:"add",color:"primary",flat:"",round:"",dense:"",class:"q-mr-sm",onClick:t[6]||(t[6]=function(t){return e.createFieldTooltip=!1})},{default:Cc((function(){return[Object(i["createVNode"])(b,{modelValue:e.createFieldPopup,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.createFieldPopup=t})},{default:Cc((function(){return[Object(i["createVNode"])(s,null,{default:Cc((function(){return[Object(i["createVNode"])(u,{class:"q-px-sm q-pb-none"},{default:Cc((function(){return[Object(i["createVNode"])(l,{label:"Search fields...",outlined:"",dense:"",autofocus:"",modelValue:e.createFieldTreeFilter,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.createFieldTreeFilter=t}),ref:e.createFieldTreeFilterRef},null,8,["modelValue"])]})),_:1}),Object(i["createVNode"])(u,{class:"q-px-sm"},{default:Cc((function(){return[Object(i["createVNode"])(d,{class:"full-width",nodes:e.createFieldTree,"node-key":"fieldType",filter:e.createFieldTreeFilter,expanded:e.createFieldTreeExpanded,"onUpdate:expanded":t[2]||(t[2]=function(t){return e.createFieldTreeExpanded=t}),selected:e.createFieldTreeSelected,"onUpdate:selected":[t[3]||(t[3]=function(t){return e.createFieldTreeSelected=t}),e.onCreateFieldSubmit]},null,8,["nodes","filter","expanded","selected","onUpdate:selected"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),Object(i["createVNode"])(p,{modelValue:e.createFieldTooltip,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.createFieldTooltip=t})},{default:Cc((function(){return[xc]})),_:1},8,["modelValue"])]})),_:1}),Object(i["createVNode"])(m,{icon:"delete_outline",color:"red",flat:"",round:"",dense:"",class:"q-mr-sm",onClick:e.deleteEntry},{default:Cc((function(){return[Object(i["createVNode"])(p,null,{default:Cc((function(){return[Object(i["createTextVNode"])('Delete "'+Object(i["toDisplayString"])(e.entryModel.title)+'"',1)]})),_:1})]})),_:1},8,["onClick"]),Object(i["withDirectives"])(Object(i["createVNode"])(m,{icon:"close",flat:"",round:"",dense:""},{default:Cc((function(){return[Object(i["createVNode"])(p,null,{default:Cc((function(){return[wc]})),_:1})]})),_:1},512),[[_]])]})),_:1}),Object(i["createVNode"])("div",Nc,[Object(i["createVNode"])("div",_c,[Object(i["createVNode"])(O,{class:"q-pt-none"},{default:Cc((function(){return[Object(i["createVNode"])(d,{nodes:e.fieldTree,"node-key":"key","selected-color":"primary",selected:e.fieldTreeSelected,"onUpdate:selected":t[7]||(t[7]=function(t){return e.fieldTreeSelected=t}),expanded:e.fieldTreeExpanded,"onUpdate:expanded":t[8]||(t[8]=function(t){return e.fieldTreeExpanded=t}),ref:"fieldTreeRef",accordion:""},{"default-header":Cc((function(e){return[Object(i["createVNode"])("div",Bc,[e.node.icon?(Object(i["openBlock"])(),Object(i["createBlock"])(j,{key:0,name:e.node.icon,size:"20px",class:["q-mr-sm",{"text-red":!e.node.label||"warning"==e.node.icon}]},null,8,["name","class"])):(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:1,src:e.node.avatar,width:"20px",class:"rounded-borders q-mr-sm"},null,8,["src"])),e.node.label?(Object(i["openBlock"])(),Object(i["createBlock"])("div",{key:2,class:{"text-red":"warning"==e.node.icon}},Object(i["toDisplayString"])(e.node.label),3)):(Object(i["openBlock"])(),Object(i["createBlock"])("div",qc,"Untitled field"))])]})),_:1},8,["nodes","selected","expanded"])]})),_:1})]),"entry"===e.fieldTreeSelected?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Sc,[Object(i["createVNode"])(O,{class:"q-pt-none"},{default:Cc((function(){return[Object(i["createVNode"])(V,null,{default:Cc((function(){return[Object(i["createVNode"])("div",Tc,["icon"===e.entryModel.avatar.type?(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:0,icon:e.entryModel.avatar.data,class:"q-mr-sm cursor-pointer",rounded:"",color:"grey-4","text-color":"dark",size:"56px"},{default:Cc((function(){return[Object(i["createVNode"])(p,null,{default:Cc((function(){return[Dc]})),_:1}),Object(i["createVNode"])(b,{"max-width":"200px",modelValue:e.showEntryAvatarDialog,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.showEntryAvatarDialog=t})},{default:Cc((function(){return[Object(i["createVNode"])(v,{entry:e.entry,useAttachments:"",onAttach:e.updateEntryAvatar},null,8,["entry","onAttach"])]})),_:1},8,["modelValue"])]})),_:1},8,["icon"])):(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:1,class:"q-mr-sm cursor-pointer",rounded:"",color:"grey-4","text-color":"dark",size:"56px"},{default:Cc((function(){return[Object(i["createVNode"])(p,null,{default:Cc((function(){return[Ac]})),_:1}),Object(i["createVNode"])("img",{src:e.entryAvatar},null,8,["src"]),Object(i["createVNode"])(b,{"max-width":"200px",modelValue:e.showEntryAvatarDialog,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.showEntryAvatarDialog=t})},{default:Cc((function(){return[Object(i["createVNode"])(v,{entry:e.entry,useAttachments:"",onAttach:e.updateEntryAvatar},null,8,["entry","onAttach"])]})),_:1},8,["modelValue"])]})),_:1})),Object(i["createVNode"])(l,{label:"Title",outlined:"",class:"col-grow",modelValue:e.entryModel.title,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.entryModel.title=t})},null,8,["modelValue"])]),Object(i["createVNode"])(y,{label:"In category...",outlined:"",class:"q-mt-sm",dense:"",multiple:"",modelValue:e.entryModel.category,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.entryModel.category=t}),options:e.categories,"new-value-mode":"add-unique","option-label":"name","options-dense":"","option-value":"id","emit-value":"","map-options":"","use-chips":""},{"no-option":Cc((function(){return[Object(i["createVNode"])(u,{dense:""},{default:Cc((function(){return[Object(i["createVNode"])(g,{class:"text-italic text-grey"},{default:Cc((function(){return[Qc]})),_:1})]})),_:1})]})),_:1},8,["modelValue","options"])]})),_:1})]})),_:1})])):e.currentField?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Ic,[Object(i["createVNode"])(O,{class:"q-pt-none"},{default:Cc((function(){return[Object(i["createVNode"])(V,null,{default:Cc((function(){return[Object(i["createVNode"])(l,{label:"Name",outlined:"",dense:"",modelValue:e.currentField.name,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.currentField.name=t}),ref:"currentFieldName"},null,8,["modelValue"]),Object(i["createVNode"])(C,{class:"q-my-md"}),(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(e.getComponentFromField(e.currentField.type)),{editView:!0,entry:e.entryModel,modelValue:e.currentField,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.currentField=t})},null,8,["entry","modelValue"])),Object(i["createVNode"])("div",Rc,[Object(i["createVNode"])(k,{flat:""},{default:Cc((function(){return[Object(i["createVNode"])(m,{color:"primary",flat:"",icon:"north",onClick:t[15]||(t[15]=function(t){return e.moveCurrentField(-1)}),class:"q-px-sm"},{default:Cc((function(){return[Object(i["createVNode"])(p,null,{default:Cc((function(){return[Ec]})),_:1})]})),_:1}),Object(i["createVNode"])(m,{color:"primary",flat:"",icon:"south",class:"q-px-sm",onClick:t[16]||(t[16]=function(t){return e.moveCurrentField(1)})},{default:Cc((function(){return[Object(i["createVNode"])(p,null,{default:Cc((function(){return[Uc]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(m,{class:"q-ml-auto",color:"red",flat:"",label:"Delete field",onClick:e.deleteField},null,8,["onClick"])])]})),_:1})]})),_:1})])):(Object(i["openBlock"])(),Object(i["createBlock"])("div",Fc,[e.entryModel.fields.length?(Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],{key:0},[Lc],64)):(Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],{key:1},[Pc],64))]))]),Object(i["createVNode"])(x,{align:"right"},{default:Cc((function(){return[Object(i["createVNode"])(m,{color:"primary",flat:"",label:"Save changes",onClick:e.submit},null,8,["onClick"]),Object(i["createVNode"])(m,{color:"primary",flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])})),Hc=(n("a434"),n("e1bd")),zc=Object(i["createTextVNode"])("Images only. 512x512 recommended.");function Mc(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-tab"),l=Object(i["resolveComponent"])("q-tabs"),u=Object(i["resolveComponent"])("q-separator"),d=Object(i["resolveComponent"])("q-item-label"),s=Object(i["resolveComponent"])("q-icon"),b=Object(i["resolveComponent"])("q-item"),p=Object(i["resolveComponent"])("q-list"),m=Object(i["resolveComponent"])("q-tab-panel"),O=Object(i["resolveComponent"])("q-file"),j=Object(i["resolveComponent"])("q-btn"),f=Object(i["resolveComponent"])("q-tab-panels");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[Object(i["createVNode"])(l,{class:"text-primary",modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tab=t}),dense:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,{label:"Icon",name:"icon"}),e.useAttachments?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:0,label:"Image",name:"image"})),e.useAttachments?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:1,label:"Attachment",name:"attachment"})):Object(i["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"]),Object(i["createVNode"])(u),Object(i["createVNode"])(f,{modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.tab=t}),animated:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(m,{name:"icon",class:"text-dark"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{style:{maxHeight:"150px"}},{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.iconGroups,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(b,{class:"column q-pa-none",key:t},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{caption:""},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.category),1)]})),_:2},1024),Object(i["createVNode"])(d,{class:"full-width row q-my-xs"},{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(t.icons,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(s,{name:t,key:t,class:"q-pa-xs cursor-pointer",size:"16px",onClick:function(n){return e.attachIcon(t)}},null,8,["name","onClick"])})),128))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1}),e.useAttachments?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:0,name:"image"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(O,{"bottom-slots":"",accept:"image/*",class:"full-width",placeholder:"Choose one image...",modelValue:e.selectedImage,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectedImage=t})},{hint:Object(i["withCtx"])((function(){return[zc]})),_:1},8,["modelValue"]),Object(i["createVNode"])(j,{color:"primary",label:"Attach",class:"full-width q-mt-lg",size:"sm",onClick:e.attachImage},null,8,["onClick"])]})),_:1})),e.useAttachments?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:1,name:"attachment",class:"text-dark"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(j,{outline:"",dense:"",label:"Select an attachment",color:"primary",onClick:e.selectAttachment},null,8,["onClick"])]})),_:1})):Object(i["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"])],64)}var Kc=Object(i["defineComponent"])({name:"EntryIconDialog",props:{useAttachments:{type:Boolean,default:!1},entry:{type:Object}},emits:["attach"],methods:{attachImage:function(){this.selectedImage&&this.$emit("attach",{type:"image",data:this.selectedImage})},attachIcon:function(e){this.$emit("attach",{type:"icon",data:e})},selectAttachment:function(){var e=this;this.entry&&this.$q.dialog({component:Qt,componentProps:{entryId:this.entry.id}}).onOk((function(t){e.$emit("attach",{type:"attachment",data:t})}))}},data:function(){return{selectedImage:void 0,tab:"icon",iconGroups:[{category:"Standard",icons:["subject","person","map"]},{category:"Figures",icons:["person","group","groups","directions_run","elderly","emoji_people","self_improvement","record_voice_over","manage_accounts","accessible","sentiment_very_satisfied","sentiment_satisfied","sentiment_neutral","sentiment_dissatisfied","sentiment_very_dissatisfied","mood_bad"]},{category:"Locations",icons:["home","apartment","corporate_fare","fence","holiday_village","foundation","festival","store_mall_directory","storefront","terrain","map","park","place","attractions","home_work","public"]},{category:"Miscellaneous",icons:["radio_button_checked","radio_button_unchecked","trip_origin","lens","adjust","device_hub","bubble_chart","error","stars","build_circle"]}]}}});Kc.render=Mc;var Wc=Kc;Ot()(Kc,"components",{QTabs:ht["a"],QTab:gt["a"],QSeparator:yt["a"],QTabPanels:Vt["a"],QTabPanel:Ct["a"],QList:qt["a"],QItem:St["a"],QItemLabel:In["a"],QIcon:xt["a"],QFile:kt["a"],QBtn:pt["a"]});var Yc={class:"text-subtitle2 q-mb-xs text-negative"};function $c(e,t,n,a,o,c){return Object(i["openBlock"])(),Object(i["createBlock"])("div",Yc,"Error loading field!")}var Gc=Object(i["defineComponent"])({name:"ErrorField",emits:["update:modelValue"],props:{modelValue:{type:Object},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=function(t){n("update:modelValue",Object(h["a"])(Object(h["a"])({},e.modelValue),{},{content:t}))};return{FieldType:S,updateValue:a}}});Gc.render=$c;var Zc=Gc,Xc=Object(i["defineComponent"])({name:"EditEntryDialog",props:{entry:{type:Object,required:!0},entryID:{type:String,required:!0}},emits:Object(ze["a"])(Ze["a"].emits),components:{EntryIconDialog:Wc},setup:function(e){var t=Object(Ze["a"])(),n=t.dialogRef,a=t.onDialogHide,o=t.onDialogOK,c=t.onDialogCancel,r=Object(f["a"])(),l=pe(),u=Object(v["f"])(),d=Object(i["reactive"])(Object(h["a"])({},e.entry)),s=Object(i["ref"])(null),b=Object(i["computed"])((function(){return l.getters.entryAttachment(e.entryID,d.avatar.data)})),p=function(e){if(e)for(var t=0;t<d.fields.length;t++)if(d.fields[t]&&e==d.fields[t].id)return d.fields[t]},O=function(e,t){if(e)for(var n=0;n<d.fields.length;n++)d.fields[n]&&e==d.fields[n].id&&(d.fields[n]=t)},j=function(e){return e in Do?Do[e].icon:"help"},g=Object(i["ref"])(null),y=Object(i["ref"])(null),V=Object(i["ref"])(["entry"]),C=Object(i["ref"])(!1),k=Object(i["ref"])(null),x=Object(i["computed"])({get:function(){return p(y.value)},set:function(e){e&&O(y.value,e)}}),w=Object(i["ref"])(!1),N=Object(i["computed"])((function(){return l.state.currentJournal})),_=function(e){if(x.value){var t=d.fields.indexOf(x.value);if(-1!==t){var n=t+e;if(!(n<0||n===d.fields.length)){var a=[t,n].sort();d.fields.splice(a[0],2,d.fields[a[1]],d.fields[a[0]])}}}},B=function(e){var t={label:e.title,avatar:"attachment"==e.avatar.type?b.value:void 0,icon:"icon"==e.avatar.type?e.avatar.data:void 0,children:[],key:"entry"};return t.children=e.fields.map((function(e){if(!e)return{label:"Broken field",key:Object(Hc["a"])(13),icon:"warning"};switch(e.type){default:return{label:e.name,key:e.id,icon:j(e.type)}}})),[t]},q=function(){r.dialog({component:Vc,componentProps:{entry:d}}).onOk(Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.dispatch(J,e.entryID);case 3:o(),u.push("/j/".concat(N.value)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r.notify({message:t.t0.message,type:"negative"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))))},S=function(e){w.value=!1,"image"!==e.type&&(d.avatar={type:e.type,data:e.data})},T=function(){x.value&&r.dialog({title:'Delete field "'.concat(x.value.name,'"'),message:'Are you sure you want to delete "'.concat(x.value.name,'"? This action cannot be undone!'),cancel:!0,persistent:!0,ok:{color:"red",label:"Delete",flat:!0}}).onOk((function(){for(var e=0;e<d.fields.length;e++){var t;if((null===(t=x.value)||void 0===t?void 0:t.id)==d.fields[e].id){d.fields=d.fields.filter((function(e){var t;return e.id!=(null===(t=x.value)||void 0===t?void 0:t.id)}));break}}}))},D=function(e){var t=Object(Hc["a"])(13),n=Object(h["a"])(Object(h["a"])({},Do[e].default),{},{type:e,id:t});d.fields.push(n),k.value=null,y.value=n.id,C.value=!1,V.value.includes("entry")||V.value.push("entry"),s.value&&s.value.focus()},A=function(e){return e in Do?Do[e].component:Zc},Q={entryModel:d,currentField:x,fieldTreeRef:g,fieldTree:Object(i["computed"])((function(){return B(d)})),fieldTreeSelected:y,fieldTreeExpanded:V,createFieldTree:Ao,createFieldTooltip:Object(i["ref"])(!1),createFieldPopup:C,createFieldTreeExpanded:Object(i["ref"])(["_"]),createFieldTreeFilter:Object(i["ref"])(""),createFieldTreeFilterRef:Object(i["ref"])(null),createFieldTreeSelected:k,getComponentFromField:A,submitCreateField:D,onCreateFieldSubmit:function(e){D(e)},categories:Object(i["computed"])((function(){return l.state.currentJournal?l.state.journals[l.state.currentJournal].categories:[]}))},I=function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.dispatch(P,{id:e.entryID,data:d});case 3:o(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),r.notify({message:t.t0,type:"negative"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();return Object(h["a"])(Object(h["a"])({dialogRef:n,onDialogHide:a},Q),{},{submit:I,currentFieldName:s,deleteField:T,deleteEntry:q,entryAvatar:b,showEntryAvatarDialog:w,moveCurrentField:_,updateEntryAvatar:S,onCancelClick:c})}}),er=(n("74d3"),n("7f41")),tr=n("0378"),nr=n("e7a9");Xc.render=Jc,Xc.__scopeId="data-v-710af520";var ar=Xc;Ot()(Xc,"components",{QDialog:it["a"],QCard:ut["a"],QCardSection:vt["a"],QSpace:Bt["a"],QBtn:pt["a"],QPopupProxy:La["a"],QList:qt["a"],QItem:St["a"],QInput:wt["a"],QTree:er["a"],QTooltip:bt["a"],QIcon:xt["a"],QImg:Ft["a"],QForm:tr["a"],QAvatar:zt["a"],QSelect:st["a"],QItemSection:Tt["a"],QSeparator:yt["a"],QBtnGroup:nr["a"],QCardActions:dt["a"]}),Ot()(Xc,"directives",{ClosePopup:bc["a"]});var or=Object(i["defineComponent"])({name:"EntryView",setup:function(){var e=pe(),t=Object(v["e"])(),n=Object(v["f"])(),a=Object(f["a"])(),o={entry:Object(i["computed"])((function(){return e.state.entries[t.params.eid]}))},c=Object(i["computed"])((function(){return e.state.currentJournal?e.state.journals[e.state.currentJournal].categories:[]})),r=Object(i["computed"])((function(){return o.entry.value?o.entry.value.category.map((function(e){return c.value.find((function(t){return t.id===e}))})).filter((function(e){return void 0!==e})):[]})),l=Object(i["computed"])((function(){return a.dark.isActive})),u=Object(i["ref"])(null),d=function(e){return Ie["a"].brightness(e)<128?"#fff":"#1d1d1d"},s=function(e){return Ie["a"].lighten(e,-25)},b=function(e){return e&&Qe["has"](e,"type")&&e.type in Do?Do[e.type].component:Zc},p=Object(i["computed"])((function(){return e.getters.entryAttachment(o.entry.value.id,o.entry.value.avatar.data)})),O=function(){o.entry.value.attachments["avatar"]&&a.dialog({component:Lt,componentProps:{attachment:Object(h["a"])(Object(h["a"])({},o.entry.value.attachments["avatar"]),{},{name:"avatar"}),entryId:t.params.eid}})},j=function(){a.dialog({component:ar,persistent:!0,componentProps:{entry:Qe["cloneDeep"](o.entry.value),entryID:t.params.eid}})},g=function(){a.dialog({component:Vc,componentProps:{entry:o.entry.value}}).onOk(Object(m["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.dispatch(J,t.params.eid);case 3:e.state.lastEntry="",n.push("/j/".concat(e.state.currentJournal)),o.next=10;break;case 7:o.prev=7,o.t0=o["catch"](0),a.notify({message:o.t0.message,type:"negative"});case 10:case"end":return o.stop()}}),o,null,[[0,7]])}))))},y=function(){a.dialog({component:pc,componentProps:{entryId:t.params.eid}})};return Object(v["d"])((function(){e.dispatch(M,o.entry.value.id)})),Object(h["a"])(Object(h["a"])({},o),{},{editEntry:j,categories:r,deleteEntry:g,entryAvatar:p,viewAttachments:y,getComponentFromField:b,getCategoryTextColor:d,getCategoryBorderColor:s,previewAvatar:O,categoryBadgeRef:u,darkActive:l})}}),cr=(n("f02d"),n("f20b"));or.render=Ae,or.__scopeId="data-v-6d61f85b";var rr=or;Ot()(or,"components",{QCard:ut["a"],QItem:St["a"],QItemSection:Tt["a"],QAvatar:zt["a"],QIcon:xt["a"],QImg:Ft["a"],QSeparator:yt["a"],QCardSection:vt["a"],QBadge:Dt["a"],QBtnDropdown:cr["a"],QList:qt["a"],QItemLabel:In["a"],QBtn:pt["a"]}),Ot()(or,"directives",{ClosePopup:bc["a"]});var lr={class:"q-mr-md text-weight-medium"},ir=Object(i["createTextVNode"])("Toggle dark mode"),ur={class:"q-ma-lg"};function dr(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-btn"),l=Object(i["resolveComponent"])("q-toolbar-title"),u=Object(i["resolveComponent"])("q-space"),d=Object(i["resolveComponent"])("q-tooltip"),s=Object(i["resolveComponent"])("q-toolbar"),b=Object(i["resolveComponent"])("q-header"),p=Object(i["resolveComponent"])("journal-drawer"),m=Object(i["resolveComponent"])("q-drawer"),O=Object(i["resolveComponent"])("router-view"),j=Object(i["resolveComponent"])("q-page-container"),f=Object(i["resolveComponent"])("q-layout");return Object(i["openBlock"])(),Object(i["createBlock"])(f,{view:"hHh lpR fFf"},{default:Object(i["withCtx"])((function(){return[e.currentJournal?(Object(i["openBlock"])(),Object(i["createBlock"])(b,{key:0,elevated:"",class:"bg-primary text-white"},{default:Object(i["withCtx"])((function(){return[e.currentJournal?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:0},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,{icon:"home",flat:"",round:"",onClick:e.exitJournal},null,8,["onClick"]),Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.currentJournal.title),1)]})),_:1}),Object(i["createVNode"])(u),Object(i["createVNode"])("div",lr,"v"+Object(i["toDisplayString"])(e.AppVersion),1),Object(i["createVNode"])(r,{icon:"dark_mode",round:"",flat:"",onClick:e.toggleDarkMode},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,null,{default:Object(i["withCtx"])((function(){return[ir]})),_:1})]})),_:1},8,["onClick"])]})),_:1})):Object(i["createCommentVNode"])("",!0)]})),_:1})):Object(i["createCommentVNode"])("",!0),e.currentJournal?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:1,side:"left",bordered:"",padding:"","show-if-above":""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{currentJournal:e.currentJournalID,entries:e.entries},null,8,["currentJournal","entries"])]})),_:1})):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(j,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",ur,[Object(i["createVNode"])(O,{name:"view"})])]})),_:1})]})),_:1})}var sr=Object(i["createTextVNode"])("Last viewed entry"),br=Object(i["createTextVNode"])(" Categories "),pr=Object(i["createTextVNode"])("Clear category filter"),mr=Object(i["createTextVNode"])("Manage categories"),Or=Object(i["createTextVNode"])("There are no categories in this journal."),jr=Object(i["createTextVNode"])(" Entries "),fr=Object(i["createTextVNode"])("Create a new entry"),vr=Object(i["createTextVNode"])(" Untitled entry "),hr=Object(i["createTextVNode"])("There are no entries in this journal.");function gr(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-input"),l=Object(i["resolveComponent"])("q-separator"),u=Object(i["resolveComponent"])("q-item-label"),d=Object(i["resolveComponent"])("entry-link"),s=Object(i["resolveComponent"])("q-tooltip"),b=Object(i["resolveComponent"])("q-btn"),p=Object(i["resolveComponent"])("category-chips"),m=Object(i["resolveComponent"])("q-item"),O=Object(i["resolveComponent"])("q-icon"),j=Object(i["resolveComponent"])("q-img"),f=Object(i["resolveComponent"])("q-item-section"),v=Object(i["resolveComponent"])("q-list");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[Object(i["createVNode"])(r,{standout:"bg-primary text-white",class:"q-px-md q-mt-lg",label:"Search",modelValue:e.entrySearch,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.entrySearch=t}),dense:"",clearable:""},null,8,["modelValue"]),Object(i["createVNode"])(l,{class:"q-mt-md"}),Object(i["createVNode"])(v,{padding:""},{default:Object(i["withCtx"])((function(){return[e.lastEntry?(Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],{key:0},[Object(i["createVNode"])(u,{header:""},{default:Object(i["withCtx"])((function(){return[sr]})),_:1}),Object(i["createVNode"])(d,{entryId:e.lastEntry,item:""},null,8,["entryId"]),Object(i["createVNode"])(l,{class:"q-mt-md q-mb-sm"})],64)):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(u,{header:"",class:"row justify-between items-center full-width q-pb-md"},{default:Object(i["withCtx"])((function(){return[br,Object(i["createVNode"])("div",null,[e.filteredCategories.length?(Object(i["openBlock"])(),Object(i["createBlock"])(b,{key:0,round:"",icon:"clear","text-color":"red",class:"q-mr-sm",size:"sm",onClick:t[2]||(t[2]=function(t){return e.entryCategoryFilter={}})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])((function(){return[pr]})),_:1})]})),_:1})):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(b,{round:"",icon:"settings",class:"self-end",size:"sm",onClick:e.openCreateCategory,"text-color":e.darkActive?"dark":"grey-7",color:e.darkActive?"primary":""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])((function(){return[mr]})),_:1})]})),_:1},8,["onClick","text-color","color"])])]})),_:1}),e.categories.length?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:1,class:"q-pt-none q-mb-sm",style:{"flex-wrap":"wrap"}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{categories:e.categories,modelValue:e.entryCategoryFilter,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.entryCategoryFilter=t})},null,8,["categories","modelValue"])]})),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:2,class:"text-grey"},{default:Object(i["withCtx"])((function(){return[Or]})),_:1})),Object(i["createVNode"])(l),Object(i["createVNode"])(u,{header:"",class:"row justify-between items-center full-width q-mt-sm"},{default:Object(i["withCtx"])((function(){return[jr,Object(i["createVNode"])(b,{round:"",icon:"add","text-color":e.darkActive?"dark":"primary",color:e.darkActive?"primary":"",class:"self-end",size:"sm",onClick:e.openCreateEntry},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])((function(){return[fr]})),_:1})]})),_:1},8,["text-color","color","onClick"])]})),_:1}),e.filteredEntries.length?(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],{key:3},Object(i["renderList"])(e.filteredEntries,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:t.id,to:"/j/"+e.currentJournal+"/e/"+t.id},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(f,{avatar:""},{default:Object(i["withCtx"])((function(){return["icon"==t.avatar.type?(Object(i["openBlock"])(),Object(i["createBlock"])(O,{key:0,name:t.avatar.data,color:"primary"},null,8,["name"])):(Object(i["openBlock"])(),Object(i["createBlock"])(j,{key:1,ratio:"1",src:e.getEntryAvatar(t.id,t.avatar.data),class:"rounded-borders"},null,8,["src"]))]})),_:2},1024),t.title?(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:0,class:"text-weight-medium"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.title),1)]})),_:2},1024)):(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:1,class:"text-grey text-italic"},{default:Object(i["withCtx"])((function(){return[vr]})),_:1}))]})),_:2},1032,["to"])})),128)):0==e.filteredEntries.length&&e.entrySearch?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:4},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{caption:""},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])('No results for "'+Object(i["toDisplayString"])(e.entrySearch)+'".',1)]})),_:1})]})),_:1})):Object(i["createCommentVNode"])("",!0),e.entries.length<=0?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:5},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{caption:""},{default:Object(i["withCtx"])((function(){return[hr]})),_:1})]})),_:1})):Object(i["createCommentVNode"])("",!0)]})),_:1})],64)}var yr=Object(i["createVNode"])("div",{class:"text-h6"},"Create a new entry",-1),Vr=Object(i["createTextVNode"])("Change entry avatar"),Cr=Object(i["createTextVNode"])("Change entry avatar"),kr=Object(i["createTextVNode"])(" No categories "),xr=Object(i["createTextVNode"])("Create a new category");function wr(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-card-section"),l=Object(i["resolveComponent"])("q-tooltip"),u=Object(i["resolveComponent"])("entry-icon-dialog"),d=Object(i["resolveComponent"])("q-popup-proxy"),s=Object(i["resolveComponent"])("q-avatar"),b=Object(i["resolveComponent"])("q-input"),p=Object(i["resolveComponent"])("q-item-section"),m=Object(i["resolveComponent"])("q-item"),O=Object(i["resolveComponent"])("q-btn"),j=Object(i["resolveComponent"])("q-select"),f=Object(i["resolveComponent"])("q-expansion-item"),v=Object(i["resolveComponent"])("q-spinner-dots"),h=Object(i["resolveComponent"])("q-card-actions"),g=Object(i["resolveComponent"])("q-card"),y=Object(i["resolveComponent"])("q-dialog");return Object(i["openBlock"])(),Object(i["createBlock"])(y,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(g,{class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("form",{onSubmit:t[6]||(t[6]=Object(i["withModifiers"])((function(){return e.submit&&e.submit.apply(e,arguments)}),["prevent"]))},[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[yr]})),_:1}),Object(i["createVNode"])(r,{class:"q-pt-none q-pb-sm row items-center"},{default:Object(i["withCtx"])((function(){return["icon"==e.avatar.type?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:0,icon:e.avatar.data,class:"q-mr-sm cursor-pointer",rounded:"",color:"grey-4","text-color":"dark",size:"56px"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Vr]})),_:1}),Object(i["createVNode"])(d,{"max-width":"200px",modelValue:e.showIconDialog,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.showIconDialog=t})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{onAttach:e.updateAvatar},null,8,["onAttach"])]})),_:1},8,["modelValue"])]})),_:1},8,["icon"])):(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:1,class:"q-mr-md cursor-pointer",rounded:"",color:"grey-4","text-color":"dark",size:"56px"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Cr]})),_:1}),Object(i["createVNode"])("img",{src:e.avatar.data},null,8,["src"]),Object(i["createVNode"])(d,{"max-width":"200px",modelValue:e.showIconDialog,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.showIconDialog=t})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{onAttach:e.updateAvatar},null,8,["onAttach"])]})),_:1},8,["modelValue"])]})),_:1})),Object(i["createVNode"])(b,{placeholder:"Untitled entry",outlined:"",autofocus:"",class:"col",modelValue:e.title,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.title=t})},null,8,["modelValue"])]})),_:1}),Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(j,{label:"In category...",outlined:"",dense:"",multiple:"",modelValue:e.category,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.category=t}),options:e.categories,"new-value-mode":"add-unique","option-label":"name","options-dense":"","option-value":"id","emit-value":"","map-options":"","use-chips":""},{"no-option":Object(i["withCtx"])((function(){return[Object(i["createVNode"])(m,{dense:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{class:"text-italic text-grey"},{default:Object(i["withCtx"])((function(){return[kr]})),_:1})]})),_:1})]})),after:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(O,{outline:"",icon:"add",color:"primary",class:"full-height",onClick:e.openManageCategories},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[xr]})),_:1})]})),_:1},8,["onClick"])]})),_:1},8,["modelValue","options"])]})),_:1}),Object(i["createVNode"])(f,{label:"Additional settings",dense:"",disable:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(j,{label:"From template...",modelValue:e.template,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.template=t}),outlined:"",dense:""},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(i["createVNode"])(h,{align:"right",class:"text-primary"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(O,{flat:"",label:"Create",type:"submit",disable:e.title.length<=0,loading:e.loading},{loading:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(v,{class:"on-left"})]})),_:1},8,["disable","loading"]),Object(i["createVNode"])(O,{flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])]})),_:1})],32)]})),_:1})]})),_:1},8,["onHide"])}var Nr=Object(i["createVNode"])("div",{class:"text-h6"},"Manage categories",-1),_r=Object(i["createTextVNode"])("Create a new category"),Br={class:"row q-gutter-sm no-wrap"},qr={key:1,class:"text-body1 text-grey"};function Sr(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-space"),l=Object(i["resolveComponent"])("q-tooltip"),u=Object(i["resolveComponent"])("q-btn"),d=Object(i["resolveComponent"])("q-card-section"),s=Object(i["resolveComponent"])("q-input"),b=Object(i["resolveComponent"])("q-color"),p=Object(i["resolveComponent"])("q-popup-proxy"),m=Object(i["resolveComponent"])("q-icon"),O=Object(i["resolveComponent"])("q-card"),j=Object(i["resolveComponent"])("q-expansion-item"),f=Object(i["resolveComponent"])("q-separator"),v=Object(i["resolveComponent"])("q-list"),h=Object(i["resolveComponent"])("q-card-actions"),g=Object(i["resolveComponent"])("q-dialog");return Object(i["openBlock"])(),Object(i["createBlock"])(g,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(O,{class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{class:"row align-items-center"},{default:Object(i["withCtx"])((function(){return[Nr,Object(i["createVNode"])(r),Object(i["createVNode"])(u,{icon:"add",color:"primary",flat:"",round:"",dense:"",onClick:e.addCategory},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[_r]})),_:1})]})),_:1},8,["onClick"])]})),_:1}),Object(i["createVNode"])(d,null,{default:Object(i["withCtx"])((function(){return[e.categories.length?(Object(i["openBlock"])(),Object(i["createBlock"])(v,{key:0,bordered:"",class:"rounded-borders",style:{overflow:"auto","max-height":"300px"}},{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.categories,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],{key:t.id},[Object(i["createVNode"])(j,{"expand-separator":"",label:t.name?t.name:"[ Untitled category ]",icon:"circle",caption:"0 entries","header-style":t.color?{color:t.color}:{},group:"categories"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(O,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{outlined:"",dense:"",label:"Name",modelValue:t.name,"onUpdate:modelValue":function(e){return t.name=e},class:"q-mb-sm",rules:[function(e){return!!e||"Please input a valid name"}],"hide-bottom-space":""},{after:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{style:{height:"100%"},icon:"delete_outline",outline:"",color:"red",onClick:function(t){return e.deleteCategory(n)}},null,8,["onClick"])]})),_:2},1032,["modelValue","onUpdate:modelValue","rules"]),Object(i["createVNode"])(s,{outlined:"",dense:"",modelValue:t.color,"onUpdate:modelValue":function(e){return t.color=e},label:"Color",class:"q-mb-sm"},{append:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(m,{name:"colorize",class:"cursor-pointer"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{"transition-show":"scale","transition-hide":"scale"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(b,{modelValue:t.color,"onUpdate:modelValue":function(e){return t.color=e}},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["modelValue","onUpdate:modelValue"]),Object(i["createVNode"])("div",Br,[Object(i["createVNode"])(s,{outlined:"",dense:"",disable:!0,modelValue:t.labelSingular,"onUpdate:modelValue":function(e){return t.labelSingular=e},label:"Singular label","stack-label":"",placeholder:e.pluralize.singular(t.name)},null,8,["modelValue","onUpdate:modelValue","placeholder"]),Object(i["createVNode"])(s,{outlined:"",dense:"",disable:!0,modelValue:t.labelPlural,"onUpdate:modelValue":function(e){return t.labelPlural=e},label:"Plural label",placeholder:e.namePluralized,"stack-label":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["label","header-style"]),n!=e.categories.length-1?(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:0})):Object(i["createCommentVNode"])("",!0)],64)})),128))]})),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])("div",qr," No categories indexed for this journal. "))]})),_:1}),Object(i["createVNode"])(h,{align:"right"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{color:"primary",flat:"",label:"Save changes",onClick:e.saveChanges},null,8,["onClick"]),Object(i["createVNode"])(u,{color:"primary",flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}var Tr=n("761a"),Dr=n.n(Tr),Ar=n("fd9b"),Qr=n.n(Ar),Ir={class:"text-h6"},Rr=Object(i["createTextVNode"])(" Are you sure you want to delete "),Er={class:"text-weight-bold"},Ur=Object(i["createTextVNode"])(" This action cannot be undone! "),Fr=Object(i["createVNode"])("br",null,null,-1),Lr=Object(i["createVNode"])("div",{class:"text-red q-mt-sm"}," All matching entries will lose this category. ",-1);function Pr(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-card-section"),l=Object(i["resolveComponent"])("q-btn"),u=Object(i["resolveComponent"])("q-card-actions"),d=Object(i["resolveComponent"])("q-card"),s=Object(i["resolveComponent"])("q-dialog");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",Ir,'Delete category "'+Object(i["toDisplayString"])(e.category)+'"',1)]})),_:1}),Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[Rr,Object(i["createVNode"])("span",Er,'"'+Object(i["toDisplayString"])(e.category)+'"?',1),Ur,Fr,Lr]})),_:1}),Object(i["createVNode"])(u,{align:"right"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{color:"primary",label:"Cancel",onClick:e.onCancelClick,flat:""},null,8,["onClick"]),Object(i["createVNode"])(l,{color:"red",label:"Delete",onClick:e.onOKClick,flat:""},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}var Jr=Object(i["defineComponent"])({name:"DeleteCategoryDialog",props:{category:{type:String,required:!0}},emits:Object(ze["a"])(Ze["a"].emits),setup:function(){var e=Object(Ze["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,o=e.onDialogCancel;return{dialogRef:t,onDialogHide:n,onOKClick:function(){a()},onCancelClick:o}}});Jr.render=Pr;var Hr=Jr;Ot()(Jr,"components",{QDialog:it["a"],QCard:ut["a"],QCardSection:vt["a"],QCardActions:dt["a"],QBtn:pt["a"]});var zr=Object(i["defineComponent"])({name:"ManageCategoriesDialog",props:{},emits:Object(ze["a"])(Ze["a"].emits),setup:function(){var e=Object(Ze["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,o=e.onDialogCancel,c=pe(),r=Object(f["a"])(),l=Object(i["ref"])(c.getters.currentJournal?Object(Qe["cloneDeep"])(c.getters.currentJournal.categories):[]),u=Object(i["computed"])((function(e){return l.value[e]?Dr()(l.value[e].name):""})),d=function(){l.value.unshift({name:"Untitled category",labelSingular:"",labelPlural:"",color:Qr()({luminosity:"dark"}),id:C.a.generate()})},s=function(e){var t=l.value[e];t&&r.dialog({component:Hr,componentProps:{category:t.name}}).onOk((function(){l.value.splice(e,1)}))},b=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.dispatch(K,{categories:Object(i["unref"])(l)});case 3:a(),e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),console.error(e.t0),r.notify({message:e.t0.message,type:"negative"});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return{dialogRef:t,onDialogHide:n,categories:l,addCategory:d,pluralize:Dr.a,deleteCategory:s,namePluralized:u,saveChanges:b,onCancelClick:o}}}),Mr=n("3b73");zr.render=Sr;var Kr=zr;Ot()(zr,"components",{QDialog:it["a"],QCard:ut["a"],QCardSection:vt["a"],QSpace:Bt["a"],QBtn:pt["a"],QTooltip:bt["a"],QList:qt["a"],QExpansionItem:Mr["a"],QInput:wt["a"],QIcon:xt["a"],QPopupProxy:La["a"],QColor:Pa["a"],QSeparator:yt["a"],QCardActions:dt["a"]});var Wr=Object(i["defineComponent"])({name:"CreateEntryDialog",components:{EntryIconDialog:Wc},emits:Object(ze["a"])(Ze["a"].emits),setup:function(){var e=Object(Ze["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,o=e.onDialogCancel,c=Object(f["a"])(),r=pe(),l=Object(v["f"])(),u=Object(v["e"])(),d=Object(i["ref"])(void 0),s={avatar:Object(i["ref"])({type:"icon",data:"subject"}),title:Object(i["ref"])(""),categories:Object(i["computed"])((function(){return r.state.currentJournal?r.state.journals[r.state.currentJournal].categories:[]})),category:Object(i["ref"])([]),template:Object(i["ref"])(""),loading:Object(i["ref"])(!1),showIconDialog:Object(i["ref"])(!1)},b=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.loading.value=!0,e.prev=1,"attachment"!=s.avatar.value.type){e.next=16;break}if(d.value){e.next=5;break}throw new Error("Avatar never uploaded");case 5:return t={title:s.title.value,avatar:{type:"attachment",data:"avatar"},category:s.category.value},e.next=8,r.dispatch(U,t);case 8:return n=e.sent,e.next=11,r.dispatch(H,{id:n.id,attachment:{name:"avatar",data:d.value}});case 11:return console.log(u.params.jid,n.id),e.next=14,l.push("/j/".concat(u.params.jid,"/e/").concat(n.id));case 14:e.next=22;break;case 16:return o={title:s.title.value,avatar:s.avatar.value,category:s.category.value},e.next=19,r.dispatch(U,o);case 19:return i=e.sent,e.next=22,l.push("/j/".concat(u.params.jid,"/e/").concat(i.id));case 22:a(),e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](1),c.notify({type:"negative",message:e.t0.message});case 28:return e.prev=28,s.loading.value=!1,e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[1,25,28,31]])})));return function(){return e.apply(this,arguments)}}(),p=function(e){if(s.showIconDialog.value=!1,"image"===e.type){var t=new FileReader;t.onload=function(){null!=t.result?s.avatar.value={type:"attachment",data:t.result}:c.notify({type:"negative",message:"Failed to load avatar"})},d.value=e.data,t.readAsDataURL(e.data)}else"icon"===e.type&&(d.value=void 0,s.avatar.value={type:"icon",data:e.data})},O=function(){c.dialog({component:Kr})};return Object(h["a"])(Object(h["a"])({dialogRef:t,onDialogHide:n},s),{},{submit:b,updateAvatar:p,onOKClick:function(){b(),a()},openManageCategories:O,onCancelClick:o})}}),Yr=n("8380");Wr.render=wr;var $r=Wr;Ot()(Wr,"components",{QDialog:it["a"],QCard:ut["a"],QCardSection:vt["a"],QAvatar:zt["a"],QTooltip:bt["a"],QPopupProxy:La["a"],QInput:wt["a"],QSelect:st["a"],QItem:St["a"],QItemSection:Tt["a"],QBtn:pt["a"],QExpansionItem:Mr["a"],QCardActions:dt["a"],QSpinnerDots:Yr["a"]});var Gr={class:"ellipsis"};function Zr(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-tooltip"),l=Object(i["resolveComponent"])("q-chip");return Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.categories,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(l,{style:{maxWidth:"175px",border:"1px solid "+t.color,backgroundColor:e.modelValue[t.id]?t.color:""},clickable:"",dense:e.categories.length>8,key:t.id,selected:e.modelValue[t.id],"onUpdate:selected":function(n){return e.updateValue(t.id,n)}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("div",Gr,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.name)+" ",1),Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.name),1)]})),_:2},1024)])]})),_:2},1032,["style","dense","selected","onUpdate:selected"])})),128)}var Xr=Object(i["defineComponent"])({name:"CategoryChips",emits:["update:modelValue"],props:{modelValue:{type:Object},categories:{type:Array,default:[]}},setup:function(e,t){var n=Object(f["a"])(),a=Object(i["computed"])((function(){return n.dark.isActive})),o=function(n,a){e.modelValue&&t.emit("update:modelValue",Object(h["a"])(Object(h["a"])({},Object.entries(e.modelValue).filter((function(e){return!!e[1]})).reduce((function(e,t){return Object(h["a"])(Object(h["a"])({},e),{},Object(g["a"])({},t[0],t[1]))}),{})),{},Object(g["a"])({},n,a)))};return{updateValue:o,darkActive:a}}}),el=n("b047");Xr.render=Zr;var tl=Xr;Ot()(Xr,"components",{QChip:el["a"],QTooltip:bt["a"]});var nl=Object(i["defineComponent"])({name:"JournalDrawer",components:{EntryLink:$n,CategoryChips:tl},setup:function(e){var t=Object(f["a"])(),n=pe(),a=Object(i["ref"])(""),o=Object(i["ref"])({}),c=Object(i["computed"])((function(){return n.state.entries[n.state.lastEntry]?n.state.lastEntry:void 0})),r=Object(i["computed"])((function(){return t.dark.isActive})),l=Object(i["computed"])((function(){return n.state.currentJournal?n.state.journals[n.state.currentJournal].categories:[]})),u=Object(i["computed"])((function(){return Object.entries(o.value).filter((function(e){return e[1]})).map((function(e){return e[0]}))})),d=Object(i["computed"])((function(){return Object.values(e.entries).filter((function(e){return!a.value||e.title.includes(a.value)})).filter((function(e){return!u.value.length||u.value.every((function(t){return e.category.includes(t)}))}))})),s=function(){t.dialog({component:$r})},b=function(){t.dialog({component:Kr})},p=function(e,t){return n.getters.entryAttachment(e,t)};return{openCreateEntry:s,getEntryAvatar:p,lastEntry:c,openCreateCategory:b,entrySearch:a,categories:l,filteredEntries:d,entryCategoryFilter:o,filteredCategories:u,darkActive:r}},props:{currentJournal:{type:String},entries:{type:Object,default:{}}}});nl.render=gr;var al=nl;Ot()(nl,"components",{QInput:wt["a"],QSeparator:yt["a"],QList:qt["a"],QItemLabel:In["a"],QBtn:pt["a"],QTooltip:bt["a"],QItem:St["a"],QItemSection:Tt["a"],QIcon:xt["a"],QImg:Ft["a"]});var ol=Object(i["defineComponent"])({name:"Dashboard",components:{JournalDrawer:al},setup:function(){var e=pe(),t=(Object(f["a"])(),Object(v["f"])()),n=Object(i["computed"])((function(){return e.getters.currentJournal})),a=Object(i["computed"])((function(){return e.state.currentJournal})),o=Object(i["computed"])((function(){return e.state.entries})),c=function(){var a=Object(m["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n.value){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,e.dispatch(E);case 4:return a.next=6,t.push("/");case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),r=function(){e.commit(ee,{darkMode:!e.state.userPrefs.darkMode})};return Object(v["c"])(Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch(E);case 2:case"end":return t.stop()}}),t)})))),{currentJournal:n,exitJournal:c,toggleDarkMode:r,entries:o,currentJournalID:a,AppVersion:yo}}}),cl=n("4d5a"),rl=n("e359"),ll=n("65c6"),il=n("6ac5"),ul=n("9404"),dl=n("09e3");ol.render=dr;var sl=ol;Ot()(ol,"components",{QLayout:cl["a"],QHeader:rl["a"],QToolbar:ll["a"],QBtn:pt["a"],QToolbarTitle:il["a"],QSpace:Bt["a"],QTooltip:bt["a"],QDrawer:ul["a"],QPageContainer:dl["a"]});var bl={class:"row items-center q-pt-md"},pl=Object(i["createVNode"])("div",{class:"col-none col-sm-1 col-md-3"},null,-1),ml={class:"col"},Ol=Object(i["createStaticVNode"])('<div class="row q-mb-md"><div class="col"><div class="text-h3"> ajourn </div><div class="text-caption text-italic q-mt-sm"> An offline world planner. </div></div><div class="col row items-end justify-end"><div> Made with  by <a href="https://github.com/milkdazombie" target="_blank" class="text-weight-bold text-primary" style="text-decoration:none;">@kinesivan</a></div></div></div>',1),jl={class:"row"},fl={class:"col"},vl={class:"col q-pr-md"},hl={key:0,class:"text-h6"},gl=Object(i["createTextVNode"])(" No journals available."),yl=Object(i["createVNode"])("br",null,null,-1),Vl=Object(i["createTextVNode"])(" Create a new journal "),Cl={key:2,class:"text-caption q-mt-sm"},kl={class:"col"},xl=Object(i["createVNode"])("div",{class:"col-none col-sm-1 col-md-3"},null,-1);function wl(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-btn"),l=Object(i["resolveComponent"])("q-avatar"),u=Object(i["resolveComponent"])("q-item-section"),d=Object(i["resolveComponent"])("q-item"),s=Object(i["resolveComponent"])("q-list"),b=Object(i["resolveComponent"])("change-log");return Object(i["openBlock"])(),Object(i["createBlock"])("div",bl,[pl,Object(i["createVNode"])("div",ml,[Ol,Object(i["createVNode"])("div",jl,[Object(i["createVNode"])("div",fl,[Object(i["createVNode"])("div",vl,[e.numJournals<=0?(Object(i["openBlock"])(),Object(i["createBlock"])("div",hl,[gl,yl,Object(i["createVNode"])(r,{outline:"","no-caps":"",class:"text-primary q-mt-sm",onClick:e.openCreateJournal},{default:Object(i["withCtx"])((function(){return[Vl]})),_:1},8,["onClick"])])):(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:1,dense:"",bordered:"",class:"rounded-borders",separator:""},{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.journals,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:t,clickable:"",to:"/j/"+t},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{avatar:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{icon:"bookmark_border"})]})),_:1}),e.title?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:0,class:"text-weight-medium"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.title),1)]})),_:2},1024)):(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:1,class:"text-italic text-grey"},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])("Unknown journal, ID: "+Object(i["toDisplayString"])(t)+") ",1)]})),_:2},1024))]})),_:2},1032,["to"])})),128))]})),_:1})),e.numJournals?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Cl," Loaded "+Object(i["toDisplayString"])(e.numJournals)+" journal"+Object(i["toDisplayString"])(e.numJournals>1?"s":"")+". ",1)):Object(i["createCommentVNode"])("",!0)])]),Object(i["createVNode"])("div",kl,[Object(i["createVNode"])(b)])])]),xl])}var Nl=Object(i["createTextVNode"])(" Warning: you are using an older version of ajourn. "),_l=Object(i["createVNode"])("br",null,null,-1);function Bl(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-banner"),l=Object(i["resolveComponent"])("vue3-markdown-it"),u=Object(i["resolveComponent"])("q-card-section"),d=Object(i["resolveComponent"])("q-card");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[void 0==e.latestVer||e.AppVersion==e.latestVer||e.fetchErr?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:0,dense:"",rounded:"",class:"bg-warning q-mb-sm"},{default:Object(i["withCtx"])((function(){return[Nl,_l,Object(i["createTextVNode"])("(current: "+Object(i["toDisplayString"])(e.AppVersion)+", latest: "+Object(i["toDisplayString"])(e.latestVer)+") ",1)]})),_:1})),Object(i["createVNode"])(d,{flat:"",bordered:""},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{class:"md-changelog",source:e.changes},null,8,["source"])]})),_:1})]})),_:1})],64)}n("1276");var ql=Object(i["defineComponent"])({name:"ChangeLog",component:{VueMarkdownIt:s["VueMarkdownIt"]},setup:function(){var e=Object(i["ref"])(""),t=Object(i["ref"])(),n=Object(i["ref"])(void 0),a=function(){var a=Object(m["a"])(regeneratorRuntime.mark((function a(){var o,c,r,l,i,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,o=new Headers,a.next=4,fetch("".concat(Vo,"?cache-bust=").concat(Math.random()),{method:"GET",cache:"no-store",headers:o});case 4:return a.next=6,a.sent.text();case 6:if(c=a.sent,r=c.split("\n").filter((function(e){return e.startsWith("## ")})),!r[0]){a.next=16;break}if(l=r[0].match(/\d+.\d+.\d+/m),!l||!l[0]){a.next=14;break}n.value=l[0],a.next=15;break;case 14:throw new Error("Failed to retrieve latest version");case 15:r[1]?(i=c.indexOf(r[0]),u=c.indexOf(r[1]),e.value=c.slice(i,u)):e.value=c;case 16:a.next=21;break;case 18:a.prev=18,a.t0=a["catch"](0),t.value=a.t0.message;case 21:case"end":return a.stop()}}),a,null,[[0,18]])})));return function(){return a.apply(this,arguments)}}();return Object(i["onMounted"])((function(){a()})),{changes:e,latestVer:n,AppVersion:yo}}}),Sl=(n("53d5"),n("54e1"));ql.render=Bl;var Tl=ql;Ot()(ql,"components",{QBanner:Sl["a"],QCard:ut["a"],QCardSection:vt["a"]});var Dl=Object(i["createVNode"])("div",{class:"text-h6"},"Create a new journal",-1),Al={class:"column"},Ql=Object(i["createVNode"])("small",{class:"text-grey"}," Log in to enable online sync. ",-1);function Il(e,t,n,a,o,c){var r=Object(i["resolveComponent"])("q-card-section"),l=Object(i["resolveComponent"])("q-input"),u=Object(i["resolveComponent"])("q-checkbox"),d=Object(i["resolveComponent"])("q-btn"),s=Object(i["resolveComponent"])("q-card-actions"),b=Object(i["resolveComponent"])("q-form"),p=Object(i["resolveComponent"])("q-card"),m=Object(i["resolveComponent"])("q-dialog");return Object(i["openBlock"])(),Object(i["createBlock"])(m,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{class:"q-dialog-plugin"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(b,{onSubmit:Object(i["withModifiers"])(e.submit,["prevent"])},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(r,null,{default:Object(i["withCtx"])((function(){return[Dl]})),_:1}),Object(i["createVNode"])(r,{class:"q-py-none"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{outlined:"",autofocus:"",placeholder:"Title",modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.title=t}),rules:[function(e){return e.length>=0||"Title is required"}]},null,8,["modelValue","rules"]),Object(i["createVNode"])("div",Al,[Object(i["createVNode"])(u,{label:"Sync online",modelValue:e.createOnline,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.createOnline=t}),disable:""},null,8,["modelValue"]),Ql])]})),_:1}),Object(i["createVNode"])(s,{align:"right",class:"text-primary"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{flat:"",label:"Cancel",type:"button",onClick:e.onCancelClick},null,8,["onClick"]),Object(i["createVNode"])(d,{flat:"",label:"Create",type:"submit",loading:e.loading,disable:e.title.length<=0},null,8,["loading","disable"])]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1},8,["onHide"])}var Rl=Object(i["defineComponent"])({name:"CreateJournalDialog",emits:Object(ze["a"])(Ze["a"].emits),setup:function(){var e=Object(Ze["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,o=e.onDialogCancel,c=Object(f["a"])(),r=pe(),l=Object(v["f"])(),u=Object(i["ref"])(""),d=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.dispatch(Q,{title:u.value});case 3:return t=e.sent,e.next=6,r.dispatch(I,t);case 6:return e.next=8,l.push("/j/".concat(t));case 8:a(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),c.notify(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return{dialogRef:t,onDialogHide:n,createOnline:Object(i["ref"])(!1),title:u,loading:Object(i["ref"])(!1),submit:d,onOKClick:function(){d(),a()},onCancelClick:o}}});Rl.render=Il;var El=Rl;Ot()(Rl,"components",{QDialog:it["a"],QCard:ut["a"],QForm:tr["a"],QCardSection:vt["a"],QInput:wt["a"],QCheckbox:Fa["a"],QCardActions:dt["a"],QBtn:pt["a"]});var Ul=Object(i["defineComponent"])({name:"Landing",components:{ChangeLog:Tl},setup:function(){var e=pe(),t=Object(f["a"])(),n=Object(i["computed"])((function(){return e.state.journals})),a=Object(i["computed"])((function(){return Object.keys(e.state.journals).length}));return Object(i["onBeforeMount"])(Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch(A);case 2:case"end":return t.stop()}}),t)})))),{journals:n,numJournals:a,openCreateJournal:function(){t.dialog({component:El})}}}});Ul.render=wl;var Fl=Ul;Ot()(Ul,"components",{QBtn:pt["a"],QList:qt["a"],QItem:St["a"],QItemSection:Tt["a"],QAvatar:zt["a"]});var Ll=[{path:"/",name:"Landing",component:Fl},{path:"/j/:jid",name:"Dashboard",component:sl,children:[{path:"e/:eid",name:"Entry",components:{default:sl,view:rr},beforeEnter:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.dispatch(L,{id:t.params.eid});case 3:a(),e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),he["a"].create({message:e.t0.message,type:"negative"}),a("/j/".concat(t.params.jid));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t,n,a){return e.apply(this,arguments)}return t}()}],beforeEnter:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ye["a"].show({message:"Loading journal...",spinner:Ve["a"]}),e.prev=1,e.next=4,me.dispatch(A);case 4:return e.next=6,me.dispatch(I,t.params.jid);case 6:a(),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),he["a"].create({message:e.t0.message,type:"negative"}),a("/");case 13:return e.prev=13,ye["a"].hide(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));function t(t,n,a){return e.apply(this,arguments)}return t}()}],Pl=Object(v["a"])({history:Object(v["b"])("/ajourn//#"),routes:Ll}),Jl=Pl;window.screenfull=l.a;var Hl=Object(i["createApp"])(je).use(fe).use(c["a"],ge).use(me,se).use(Jl).use(b.a).use(d.a,{listenTo:"input"});Hl.mount("#app")},ef68:function(e,t,n){},f02d:function(e,t,n){"use strict";n("1990")},f55b:function(e,t,n){"use strict";n("8594")},f712:function(e,t,n){}});
//# sourceMappingURL=app.591ffcfb.js.map