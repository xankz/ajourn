(function(e){function t(t){for(var a,l,o=t[0],i=t[1],u=t[2],s=0,b=[];s<o.length;s++)l=o[s],Object.prototype.hasOwnProperty.call(c,l)&&c[l]&&b.push(c[l][0]),c[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(b.length)b.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==c[i]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},c={app:0},r=[];function l(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-2d0c9189":"4312ce11","chunk-2d0cf391":"1c4b4848","chunk-2d0da8f3":"f59eb4b6","chunk-2d22523a":"c0744dc4"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=c[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=c[e]=[t,a]}));t.push(n[2]=a);var r,i=document.createElement("script");i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.src=l(e);var u=new Error;r=function(t){i.onerror=i.onload=null,clearTimeout(s);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",u.name="ChunkLoadError",u.type=a,u.request=r,n[1](u)}c[e]=void 0}};var s=setTimeout((function(){r({type:"timeout",target:i})}),12e4);i.onerror=i.onload=r,document.head.appendChild(i)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/ajourn/",o.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var d=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"02f7":function(e,t,n){var a={"./eva-icons.js":"ae42","./fontawesome-v5-pro.js":"9f2c","./fontawesome-v5.js":"b0a2","./ionicons-v4.js":"01e2","./line-awesome.js":"5129","./material-icons-outlined.js":"f894","./material-icons-round.js":"ce94","./material-icons-sharp.js":"4459","./material-icons.js":"8c07","./mdi-v3.js":"f00f","./mdi-v4.js":"cbeb","./mdi-v5.js":"595a","./svg-material-icons.js":"78b6","./svg-mdi-v5.js":"557a","./themify.js":"fc09"};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=r,e.exports=c,c.id="02f7"},"0e21":function(e,t,n){},"0e27":function(e,t,n){},1:function(e,t){},2:function(e,t){},"203b":function(e,t,n){var a={"./ar.js":"5b8b","./bg.js":"c9d2","./ca.js":"8151","./cs.js":"d6d8","./da.js":"8fc3","./de.js":"2d68","./el.js":"0945","./en-gb.js":"932d","./en-us.js":"3b69","./eo.js":"6321","./es.js":"5815","./fa-ir.js":"e9c4","./fi.js":"122a","./fr.js":"0857","./gn.js":"21d7","./he.js":"ea35","./hr.js":"6e23","./hu.js":"5f15","./id.js":"a7b6","./it.js":"6186","./ja.js":"148e","./km.js":"16a5","./ko-kr.js":"81e9","./lu.js":"8508","./lv.js":"0b80","./ml.js":"6d60","./ms.js":"77e7","./nb-no.js":"0edf","./nl.js":"3f3c","./pl.js":"d080","./pt-br.js":"4f99","./pt.js":"589a","./ro.js":"9e37","./ru.js":"27cd","./sk.js":"c8b6","./sl.js":"fb8d","./sr.js":"3d7c","./sv.js":"f9e5","./ta.js":"194c","./th.js":"3d56","./tr.js":"90c8","./uk.js":"ff58","./vi.js":"593a","./zh-hans.js":"bbca","./zh-hant.js":"74ef"};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=r,e.exports=c,c.id="203b"},"20a9":function(e,t,n){"use strict";n("f712")},3:function(e,t){},"45de":function(e,t,n){"use strict";n("c9a3")},"633f":function(e,t,n){"use strict";n("e0c3")},"697f":function(e,t,n){"use strict";n("8aab")},"8aab":function(e,t,n){},"8e0b":function(e,t,n){"use strict";n("0e27")},c9a3:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("9483");Object(a["a"])("".concat("/ajourn/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("6cc5"),n("2f74");var c=n("e11e"),r=(n("b9f6"),n("93bf")),l=n.n(r),o=n("b05d"),i=n("7a23"),u=n("d1d6"),s=n.n(u),d=(n("d3b7"),n("ddb0"),Object(i["k"])("Toggle dark mode"));function b(e,t,n,a,c,r){var l=Object(i["L"])("q-btn"),o=Object(i["L"])("q-toolbar-title"),u=Object(i["L"])("q-space"),s=Object(i["L"])("q-tooltip"),b=Object(i["L"])("q-toolbar"),j=Object(i["L"])("q-header"),O=Object(i["L"])("journal-drawer"),m=Object(i["L"])("q-drawer"),f=Object(i["L"])("router-view"),p=Object(i["L"])("q-page-container"),h=Object(i["L"])("q-layout");return Object(i["C"])(),Object(i["h"])(h,{view:"hHh lpR fFf"},{default:Object(i["X"])((function(){return[e.currentJournal?(Object(i["C"])(),Object(i["h"])(j,{key:0,elevated:"",class:"bg-primary text-white"},{default:Object(i["X"])((function(){return[Object(i["l"])(b,null,{default:Object(i["X"])((function(){return[Object(i["l"])(l,{icon:"home",flat:"",round:"",onClick:e.exitJournal},null,8,["onClick"]),Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.currentJournal.title),1)]})),_:1}),Object(i["l"])(u),Object(i["l"])(l,{icon:"dark_mode",round:"",flat:"",onClick:e.toggleDarkMode},{default:Object(i["X"])((function(){return[Object(i["l"])(s,null,{default:Object(i["X"])((function(){return[d]})),_:1})]})),_:1},8,["onClick"])]})),_:1})]})),_:1})):Object(i["i"])("",!0),e.currentJournal?(Object(i["C"])(),Object(i["h"])(m,{key:1,side:"left",bordered:"",padding:"","show-if-above":""},{default:Object(i["X"])((function(){return[Object(i["l"])(O,{currentJournal:e.currentJournalID,entries:e.entries},null,8,["currentJournal","entries"])]})),_:1})):Object(i["i"])("",!0),Object(i["l"])(p,null,{default:Object(i["X"])((function(){return[Object(i["l"])(f)]})),_:1})]})),_:1})}n("96cf");var j=n("1da1"),O=n("a78e"),m=n.n(O),f=n("b3fe"),p=n("6c02"),h=Object(i["k"])("Last viewed entry"),v=Object(i["k"])(" Categories "),g=Object(i["k"])("Clear category filter"),y=Object(i["k"])("Manage categories"),k=Object(i["k"])("There are no categories in this journal."),C=Object(i["k"])(" Entries "),x=Object(i["k"])("Create a new entry"),w=Object(i["k"])(" Untitled entry "),_=Object(i["k"])("There are no entries in this journal.");function V(e,t,n,a,c,r){var l=Object(i["L"])("q-input"),o=Object(i["L"])("q-separator"),u=Object(i["L"])("q-item-label"),s=Object(i["L"])("entry-link"),d=Object(i["L"])("q-tooltip"),b=Object(i["L"])("q-btn"),j=Object(i["L"])("category-chips"),O=Object(i["L"])("q-item"),m=Object(i["L"])("q-icon"),f=Object(i["L"])("q-img"),p=Object(i["L"])("q-item-section"),V=Object(i["L"])("q-list");return Object(i["C"])(),Object(i["h"])(i["a"],null,[Object(i["l"])(l,{standout:"bg-primary text-white",class:"q-px-md q-mt-lg",label:"Search",modelValue:e.entrySearch,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.entrySearch=t}),dense:"",clearable:""},null,8,["modelValue"]),Object(i["l"])(o,{class:"q-mt-md"}),Object(i["l"])(V,{padding:""},{default:Object(i["X"])((function(){return[e.lastEntry?(Object(i["C"])(),Object(i["h"])(i["a"],{key:0},[Object(i["l"])(u,{header:""},{default:Object(i["X"])((function(){return[h]})),_:1}),Object(i["l"])(s,{entryId:e.lastEntry,item:""},null,8,["entryId"]),Object(i["l"])(o,{class:"q-mt-md q-mb-sm"})],64)):Object(i["i"])("",!0),Object(i["l"])(u,{header:"",class:"row justify-between items-center full-width q-pb-md"},{default:Object(i["X"])((function(){return[v,Object(i["l"])("div",null,[e.filteredCategories.length?(Object(i["C"])(),Object(i["h"])(b,{key:0,round:"",icon:"clear","text-color":"red",class:"q-mr-sm",size:"sm",onClick:t[2]||(t[2]=function(t){return e.entryCategoryFilter={}})},{default:Object(i["X"])((function(){return[Object(i["l"])(d,null,{default:Object(i["X"])((function(){return[g]})),_:1})]})),_:1})):Object(i["i"])("",!0),Object(i["l"])(b,{round:"",icon:"settings",class:"self-end",size:"sm",onClick:e.openCreateCategory},{default:Object(i["X"])((function(){return[Object(i["l"])(d,null,{default:Object(i["X"])((function(){return[y]})),_:1})]})),_:1},8,["onClick"])])]})),_:1}),e.categories.length?(Object(i["C"])(),Object(i["h"])(O,{key:1,class:"q-pt-none q-mb-sm",style:{"flex-wrap":"wrap"}},{default:Object(i["X"])((function(){return[Object(i["l"])(j,{categories:e.categories,modelValue:e.entryCategoryFilter,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.entryCategoryFilter=t})},null,8,["categories","modelValue"])]})),_:1})):(Object(i["C"])(),Object(i["h"])(O,{key:2,class:"text-grey"},{default:Object(i["X"])((function(){return[k]})),_:1})),Object(i["l"])(o),Object(i["l"])(u,{header:"",class:"row justify-between items-center full-width q-mt-sm"},{default:Object(i["X"])((function(){return[C,Object(i["l"])(b,{round:"",icon:"add","text-color":"primary",class:"self-end",size:"sm",onClick:e.openCreateEntry},{default:Object(i["X"])((function(){return[Object(i["l"])(d,null,{default:Object(i["X"])((function(){return[x]})),_:1})]})),_:1},8,["onClick"])]})),_:1}),e.filteredEntries.length?(Object(i["C"])(!0),Object(i["h"])(i["a"],{key:3},Object(i["J"])(e.filteredEntries,(function(t){return Object(i["C"])(),Object(i["h"])(O,{key:t.id,to:"/j/"+e.currentJournal+"/e/"+t.id},{default:Object(i["X"])((function(){return[Object(i["l"])(p,{avatar:""},{default:Object(i["X"])((function(){return["icon"==t.avatar.type?(Object(i["C"])(),Object(i["h"])(m,{key:0,name:t.avatar.data,color:"primary"},null,8,["name"])):(Object(i["C"])(),Object(i["h"])(f,{key:1,ratio:"1",src:e.getEntryAvatar(t.id,t.avatar.data),class:"rounded-borders"},null,8,["src"]))]})),_:2},1024),t.title?(Object(i["C"])(),Object(i["h"])(p,{key:0},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(t.title),1)]})),_:2},1024)):(Object(i["C"])(),Object(i["h"])(p,{key:1,class:"text-grey text-italic"},{default:Object(i["X"])((function(){return[w]})),_:1}))]})),_:2},1032,["to"])})),128)):0==e.filteredEntries.length&&e.entrySearch?(Object(i["C"])(),Object(i["h"])(O,{key:4},{default:Object(i["X"])((function(){return[Object(i["l"])(u,{caption:""},{default:Object(i["X"])((function(){return[Object(i["k"])('No results for "'+Object(i["Q"])(e.entrySearch)+'".',1)]})),_:1})]})),_:1})):Object(i["i"])("",!0),e.entries.length<=0?(Object(i["C"])(),Object(i["h"])(O,{key:5},{default:Object(i["X"])((function(){return[Object(i["l"])(u,{caption:""},{default:Object(i["X"])((function(){return[_]})),_:1})]})),_:1})):Object(i["i"])("",!0)]})),_:1})],64)}n("4de4"),n("caad"),n("d81d"),n("4fad"),n("07ac"),n("2532");var q=Object(i["l"])("div",{class:"text-h6"},"Create a new entry",-1),L=Object(i["k"])("Change entry avatar"),Q=Object(i["k"])("Change entry avatar"),A=Object(i["k"])(" No categories "),X=Object(i["k"])("Create a new category");function S(e,t,n,a,c,r){var l=Object(i["L"])("q-card-section"),o=Object(i["L"])("q-tooltip"),u=Object(i["L"])("entry-icon-dialog"),s=Object(i["L"])("q-popup-proxy"),d=Object(i["L"])("q-avatar"),b=Object(i["L"])("q-input"),j=Object(i["L"])("q-item-section"),O=Object(i["L"])("q-item"),m=Object(i["L"])("q-btn"),f=Object(i["L"])("q-select"),p=Object(i["L"])("q-expansion-item"),h=Object(i["L"])("q-spinner-dots"),v=Object(i["L"])("q-card-actions"),g=Object(i["L"])("q-card"),y=Object(i["L"])("q-dialog");return Object(i["C"])(),Object(i["h"])(y,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["X"])((function(){return[Object(i["l"])(g,{class:"q-dialog-plugin"},{default:Object(i["X"])((function(){return[Object(i["l"])("form",{onSubmit:t[6]||(t[6]=Object(i["Z"])((function(){return e.submit&&e.submit.apply(e,arguments)}),["prevent"]))},[Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[q]})),_:1}),Object(i["l"])(l,{class:"q-pt-none row items-center"},{default:Object(i["X"])((function(){return["icon"==e.avatar.type?(Object(i["C"])(),Object(i["h"])(d,{key:0,icon:e.avatar.data,class:"q-mr-md cursor-pointer",rounded:"",color:"grey-4","text-color":"dark",size:"56px"},{default:Object(i["X"])((function(){return[Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[L]})),_:1}),Object(i["l"])(s,{"max-width":"200px",modelValue:e.showIconDialog,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.showIconDialog=t})},{default:Object(i["X"])((function(){return[Object(i["l"])(u,{onAttach:e.updateAvatar},null,8,["onAttach"])]})),_:1},8,["modelValue"])]})),_:1},8,["icon"])):(Object(i["C"])(),Object(i["h"])(d,{key:1,class:"q-mr-md cursor-pointer",rounded:"",color:"grey-4","text-color":"dark",size:"56px"},{default:Object(i["X"])((function(){return[Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[Q]})),_:1}),Object(i["l"])("img",{src:e.avatar.data},null,8,["src"]),Object(i["l"])(s,{"max-width":"200px",modelValue:e.showIconDialog,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.showIconDialog=t})},{default:Object(i["X"])((function(){return[Object(i["l"])(u,{onAttach:e.updateAvatar},null,8,["onAttach"])]})),_:1},8,["modelValue"])]})),_:1})),Object(i["l"])(b,{placeholder:"Untitled entry",outlined:"",autofocus:"",class:"col",modelValue:e.title,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.title=t})},null,8,["modelValue"])]})),_:1}),Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[Object(i["l"])(f,{label:"In category...",outlined:"",dense:"",multiple:"",modelValue:e.category,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.category=t}),options:e.categories,"new-value-mode":"add-unique","option-label":"name","options-dense":"","option-value":"id","emit-value":"","map-options":"","use-chips":""},{"no-option":Object(i["X"])((function(){return[Object(i["l"])(O,{dense:""},{default:Object(i["X"])((function(){return[Object(i["l"])(j,{class:"text-italic text-grey"},{default:Object(i["X"])((function(){return[A]})),_:1})]})),_:1})]})),after:Object(i["X"])((function(){return[Object(i["l"])(m,{outline:"",icon:"add",color:"primary",class:"full-height",onClick:e.openManageCategories},{default:Object(i["X"])((function(){return[Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[X]})),_:1})]})),_:1},8,["onClick"])]})),_:1},8,["modelValue","options"])]})),_:1}),Object(i["l"])(p,{label:"Additional settings",dense:""},{default:Object(i["X"])((function(){return[Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[Object(i["l"])(f,{label:"From template...",modelValue:e.template,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.template=t}),outlined:"",dense:""},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(i["l"])(v,{align:"right",class:"text-primary"},{default:Object(i["X"])((function(){return[Object(i["l"])(m,{flat:"",label:"Create",type:"submit",disable:e.title.length<=0,loading:e.loading},{loading:Object(i["X"])((function(){return[Object(i["l"])(h,{class:"on-left"})]})),_:1},8,["disable","loading"]),Object(i["l"])(m,{flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])]})),_:1})],32)]})),_:1})]})),_:1},8,["onHide"])}n("99af");var I=n("5530"),T=n("2909"),E=n("b27b"),R=Object(i["k"])("Images only. 512x512 recommended.");function D(e,t,n,a,c,r){var l=Object(i["L"])("q-tab"),o=Object(i["L"])("q-tabs"),u=Object(i["L"])("q-separator"),s=Object(i["L"])("q-item-label"),d=Object(i["L"])("q-icon"),b=Object(i["L"])("q-item"),j=Object(i["L"])("q-list"),O=Object(i["L"])("q-tab-panel"),m=Object(i["L"])("q-file"),f=Object(i["L"])("q-btn"),p=Object(i["L"])("q-tab-panels");return Object(i["C"])(),Object(i["h"])(i["a"],null,[Object(i["l"])(o,{class:"text-primary",modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tab=t}),dense:""},{default:Object(i["X"])((function(){return[Object(i["l"])(l,{label:"Icon",name:"icon"}),e.useAttachments?Object(i["i"])("",!0):(Object(i["C"])(),Object(i["h"])(l,{key:0,label:"Image",name:"image"})),e.useAttachments?(Object(i["C"])(),Object(i["h"])(l,{key:1,label:"Attachment",name:"attachment"})):Object(i["i"])("",!0)]})),_:1},8,["modelValue"]),Object(i["l"])(u),Object(i["l"])(p,{modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.tab=t}),animated:""},{default:Object(i["X"])((function(){return[Object(i["l"])(O,{name:"icon",class:"text-dark"},{default:Object(i["X"])((function(){return[Object(i["l"])(j,{style:{maxHeight:"150px"}},{default:Object(i["X"])((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.iconGroups,(function(t){return Object(i["C"])(),Object(i["h"])(b,{class:"column q-pa-none",key:t},{default:Object(i["X"])((function(){return[Object(i["l"])(s,{caption:""},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(t.category),1)]})),_:2},1024),Object(i["l"])(s,{class:"full-width row q-my-xs"},{default:Object(i["X"])((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(t.icons,(function(t){return Object(i["C"])(),Object(i["h"])(d,{name:t,key:t,class:"q-pa-xs cursor-pointer",size:"16px",onClick:function(n){return e.attachIcon(t)}},null,8,["name","onClick"])})),128))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1}),e.useAttachments?Object(i["i"])("",!0):(Object(i["C"])(),Object(i["h"])(O,{key:0,name:"image"},{default:Object(i["X"])((function(){return[Object(i["l"])(m,{"bottom-slots":"",accept:"image/*",class:"full-width",placeholder:"Choose one image...",modelValue:e.selectedImage,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectedImage=t})},{hint:Object(i["X"])((function(){return[R]})),_:1},8,["modelValue"]),Object(i["l"])(f,{color:"primary",label:"Attach",class:"full-width q-mt-lg",size:"sm",onClick:e.attachImage},null,8,["onClick"])]})),_:1})),e.useAttachments?(Object(i["C"])(),Object(i["h"])(O,{key:1,name:"attachment",class:"text-dark"},{default:Object(i["X"])((function(){return[Object(i["l"])(f,{outline:"",dense:"",label:"Select an attachment",color:"primary",onClick:e.selectAttachment},null,8,["onClick"])]})),_:1})):Object(i["i"])("",!0)]})),_:1},8,["modelValue"])],64)}var U={class:"text-h6"},F=Object(i["k"])(" Select attachment "),H={key:0},J=Object(i["k"])("Create a new attachment"),P={class:"text-body q-pl-md text-grey"};function N(e,t,n,a,c,r){var l=Object(i["L"])("q-space"),o=Object(i["L"])("q-tooltip"),u=Object(i["L"])("q-btn"),s=Object(i["L"])("q-card-section"),d=Object(i["L"])("q-icon"),b=Object(i["L"])("q-item-section"),j=Object(i["L"])("q-badge"),O=Object(i["L"])("q-item"),m=Object(i["L"])("q-list"),f=Object(i["L"])("q-card-actions"),p=Object(i["L"])("q-card"),h=Object(i["L"])("q-dialog"),v=Object(i["M"])("ripple");return Object(i["C"])(),Object(i["h"])(h,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["X"])((function(){return[Object(i["l"])(p,{class:"q-dialog-plugin"},{default:Object(i["X"])((function(){return[Object(i["l"])(s,{class:"row align-items-center"},{default:Object(i["X"])((function(){return[Object(i["l"])("div",U,[F,e.selected.length?(Object(i["C"])(),Object(i["h"])("span",H,"("+Object(i["Q"])(e.selected.length)+")",1)):Object(i["i"])("",!0)]),Object(i["l"])(l),Object(i["l"])(u,{icon:"add",color:"primary",flat:"",round:"",dense:""},{default:Object(i["X"])((function(){return[Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[J]})),_:1})]})),_:1})]})),_:1}),Object(i["l"])(m,{bordered:"",separator:"",dense:"",style:{"max-height":"150px",overflow:"auto"}},{default:Object(i["X"])((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.entry.attachments,(function(t,n){return Object(i["Y"])((Object(i["C"])(),Object(i["h"])(O,{clickable:"",key:n,onClick:function(t){return e.setSelected(n)},active:e.selected==n},{default:Object(i["X"])((function(){return[Object(i["l"])(b,{avatar:"",class:"q-pr-none",style:{"min-width":"0",width:"28px"}},{default:Object(i["X"])((function(){return[Object(i["l"])(d,{name:e.getAttachmentIcon(t.content_type),size:"20px"},null,8,["name"])]})),_:2},1024),Object(i["l"])(b,null,{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(n),1)]})),_:2},1024),Object(i["l"])(b,{side:""},{default:Object(i["X"])((function(){return[Object(i["l"])(j,{outline:"",color:"grey"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.getExtension(t.content_type)||"?"),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["onClick","active"])),[[v]])})),128))]})),_:1}),Object(i["l"])(f,{align:"right"},{default:Object(i["X"])((function(){return[Object(i["l"])("div",P,Object(i["Q"])(e.filteredAttachmentsLen)+" attachment"+Object(i["Q"])(1==e.filteredAttachmentsLen?"":"s"),1),Object(i["l"])(l),Object(i["l"])(u,{color:"primary",flat:"",disable:!e.selected.length,label:"Select",onClick:e.onOKClick},null,8,["disable","onClick"]),Object(i["l"])(u,{color:"primary",flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}n("b64b");var z,B,M,K=n("cc1d"),W=(n("fb6a"),n("ac1f"),n("3ca3"),n("466d"),n("2ca0"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("2b3d"),"API_FETCH_JOURNALS"),Y="API_CREATE_JOURNAL",$="API_OPEN_JOURNAL",Z="API_FETCH_JOURNAL",G="API_CLOSE_JOURNAL",ee="API_CREATE_ENTRY",te="API_FETCH_ENTRIES",ne="API_FETCH_ENTRY",ae="API_UPDATE_ENTRY",ce="API_DELETE_ENTRY",re="API_ADD_ENTRY_ATTACHMENT",le="API_DELETE_ENTRY_ATTACHMENT",oe="API_SET_LAST_ENTRY",ie="API_UPDATE_JOURNAL",ue="SET_JOURNAL",se="SET_JOURNALS",de="SET_ENTRIES",be="SET_ENTRY",je="UI_VISIBILITY",Oe="SET_CURRENT_JOURNAL",me="SET_LAST_ENTRY",fe="0";(function(e){e[e["Text"]=0]="Text",e[e["Description"]=1]="Description",e[e["Number"]=2]="Number",e[e["Toggle"]=3]="Toggle",e[e["Progress"]=4]="Progress",e[e["Attachments"]=5]="Attachments",e[e["Map"]=6]="Map",e[e["Reference"]=7]="Reference",e[e["Embed"]=8]="Embed"})(z||(z={})),function(e){e["Entry"]="entry",e["Category"]="category"}(B||(B={})),function(e){e[e["Invalid"]=-1]="Invalid",e[e["Unknown"]=0]="Unknown",e[e["YouTube"]=1]="YouTube",e[e["Spotify"]=2]="Spotify",e[e["Soundcloud"]=3]="Soundcloud"}(M||(M={}));var pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!e.match(t)},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!e.match(/^(https?:\/\/)?(www\.)?(soundcloud\.com|snd\.sc)\/.*$/)},ve=function(e){try{new URL(e)}catch(t){return M.Invalid}return pe(e)?M.YouTube:he(e)?M.Soundcloud:M.Unknown},ge=function(e,t){return"data:"+e+";base64,"+t},ye=function(e){return e.startsWith("text/")?"description":e.startsWith("image/")?"insert_photo":e.startsWith("audio/")?"headset":e.startsWith("video/")?"movie":"insert_drive_file"},ke=function(e){return atob(e)},Ce=function(e,t,n){t=t||"",n=n||512;for(var a=atob(e),c=[],r=0;r<a.length;r+=n){for(var l=a.slice(r,r+n),o=new Array(l.length),i=0;i<l.length;i++)o[i]=l.charCodeAt(i);var u=new Uint8Array(o);c.push(u)}var s=new Blob(c,{type:t});return s},xe=Object(i["m"])({props:{entry:{type:Object,required:!0},multiple:{type:Boolean,default:!1}},emits:Object(T["a"])(E["a"].emits),setup:function(e){var t=Object(E["a"])(),n=t.dialogRef,a=t.onDialogHide,c=t.onDialogOK,r=t.onDialogCancel,l=Object(i["H"])([]),o=Object(i["f"])((function(){return e.entry.attachments})),u=Object(i["f"])((function(){return Object.keys(o.value).length})),s=function(t){l.value.includes(t)?l.value=l.value.filter((function(e){return e!==t})):e.multiple?l.value.push(t):l.value=[t]};return{dialogRef:n,onDialogHide:a,getAttachmentIcon:ye,getExtension:K["extension"],selected:l,filteredAttachments:o,filteredAttachmentsLen:u,setSelected:s,onOKClick:function(){l.value&&c(e.multiple?l.value:l.value[0])},onCancelClick:r}}}),we=n("24e8"),_e=n("f09f"),Ve=n("a370"),qe=n("2c91"),Le=n("9c40"),Qe=n("05c0"),Ae=n("1c1c"),Xe=n("66e5"),Se=n("4074"),Ie=n("0016"),Te=n("58a8"),Ee=n("4b7e"),Re=n("714f"),De=n("93dc"),Ue=n.n(De);xe.render=N;var Fe=xe;Ue()(xe,"components",{QDialog:we["a"],QCard:_e["a"],QCardSection:Ve["a"],QSpace:qe["a"],QBtn:Le["a"],QTooltip:Qe["a"],QList:Ae["a"],QItem:Xe["a"],QItemSection:Se["a"],QIcon:Ie["a"],QBadge:Te["a"],QCardActions:Ee["a"]}),Ue()(xe,"directives",{Ripple:Re["a"]});var He=Object(i["m"])({name:"EntryIconDialog",props:{useAttachments:{type:Boolean,default:!1},entry:{type:Object}},emits:["attach"],methods:{attachImage:function(){this.selectedImage&&this.$emit("attach",{type:"image",data:this.selectedImage})},attachIcon:function(e){this.$emit("attach",{type:"icon",data:e})},selectAttachment:function(){var e=this;this.$q.dialog({component:Fe,componentProps:{entry:this.entry}}).onOk((function(t){e.$emit("attach",{type:"attachment",data:t})}))}},data:function(){return{selectedImage:void 0,tab:"icon",iconGroups:[{category:"Standard",icons:["subject","person","map"]},{category:"Figures",icons:["person","group","groups","directions_run","elderly","emoji_people","self_improvement","record_voice_over","manage_accounts","accessible","sentiment_very_satisfied","sentiment_satisfied","sentiment_neutral","sentiment_dissatisfied","sentiment_very_dissatisfied","mood_bad"]},{category:"Locations",icons:["home","apartment","corporate_fare","fence","holiday_village","foundation","festival","store_mall_directory","storefront","terrain","map","park","place","attractions","home_work","public"]},{category:"Miscellaneous",icons:["radio_button_checked","radio_button_unchecked","trip_origin","lens","adjust","device_hub","bubble_chart","error","stars","build_circle"]}]}}}),Je=n("429b"),Pe=n("7460"),Ne=n("eb85"),ze=n("adad"),Be=n("823b"),Me=n("0170"),Ke=n("7d53");He.render=D;var We=He;Ue()(He,"components",{QTabs:Je["a"],QTab:Pe["a"],QSeparator:Ne["a"],QTabPanels:ze["a"],QTabPanel:Be["a"],QList:Ae["a"],QItem:Xe["a"],QItemLabel:Me["a"],QIcon:Ie["a"],QFile:Ke["a"],QBtn:Le["a"]});n("a4d3"),n("e01a"),n("7db0"),n("13d5"),n("b0c0"),n("5319");var Ye,$e,Ze=n("ade3"),Ge=n("82fd"),et=n.n(Ge),tt=n("5502"),nt=n("16b2"),at=n("8dfe"),ct=n.n(at),rt=n("9918"),lt=n.n(rt);function ot(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return new nt["a"](e);try{var n=new nt["a"](e,{skip_setup:!0});return n}catch(a){throw console.log(a),new Error("Database does not exist")}}ct()(nt["a"]),nt["a"].plugin(lt.a);var it=Symbol(),ut=[["title"],["type"],["category"]];function st(){return Object(tt["c"])(it)}var dt=Object(tt["b"])({state:{fetchingJournals:!1,fetchingEntries:!1,currentJournal:void 0,showUi:!1,entries:{},lastEntry:"",journals:{}},mutations:(Ye={},Object(Ze["a"])(Ye,me,(function(e,t){e.lastEntry=t})),Object(Ze["a"])(Ye,se,(function(e,t){e.journals=t})),Object(Ze["a"])(Ye,ue,(function(e,t){e.journals[t.id]=t.journal})),Object(Ze["a"])(Ye,je,(function(e,t){e.showUi=t})),Object(Ze["a"])(Ye,Oe,(function(e,t){e.currentJournal=t})),Object(Ze["a"])(Ye,de,(function(e,t){e.currentJournal&&(e.entries=t)})),Object(Ze["a"])(Ye,be,(function(e,t){e.entries[t.id]=t.entry})),Ye),getters:{currentJournal:function(e){return e.currentJournal?e.journals[e.currentJournal]:void 0},entryAttachment:function(e){return function(t,n){if(t in e.entries&&n in e.entries[t].attachments)return ge(e.entries[t].attachments[n].content_type,e.entries[t].attachments[n].data)}},entryAttachmentFull:function(e){return function(t,n){if(t in e.entries&&n in e.entries[t].attachments)return e.entries[t].attachments[n]}}},actions:($e={},Object(Ze["a"])($e,oe,(function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,m.a.set("lastEntry",t),a(me,t);case 3:case"end":return n.stop()}}),n)})))()})),Object(Ze["a"])($e,le,(function(e,t){var n=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var c,r,l,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(c=e.state,r=e.dispatch,n.state.currentJournal){a.next=3;break}throw new Error("Journal not opened");case 3:return a.prev=3,l=ot("aj_".concat(c.currentJournal)),a.next=7,l.get(t.id);case 7:return o=a.sent,a.next=10,l.removeAttachment(t.id,t.name,o._rev);case 10:return a.next=12,l.close();case 12:return a.next=14,r(ne,{id:t.id,force:!0});case 14:a.next=19;break;case 16:throw a.prev=16,a.t0=a["catch"](3),new Error(a.t0.message);case 19:case"end":return a.stop()}}),a,null,[[3,16]])})))()})),Object(Ze["a"])($e,re,(function(e,t){var n=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var c,r,l,o,i,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(c=e.state,r=e.dispatch,n.state.currentJournal){a.next=3;break}throw new Error("Journal not opened");case 3:return a.prev=3,l=ot("aj_".concat(c.currentJournal)),a.next=7,l.get(t.id);case 7:return o=a.sent,i="text/plain",t.attachment.data instanceof File&&(u=K["extension"](t.attachment.data.name)||"text/plain",i=t.attachment.data.type||u),a.next=12,l.putAttachment(t.id,t.attachment.name,o._rev,new Blob([t.attachment.data],{type:i}),i);case 12:return a.next=14,l.close();case 14:return a.next=16,r(ne,{id:t.id,force:!0});case 16:a.next=21;break;case 18:throw a.prev=18,a.t0=a["catch"](3),new Error(a.t0.message);case 21:case"end":return a.stop()}}),a,null,[[3,18]])})))()})),Object(Ze["a"])($e,ce,(function(e,t){var n=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var c,r,l,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(c=e.state,r=e.dispatch,n.state.currentJournal){a.next=3;break}throw new Error("Journal not opened");case 3:return a.prev=3,l=ot("aj_".concat(c.currentJournal)),a.next=7,l.get(t);case 7:return o=a.sent,a.next=10,l.remove(o._id,o._rev);case 10:return a.next=12,l.close();case 12:a.next=17;break;case 14:throw a.prev=14,a.t0=a["catch"](3),new Error(a.t0.message);case 17:return a.next=19,r(te);case 19:case"end":return a.stop()}}),a,null,[[3,14]])})))()})),Object(Ze["a"])($e,ae,(function(e,t){var n=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var c,r,l,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(c=e.state,r=e.dispatch,n.state.currentJournal){a.next=3;break}throw new Error("Journal not opened.");case 3:return a.prev=3,l=ot("aj_".concat(c.currentJournal)),a.next=7,l.get(t.id);case 7:return o=a.sent,o=Object(I["a"])(Object(I["a"])({},o),t.data),Object.prototype.hasOwnProperty.call(o,"attachments")&&delete o["attachments"],a.next=12,l.put(o);case 12:return a.next=14,l.close();case 14:a.next=19;break;case 16:throw a.prev=16,a.t0=a["catch"](3),new Error(a.t0.message);case 19:return a.next=21,r(te);case 21:case"end":return a.stop()}}),a,null,[[3,16]])})))()})),Object(Ze["a"])($e,W,(function(e){return Object(j["a"])(regeneratorRuntime.mark((function t(){var n,a,c,r,l,o,i,u,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,a=e.state,c=e.dispatch,a.fetchingJournals=!0,t.next=4,nt["a"].allDbs();case 4:r=t.sent.filter((function(e){return e.startsWith("aj_")})),l={},o=0;case 7:if(!(o<r.length)){t.next=28;break}return i=ot(r[o]),t.prev=9,t.next=12,i.get(fe);case 12:u=t.sent,s=r[o].replace("aj_",""),l[s]=u,t.next=20;break;case 17:return t.prev=17,t.t0=t["catch"](9),t.abrupt("continue",25);case 20:return t.prev=20,t.next=23,i.close();case 23:return a.fetchingJournals=!1,t.finish(20);case 25:o++,t.next=7;break;case 28:if(n(se,l),!a.fetchingJournalsOpen){t.next=33;break}return t.next=32,c($,a.fetchingJournalsOpen);case 32:a.fetchingJournalsOpen="";case 33:case"end":return t.stop()}}),t,null,[[9,17,20,25]])})))()})),Object(Ze["a"])($e,Z,(function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function n(){var a,c,r,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,c=e.commit,!a.journals[t]){n.next=3;break}return n.abrupt("return",a.journals[t]);case 3:return r=new nt["a"](t,{skip_setup:!0}),n.prev=4,n.next=7,r.get(fe);case 7:return l=n.sent,c(ue,{id:t,journal:l}),n.abrupt("return",l);case 12:throw n.prev=12,n.t0=n["catch"](4),new Error("Journal does not exist");case 15:return n.prev=15,n.next=18,r.close();case 18:return n.finish(15);case 19:case"end":return n.stop()}}),n,null,[[4,12,15,19]])})))()})),Object(Ze["a"])($e,G,(function(e){return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.state,n=e.commit,n(Oe,""),n(de,{});case 3:case"end":return t.stop()}}),t)})))()})),Object(Ze["a"])($e,ie,(function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function n(){var a,c,r,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,c=e.commit,a.currentJournal){n.next=3;break}throw new Error("Journal not opened.");case 3:return r=ot("aj_".concat(a.currentJournal)),n.prev=4,n.next=7,r.get(fe);case 7:return l=n.sent,l=Object(I["a"])(Object(I["a"])({},l),t),n.next=11,r.put(l);case 11:c(ue,{id:a.currentJournal,journal:l}),n.next=17;break;case 14:throw n.prev=14,n.t0=n["catch"](4),new Error(n.t0.message);case 17:return n.prev=17,n.next=20,r.close();case 20:return n.finish(17);case 21:case"end":return n.stop()}}),n,null,[[4,14,17,21]])})))()})),Object(Ze["a"])($e,$,(function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function n(){var a,c,r,l,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.dispatch,c=e.commit,r=e.state,!r.fetchingJournals){n.next=4;break}return r.fetchingJournalsOpen=t,n.abrupt("return");case 4:l=ot("aj_".concat(t)),n.prev=5,o=0;case 7:if(!(o<ut.length)){n.next=13;break}return n.next=10,l.createIndex({index:{fields:ut[o]}});case 10:o++,n.next=7;break;case 13:n.next=18;break;case 15:throw n.prev=15,n.t0=n["catch"](5),new Error(n.t0.message);case 18:return n.prev=18,n.next=21,l.close();case 21:return n.finish(18);case 22:return c(Oe,t),n.next=25,a(te);case 25:case"end":return n.stop()}}),n,null,[[5,15,18,22]])})))()})),Object(Ze["a"])($e,ee,(function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function n(){var a,c,r,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,c=e.dispatch,a.currentJournal){n.next=3;break}throw new Error("Journal not opened.");case 3:return r=ot("aj_".concat(a.currentJournal)),l=et.a.generate(),n.next=7,r.put(Object(I["a"])(Object(I["a"])({_id:l},t),{},{type:B.Entry,fields:[]}));case 7:return n.next=9,r.close();case 9:return n.next=11,c(te);case 11:return n.next=13,c(ne,{id:l});case 13:return n.abrupt("return",n.sent);case 14:case"end":return n.stop()}}),n)})))()})),Object(Ze["a"])($e,ne,(function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function n(){var a,c,r,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,e.dispatch,c=e.commit,a.currentJournal||a.fetchingEntries){n.next=3;break}throw new Error("Journal not opened.");case 3:if(!a.entries[t.id]||!Object.prototype.hasOwnProperty.call(a.entries[t.id],"attachments")||t.force){n.next=5;break}return n.abrupt("return",a.entries[t.id]);case 5:return r=ot("aj_".concat(a.currentJournal)),n.prev=6,n.next=9,r.get(t.id,{attachments:!0});case 9:return l=n.sent,l=Object(I["a"])(Object(I["a"])({},l),{},{attachments:l._attachments?l._attachments:{},id:l._id}),l._attachments&&delete l._attachments,c(be,{id:l._id,entry:l}),n.abrupt("return",l);case 16:throw n.prev=16,n.t0=n["catch"](6),new Error("Entry does not exist.");case 19:return n.prev=19,n.next=22,r.close();case 22:return n.finish(19);case 23:case"end":return n.stop()}}),n,null,[[6,16,19,23]])})))()})),Object(Ze["a"])($e,te,(function(e){var t=arguments;return Object(j["a"])(regeneratorRuntime.mark((function n(){var a,c,r,l,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,c=e.commit,r=t.length>1&&void 0!==t[1]?t[1]:{save:!0,category:"",flush:!0},a.currentJournal){n.next=4;break}throw new Error("Journal not opened.");case 4:return l=ot("aj_".concat(a.currentJournal)),a.fetchingEntries=!0,n.prev=6,n.next=9,l.find({selector:{type:B.Entry,category:r.category?{$elemMatch:{$eq:r.category}}:void 0},fields:["_id","title","avatar","category","type","fields","_attachments"]});case 9:return o=n.sent,i=o.docs.map((function(e){return{id:e._id,title:e.title,avatar:e.avatar,category:e.category,type:e.type,fields:e.fields,attachments:e._attachments?e._attachments:{}}})),r.save&&(i=r.flush?i:Object(I["a"])(Object(I["a"])({},a.entries),i),c(de,i.reduce((function(e,t){return Object(I["a"])(Object(Ze["a"])({},t.id,t),e)}),{}))),n.abrupt("return",i);case 15:throw n.prev=15,n.t0=n["catch"](6),new Error(n.t0.message);case 18:return n.prev=18,n.next=21,l.close();case 21:return a.fetchingEntries=!1,n.finish(18);case 23:case"end":return n.stop()}}),n,null,[[6,15,18,23]])})))()})),Object(Ze["a"])($e,Y,(function(e,t){var n=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var c,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.state,c=et.a.generate(),r=ot("aj_".concat(c),!1),a.next=5,r.put({_id:fe,title:t.title,description:"".concat(t.title,"... What a strange place."),categories:[]});case 5:return a.next=7,r.close();case 7:return a.next=9,n.dispatch(W);case 9:return a.abrupt("return",c);case 10:case"end":return a.stop()}}),a)})))()})),$e),modules:{},plugins:[Object(tt["a"])()]}),bt=Object(i["l"])("div",{class:"text-h6"},"Manage categories",-1),jt=Object(i["k"])("Create a new category"),Ot={class:"row q-gutter-sm no-wrap"},mt={key:1,class:"text-body1 text-grey"};function ft(e,t,n,a,c,r){var l=Object(i["L"])("q-space"),o=Object(i["L"])("q-tooltip"),u=Object(i["L"])("q-btn"),s=Object(i["L"])("q-card-section"),d=Object(i["L"])("q-input"),b=Object(i["L"])("q-color"),j=Object(i["L"])("q-popup-proxy"),O=Object(i["L"])("q-icon"),m=Object(i["L"])("q-card"),f=Object(i["L"])("q-expansion-item"),p=Object(i["L"])("q-separator"),h=Object(i["L"])("q-list"),v=Object(i["L"])("q-card-actions"),g=Object(i["L"])("q-dialog");return Object(i["C"])(),Object(i["h"])(g,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:Object(i["X"])((function(){return[Object(i["l"])(m,{class:"q-dialog-plugin"},{default:Object(i["X"])((function(){return[Object(i["l"])(s,{class:"row align-items-center"},{default:Object(i["X"])((function(){return[bt,Object(i["l"])(l),Object(i["l"])(u,{icon:"add",color:"primary",flat:"",round:"",dense:"",onClick:e.addCategory},{default:Object(i["X"])((function(){return[Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[jt]})),_:1})]})),_:1},8,["onClick"])]})),_:1}),Object(i["l"])(s,null,{default:Object(i["X"])((function(){return[e.categories.length?(Object(i["C"])(),Object(i["h"])(h,{key:0,bordered:"",class:"rounded-borders",style:{overflow:"auto","max-height":"300px"}},{default:Object(i["X"])((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.categories,(function(t,n){return Object(i["C"])(),Object(i["h"])(i["a"],{key:t.id},[Object(i["l"])(f,{"expand-separator":"",label:t.name?t.name:"[ Untitled category ]",icon:"circle",caption:"0 entries","header-style":t.color?{color:t.color}:{},group:"categories"},{default:Object(i["X"])((function(){return[Object(i["l"])(m,null,{default:Object(i["X"])((function(){return[Object(i["l"])(s,null,{default:Object(i["X"])((function(){return[Object(i["l"])(d,{outlined:"",dense:"",label:"Name",modelValue:t.name,"onUpdate:modelValue":function(e){return t.name=e},class:"q-mb-sm",rules:[function(e){return!!e||"Please input a valid name"}],"hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue","rules"]),Object(i["l"])(d,{outlined:"",dense:"",modelValue:t.color,"onUpdate:modelValue":function(e){return t.color=e},label:"Color",class:"q-mb-sm"},{append:Object(i["X"])((function(){return[Object(i["l"])(O,{name:"colorize",class:"cursor-pointer"},{default:Object(i["X"])((function(){return[Object(i["l"])(j,{"transition-show":"scale","transition-hide":"scale"},{default:Object(i["X"])((function(){return[Object(i["l"])(b,{modelValue:t.color,"onUpdate:modelValue":function(e){return t.color=e}},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["modelValue","onUpdate:modelValue"]),Object(i["l"])("div",Ot,[Object(i["l"])(d,{outlined:"",dense:"",modelValue:t.labelSingular,"onUpdate:modelValue":function(e){return t.labelSingular=e},label:"Singular label","stack-label":"",placeholder:e.pluralize.singular(t.name)},null,8,["modelValue","onUpdate:modelValue","placeholder"]),Object(i["l"])(d,{outlined:"",dense:"",modelValue:t.labelPlural,"onUpdate:modelValue":function(e){return t.labelPlural=e},label:"Plural label",placeholder:e.namePluralized,"stack-label":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["label","header-style"]),n!=e.categories.length-1?(Object(i["C"])(),Object(i["h"])(p,{key:0})):Object(i["i"])("",!0)],64)})),128))]})),_:1})):(Object(i["C"])(),Object(i["h"])("div",mt," No categories indexed for this journal. "))]})),_:1}),Object(i["l"])(v,{align:"right"},{default:Object(i["X"])((function(){return[Object(i["l"])(u,{color:"primary",flat:"",label:"Save changes",onClick:e.saveChanges},null,8,["onClick"]),Object(i["l"])(u,{color:"primary",flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}var pt=n("2ef0"),ht=n("761a"),vt=n.n(ht),gt=n("fd9b"),yt=n.n(gt),kt=Object(i["m"])({name:"ManageCategoriesDialog",props:{},emits:Object(T["a"])(E["a"].emits),setup:function(){var e=Object(E["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,c=e.onDialogCancel,r=st(),l=Object(f["a"])(),o=Object(i["H"])(r.getters.currentJournal?Object(pt["cloneDeep"])(r.getters.currentJournal.categories):[]),u=Object(i["f"])((function(e){return o.value[e]?vt()(o.value[e].name):""})),s=function(){o.value.push({name:"Untitled category",labelSingular:"",labelPlural:"",color:yt()({luminosity:"dark"}),id:et.a.generate()})},d=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.dispatch(ie,{categories:Object(i["T"])(o)});case 3:a(),e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),console.error(e.t0),l.notify({message:e.t0.message,type:"negative"});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return{dialogRef:t,onDialogHide:n,categories:o,addCategory:s,pluralize:vt.a,namePluralized:u,saveChanges:d,onCancelClick:c}}}),Ct=n("3b73"),xt=n("27f9"),wt=n("7cbe"),_t=n("b498");kt.render=ft;var Vt=kt;Ue()(kt,"components",{QDialog:we["a"],QCard:_e["a"],QCardSection:Ve["a"],QSpace:qe["a"],QBtn:Le["a"],QTooltip:Qe["a"],QList:Ae["a"],QExpansionItem:Ct["a"],QInput:xt["a"],QIcon:Ie["a"],QPopupProxy:wt["a"],QColor:_t["a"],QSeparator:Ne["a"],QCardActions:Ee["a"]});var qt=Object(i["m"])({name:"CreateEntryDialog",components:{EntryIconDialog:We},emits:Object(T["a"])(E["a"].emits),setup:function(){var e=Object(E["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,c=e.onDialogCancel,r=Object(f["a"])(),l=st(),o=Object(p["e"])(),u=Object(p["d"])(),s=Object(i["H"])(void 0),d={avatar:Object(i["H"])({type:"icon",data:"subject"}),title:Object(i["H"])(""),categories:Object(i["f"])((function(){return l.state.currentJournal?l.state.journals[l.state.currentJournal].categories:[]})),category:Object(i["H"])([]),template:Object(i["H"])(""),loading:Object(i["H"])(!1),showIconDialog:Object(i["H"])(!1)},b=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.loading.value=!0,e.prev=1,"attachment"!=d.avatar.value.type){e.next=16;break}if(s.value){e.next=5;break}throw new Error("Avatar never uploaded");case 5:return t={title:d.title.value,avatar:{type:"attachment",data:"avatar"},category:d.category.value},e.next=8,l.dispatch(ee,t);case 8:return n=e.sent,e.next=11,l.dispatch(re,{id:n.id,attachment:{name:"avatar",data:s.value}});case 11:return console.log(u.params.jid,n.id),e.next=14,o.push("/j/".concat(u.params.jid,"/e/").concat(n.id));case 14:e.next=22;break;case 16:return c={title:d.title.value,avatar:d.avatar.value,category:d.category.value},e.next=19,l.dispatch(ee,c);case 19:return i=e.sent,e.next=22,o.push("/j/".concat(u.params.jid,"/e/").concat(i.id));case 22:a(),e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](1),r.notify({type:"negative",message:e.t0.message});case 28:return e.prev=28,d.loading.value=!1,e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[1,25,28,31]])})));return function(){return e.apply(this,arguments)}}(),O=function(e){if(d.showIconDialog.value=!1,"image"===e.type){var t=new FileReader;t.onload=function(){null!=t.result?d.avatar.value={type:"attachment",data:t.result}:r.notify({type:"negative",message:"Failed to load avatar"})},s.value=e.data,t.readAsDataURL(e.data)}else"icon"===e.type&&(s.value=void 0,d.avatar.value={type:"icon",data:e.data})},m=function(){r.dialog({component:Vt})};return Object(I["a"])(Object(I["a"])({dialogRef:t,onDialogHide:n},d),{},{submit:b,updateAvatar:O,onOKClick:function(){b(),a()},openManageCategories:m,onCancelClick:c})}}),Lt=n("cb32"),Qt=n("ddd8"),At=n("8380");qt.render=S;var Xt=qt;Ue()(qt,"components",{QDialog:we["a"],QCard:_e["a"],QCardSection:Ve["a"],QAvatar:Lt["a"],QTooltip:Qe["a"],QPopupProxy:wt["a"],QInput:xt["a"],QSelect:Qt["a"],QItem:Xe["a"],QItemSection:Se["a"],QBtn:Le["a"],QExpansionItem:Ct["a"],QCardActions:Ee["a"],QSpinnerDots:At["a"]});var St={class:"ellipsis"};function It(e,t,n,a,c,r){var l=Object(i["L"])("q-tooltip"),o=Object(i["L"])("q-chip");return Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.categories,(function(t){return Object(i["C"])(),Object(i["h"])(o,{style:{"max-width":"175px"},clickable:"",key:t.id,selected:e.modelValue[t.id],"onUpdate:selected":function(n){return e.updateValue(t.id,n)}},{default:Object(i["X"])((function(){return[Object(i["l"])("div",St,[Object(i["k"])(Object(i["Q"])(t.name)+" ",1),Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(t.name),1)]})),_:2},1024)])]})),_:2},1032,["selected","onUpdate:selected"])})),128)}var Tt=Object(i["m"])({name:"CategoryChips",emits:["update:modelValue"],props:{modelValue:{type:Object},categories:{type:Array,default:[]}},setup:function(e,t){var n=function(n,a){e.modelValue&&t.emit("update:modelValue",Object(I["a"])(Object(I["a"])({},Object.entries(e.modelValue).filter((function(e){return!!e[1]})).reduce((function(e,t){return Object(I["a"])(Object(I["a"])({},e),{},Object(Ze["a"])({},t[0],t[1]))}),{})),{},Object(Ze["a"])({},n,a)))};return{updateValue:n}}}),Et=n("b047");Tt.render=It;var Rt=Tt;Ue()(Tt,"components",{QChip:Et["a"],QTooltip:Qe["a"]});var Dt=Object(i["k"])(" Untitled entry "),Ut={key:1},Ft={class:"row"},Ht={class:"col-auto q-mr-md"},Jt={class:"col"},Pt={class:"text-h6",style:{"line-height":"1.2em"}},Nt=Object(i["k"])(" View entry "),zt={key:2,class:"text-subtitle2 q-mb-xs text-negative"};function Bt(e,t,n,a,c,r){var l=Object(i["L"])("q-avatar"),o=Object(i["L"])("q-item-section"),u=Object(i["L"])("q-item"),s=Object(i["L"])("router-link");return e.item&&e.entry&&e.currentJournal?(Object(i["C"])(),Object(i["h"])(u,{key:0,to:"/j/"+e.currentJournal+"/e/"+e.entry.id},{default:Object(i["X"])((function(){return[Object(i["l"])(o,{avatar:""},{default:Object(i["X"])((function(){return["attachment"===e.entryAvatar.type?(Object(i["C"])(),Object(i["h"])(l,{key:0,rounded:"",size:e.avatarSize},{default:Object(i["X"])((function(){return[Object(i["l"])("img",{src:e.entryAvatar.data},null,8,["src"])]})),_:1},8,["size"])):(Object(i["C"])(),Object(i["h"])(l,{key:1,"text-color":"primary",rounded:"",icon:e.entryAvatar.data,size:e.avatarSize},null,8,["icon","size"]))]})),_:1}),e.entry.title?(Object(i["C"])(),Object(i["h"])(o,{key:0},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.entry.title),1)]})),_:1})):(Object(i["C"])(),Object(i["h"])(o,{key:1,class:"text-grey text-italic"},{default:Object(i["X"])((function(){return[Dt]})),_:1}))]})),_:1},8,["to"])):e.entry&&e.currentJournal?(Object(i["C"])(),Object(i["h"])("div",Ut,[Object(i["l"])("div",Ft,[Object(i["l"])("div",Ht,["attachment"===e.entryAvatar.type?(Object(i["C"])(),Object(i["h"])(l,{key:0,rounded:"",size:e.avatarSize},{default:Object(i["X"])((function(){return[Object(i["l"])("img",{src:e.entryAvatar.data},null,8,["src"])]})),_:1},8,["size"])):(Object(i["C"])(),Object(i["h"])(l,{key:1,"text-color":"primary",rounded:"",icon:e.entryAvatar.data,size:e.avatarSize},null,8,["icon","size"]))]),Object(i["l"])("div",Jt,[Object(i["l"])("div",Pt,Object(i["Q"])(e.entry.title),1),e.showLink?(Object(i["C"])(),Object(i["h"])(s,{key:0,to:"/j/"+e.currentJournal+"/e/"+e.entryId,style:{"text-decoration":"none"},class:"text-subtitle2"},{default:Object(i["X"])((function(){return[Nt]})),_:1},8,["to"])):Object(i["i"])("",!0)])])])):(Object(i["C"])(),Object(i["h"])("div",zt,"Error loading link!"))}var Mt=Object(i["m"])({name:"EntryLink",props:{entryId:{type:String,required:!0},showLink:{type:Boolean,default:!0},item:{type:Boolean,default:!1},avatarSize:{type:String}},setup:function(e){var t=st(),n=Object(i["f"])((function(){return t.state.entries[e.entryId]})),a=Object(i["f"])((function(){if(n.value)return{data:"attachment"===n.value.avatar.type?t.getters.entryAttachment(n.value.id,n.value.avatar.data):n.value.avatar.data,type:n.value.avatar.type}})),c=Object(i["f"])((function(){return t.state.currentJournal}));return{entry:n,entryAvatar:a,currentJournal:c}}});Mt.render=Bt;var Kt=Mt;Ue()(Mt,"components",{QItem:Xe["a"],QItemSection:Se["a"],QAvatar:Lt["a"]});var Wt=Object(i["m"])({name:"JournalDrawer",components:{EntryLink:Kt,CategoryChips:Rt},setup:function(e){var t=Object(f["a"])(),n=st(),a=Object(i["H"])(""),c=Object(i["H"])({}),r=Object(i["f"])((function(){return n.state.entries[n.state.lastEntry]?n.state.lastEntry:void 0})),l=Object(i["f"])((function(){return n.state.currentJournal?n.state.journals[n.state.currentJournal].categories:[]})),o=Object(i["f"])((function(){return Object.entries(c.value).filter((function(e){return e[1]})).map((function(e){return e[0]}))})),u=Object(i["f"])((function(){return Object.values(e.entries).filter((function(e){return!a.value||e.title.includes(a.value)})).filter((function(e){return!o.value.length||o.value.every((function(t){return e.category.includes(t)}))}))})),s=function(){t.dialog({component:Xt})},d=function(){t.dialog({component:Vt})},b=function(e,t){return n.getters.entryAttachment(e,t)};return{openCreateEntry:s,getEntryAvatar:b,lastEntry:r,openCreateCategory:d,entrySearch:a,categories:l,filteredEntries:u,entryCategoryFilter:c,filteredCategories:o}},props:{currentJournal:{type:String},entries:{type:Object,default:{}}}}),Yt=n("068f");Wt.render=V;var $t=Wt;Ue()(Wt,"components",{QInput:xt["a"],QSeparator:Ne["a"],QList:Ae["a"],QItemLabel:Me["a"],QBtn:Le["a"],QTooltip:Qe["a"],QItem:Xe["a"],QItemSection:Se["a"],QIcon:Ie["a"],QImg:Yt["a"]});var Zt=Object(i["m"])({name:"LayoutDefault",components:{JournalDrawer:$t},setup:function(){var e=st(),t=Object(f["a"])(),n=Object(p["e"])();Object(i["z"])(Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=m.a.get("lastEntry"),n&&e.state.entries[n]&&e.commit(me,n);case 2:case"end":return t.stop()}}),t)}))));var a=function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.state.currentJournal){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.dispatch(G);case 4:return t.next=6,n.push("/");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{currentJournalID:Object(i["f"])((function(){return e.state.currentJournal})),currentJournal:Object(i["f"])((function(){return e.getters.currentJournal})),showToolbar:Object(i["f"])((function(){return e.state.showUi})),showDrawer:Object(i["f"])((function(){return e.state.showUi})),entries:Object(i["f"])((function(){return e.state.entries})),exitJournal:a,toggleUi:function(){e.commit(je,!e.state.showUi)},toggleDarkMode:t.dark.toggle}}}),Gt=n("4d5a"),en=n("e359"),tn=n("65c6"),nn=n("6ac5"),an=n("9404"),cn=n("09e3");Zt.render=b;var rn=Zt;Ue()(Zt,"components",{QLayout:Gt["a"],QHeader:en["a"],QToolbar:tn["a"],QBtn:Le["a"],QToolbarTitle:nn["a"],QSpace:qe["a"],QTooltip:Qe["a"],QDrawer:an["a"],QPageContainer:cn["a"]});var ln={install:function(e){0}},on=(n("0e21"),n("e54f"),n("573e"),n("f7f0")),un=n("436b"),sn=n("2a19"),dn={config:{notify:{position:"bottom-right",timeout:3e3}},plugins:{Dialog:un["a"],Notify:sn["a"],QMediaPlayer:on["a"]}},bn=n("f508"),jn=n("981c"),On=Object(i["ab"])("data-v-0ecb68b3");Object(i["F"])("data-v-0ecb68b3");var mn={class:"row"},fn={class:"absolute row",style:{top:"0",left:"16px",transform:"translateY(-50%)",width:"calc(100% - 32px)"}},pn={class:"col q-mr-md"},hn={key:0,class:"ellipsis",style:{padding:"4px 0"}},vn={class:"ellipsis"},gn={class:"col-auto"},yn=Object(i["k"])("Attachments"),kn=Object(i["k"])("Info"),Cn=Object(i["k"])("Delete"),xn=Object(i["k"])(" No fields for this entry. ");Object(i["D"])();var wn=On((function(e,t,n,a,c,r){var l=Object(i["L"])("q-icon"),o=Object(i["L"])("q-avatar"),u=Object(i["L"])("q-img"),s=Object(i["L"])("q-item-section"),d=Object(i["L"])("q-item"),b=Object(i["L"])("q-separator"),j=Object(i["L"])("q-badge"),O=Object(i["L"])("q-item-label"),m=Object(i["L"])("q-list"),f=Object(i["L"])("q-btn-dropdown"),p=Object(i["L"])("q-card-section"),h=Object(i["L"])("q-card"),v=Object(i["M"])("close-popup");return Object(i["C"])(),Object(i["h"])("div",mn,[Object(i["l"])(h,{class:"col col-md-5"},{default:On((function(){return[Object(i["l"])(d,{class:"q-my-sm"},{default:On((function(){return[e.entry?(Object(i["C"])(),Object(i["h"])(s,{key:0,avatar:""},{default:On((function(){return["icon"==e.entry.avatar.type?(Object(i["C"])(),Object(i["h"])(o,{key:0,size:"64px",rounded:""},{default:On((function(){return[Object(i["l"])(l,{name:e.entry.avatar.data,color:"primary"},null,8,["name"])]})),_:1})):(Object(i["C"])(),Object(i["h"])(u,{key:1,src:e.entryAvatar,ratio:1,style:{width:"64px",height:"64px"},class:"rounded-borders cursor-pointer",loading:"lazy",onClick:e.previewAvatar},null,8,["src","onClick"]))]})),_:1})):Object(i["i"])("",!0),e.entry?(Object(i["C"])(),Object(i["h"])(s,{key:1},{default:On((function(){return[Object(i["l"])("div",{class:"text-h5",style:{lineHeight:"1.25em"}},Object(i["Q"])(e.entry.title),5)]})),_:1})):Object(i["i"])("",!0)]})),_:1}),Object(i["l"])(b),Object(i["l"])(p,{class:"q-pt-sm q-px-none q-pb-none"},{default:On((function(){return[Object(i["l"])("div",fn,[Object(i["l"])("div",pn,[e.categories.length?(Object(i["C"])(),Object(i["h"])("div",hn,[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.categories,(function(t){return Object(i["C"])(),Object(i["h"])(j,{ref:"categoryBadgeRef",class:"text-weight-bold shadow-2 q-mr-sm",style:[{backgroundColor:t.color,color:e.getCategoryTextColor(t.color),borderColor:e.getCategoryBorderColor(t.color)},{padding:"6px 8px","font-size":"12px","border-width":"1px","border-style":"solid","max-width":"200px"}],key:t.id},{default:On((function(){return[Object(i["l"])("div",vn,Object(i["Q"])(t.name),1)]})),_:2},1032,["style"])})),128))])):Object(i["i"])("",!0)]),Object(i["l"])("div",gn,[Object(i["l"])(f,{size:"10px",class:"edit self-end",color:"white","text-color":"dark",split:"",label:"Edit",onClick:e.editEntry,style:{margin:"4px 0"}},{default:On((function(){return[Object(i["l"])(m,{dense:""},{default:On((function(){return[Object(i["Y"])(Object(i["l"])(d,{clickable:"",onClick:e.viewAttachments},{default:On((function(){return[Object(i["l"])(s,{avatar:"",style:{"min-width":"0"}},{default:On((function(){return[Object(i["l"])(l,{name:"perm_media",size:"16px"})]})),_:1}),Object(i["l"])(s,null,{default:On((function(){return[Object(i["l"])(O,null,{default:On((function(){return[yn]})),_:1})]})),_:1})]})),_:1},8,["onClick"]),[[v]]),Object(i["l"])(b),Object(i["Y"])(Object(i["l"])(d,{clickable:""},{default:On((function(){return[Object(i["l"])(s,{avatar:"",style:{"min-width":"0"}},{default:On((function(){return[Object(i["l"])(l,{name:"info_outline",size:"16px"})]})),_:1}),Object(i["l"])(s,null,{default:On((function(){return[Object(i["l"])(O,null,{default:On((function(){return[kn]})),_:1})]})),_:1})]})),_:1},512),[[v]]),Object(i["Y"])(Object(i["l"])(d,{clickable:"",class:"text-negative",onClick:e.deleteEntry},{default:On((function(){return[Object(i["l"])(s,{avatar:"",style:{"min-width":"0"}},{default:On((function(){return[Object(i["l"])(l,{name:"delete_outline",size:"16px"})]})),_:1}),Object(i["l"])(s,null,{default:On((function(){return[Object(i["l"])(O,null,{default:On((function(){return[Cn]})),_:1})]})),_:1})]})),_:1},8,["onClick"]),[[v]])]})),_:1})]})),_:1},8,["onClick"])])])]})),_:1}),e.entry&&e.entry.fields.length?(Object(i["C"])(),Object(i["h"])(p,{key:0},{default:On((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.entry.fields,(function(t,n){return Object(i["C"])(),Object(i["h"])(Object(i["N"])(e.getComponentFromField(t)),{modelValue:t,key:t?t.id:n,editView:!1,entry:e.entry,class:{"q-mb-sm":n!=e.entry.fields.length-1}},null,8,["modelValue","entry","class"])})),128))]})),_:1})):(Object(i["C"])(),Object(i["h"])(p,{key:1,class:"text-subtitle1 text-grey-8"},{default:On((function(){return[xn]})),_:1}))]})),_:1})])})),_n=n("bc78"),Vn=Object(i["ab"])("data-v-4846aa0d");Object(i["F"])("data-v-4846aa0d");var qn={class:"row items-center"},Ln={class:"text-body text-grey"},Qn={key:1},An={class:"text-subtitle2 q-mb-xs"},Xn={class:"shadow-1 rounded-borders row q-gutter-sm q-mb-md",style:{"margin-left":"0","margin-top":"0","padding-bottom":"8px"}};Object(i["D"])();var Sn=Vn((function(e,t,n,a,c,r){var l=Object(i["L"])("q-space"),o=Object(i["L"])("q-btn"),u=Object(i["L"])("q-icon"),s=Object(i["L"])("q-item-section"),d=Object(i["L"])("q-item"),b=Object(i["L"])("q-list"),j=Object(i["L"])("attachments-field-icon");return e.editView?(Object(i["C"])(),Object(i["h"])(i["a"],{key:0},[Object(i["l"])("div",qn,[Object(i["l"])("div",Ln,Object(i["Q"])(e.linkedAttachments.length)+" selected",1),Object(i["l"])(l),Object(i["l"])(o,{onClick:e.selectAttachments,label:"Select",icon:"upload_file",class:"select-att",flat:"",color:"primary"},null,8,["onClick"])]),Object(i["l"])(b,{bordered:"",separator:"",class:"q-mt-sm",dense:""},{default:Vn((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.linkedAttachments,(function(t){return Object(i["C"])(),Object(i["h"])(d,{key:t.name},{default:Vn((function(){return[Object(i["l"])(s,{avatar:"",class:"q-pr-none",style:{"min-width":"36px"}},{default:Vn((function(){return[Object(i["l"])(u,{name:e.getAttachmentIcon(t.content_type),color:"grey-8"},null,8,["name"])]})),_:2},1024),Object(i["l"])(s,{class:"text-weight-bold",style:{"line-height":"1.3em"}},{default:Vn((function(){return[Object(i["k"])(Object(i["Q"])(t.name),1)]})),_:2},1024),Object(i["l"])(s,{side:""},{default:Vn((function(){return[Object(i["l"])(o,{flat:"",dense:"",round:"",icon:"close",onClick:function(n){return e.removeAttachment(t.name)}},null,8,["onClick"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})],64)):(Object(i["C"])(),Object(i["h"])("div",Qn,[Object(i["l"])("div",An,Object(i["Q"])(e.modelValue.name),1),Object(i["l"])("div",Xn,[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.linkedAttachments,(function(t){return Object(i["C"])(),Object(i["h"])(j,{key:t.name,attachment:t,entryId:e.entry.id,onClick:function(n){return e.previewAttachment(t)}},null,8,["attachment","entryId","onClick"])})),128))])]))})),In={class:"absolute-bottom-right text-subtitle2 text-weight-bold"},Tn={class:"text-subtitle2"};function En(e,t,n,a,c,r){var l=Object(i["L"])("q-img"),o=Object(i["L"])("q-card-section"),u=Object(i["L"])("q-card"),s=Object(i["L"])("q-dialog");return Object(i["C"])(),Object(i["h"])(s,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["X"])((function(){return[e.attachment.content_type.startsWith("image")?(Object(i["C"])(),Object(i["h"])(l,{key:0,src:e.entryAttachment(e.entryId,e.attachment.name)},{default:Object(i["X"])((function(){return[Object(i["l"])("div",In,Object(i["Q"])(e.attachment.name),1)]})),_:1},8,["src"])):e.attachment.content_type.startsWith("text")?(Object(i["C"])(),Object(i["h"])(u,{key:1},{default:Object(i["X"])((function(){return[Object(i["l"])(o,{class:"text-h6 q-pb-none"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.attachment.name),1)]})),_:1}),Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.renderText(e.attachment.data)),1)]})),_:1})]})),_:1})):e.attachment.content_type.startsWith("audio")?(Object(i["C"])(),Object(i["h"])(u,{key:2,class:"q-dialog-plugin"},{default:Object(i["X"])((function(){return[Object(i["l"])(o,{class:"text-h6"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.attachment.name),1)]})),_:1}),Object(i["l"])("audio",{controls:"",src:e.entryAttachment(e.entryId,e.attachment.name)},null,8,["src"])]})),_:1})):e.attachment.content_type.startsWith("video")?(Object(i["C"])(),Object(i["h"])(u,{key:3,class:"q-dialog-plugin"},{default:Object(i["X"])((function(){return[Object(i["l"])(o,{class:"text-h6"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.attachment.name),1)]})),_:1}),Object(i["l"])("video",{controls:"",class:"q-dialog-plugin",src:e.entryAttachment(e.entryId,e.attachment.name),style:{"max-width":"600px"}},null,8,["src"])]})),_:1})):(Object(i["C"])(),Object(i["h"])(u,{key:4,class:"q-dialog-plugin"},{default:Object(i["X"])((function(){return[Object(i["l"])(o,{class:"text-h6"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.attachment.name)+" ",1),Object(i["l"])("div",Tn,Object(i["Q"])(e.attachment.content_type),1)]})),_:1})]})),_:1}))]})),_:1},8,["onHide"])}var Rn=Object(i["m"])({name:"PreviewAttachmentDialog",props:{attachment:{type:Object,required:!0},entryId:{type:String,required:!0}},emits:Object(T["a"])(E["a"].emits),setup:function(){var e=Object(E["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,c=e.onDialogCancel,r=st();return{dialogRef:t,onDialogHide:n,onOKClick:function(){a()},onCancelClick:c,entryAttachment:r.getters.entryAttachment,renderText:ke}}});Rn.render=En;var Dn=Rn;Ue()(Rn,"components",{QDialog:we["a"],QImg:Yt["a"],QCard:_e["a"],QCardSection:Ve["a"]});var Un={key:1,class:"bg-grey-3 rounded-borders text-caption q-pa-xs ellipsis-3-lines cursor-pointer",style:{width:"64px",height:"64px","line-height":"1.3em","font-size":"10px","word-wrap":"break-word"}};function Fn(e,t,n,a,c,r){var l=Object(i["L"])("q-tooltip"),o=Object(i["L"])("q-img"),u=Object(i["L"])("q-avatar");return e.attachment.content_type.startsWith("image")?(Object(i["C"])(),Object(i["h"])(o,{key:0,class:"bg-grey-3 rounded-borders cursor-pointer",style:{width:"64px",height:"64px"},src:e.entryAttachment(e.entryId,e.attachment.name)},{default:Object(i["X"])((function(){return[Object(i["l"])(l,{target:!0,anchor:"center middle",self:"bottom middle",class:"text-weight-bold bg-black","transition-show":"scale","transition-hide":"scale"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.attachment.name),1)]})),_:1})]})),_:1},8,["src"])):e.attachment.content_type.startsWith("text")?(Object(i["C"])(),Object(i["h"])("div",Un,[Object(i["l"])(l,{target:!0,anchor:"center middle",self:"bottom middle",class:"text-weight-bold bg-black","transition-show":"scale","transition-hide":"scale"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.attachment.name),1)]})),_:1}),Object(i["k"])(" "+Object(i["Q"])(e.renderText(e.attachment.data)),1)])):e.attachment.content_type.startsWith("audio")?(Object(i["C"])(),Object(i["h"])(u,{key:2,rounded:"",color:"blue-grey-3",class:"cursor-pointer",icon:"headset","text-color":"dark",style:{width:"64px",height:"64px"}},{default:Object(i["X"])((function(){return[Object(i["l"])(l,{target:!0,anchor:"center middle",self:"bottom middle",class:"text-weight-bold bg-black","transition-show":"scale","transition-hide":"scale"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.attachment.name),1)]})),_:1})]})),_:1})):e.attachment.content_type.startsWith("video")?(Object(i["C"])(),Object(i["h"])(u,{key:3,rounded:"",color:"red-3",class:"cursor-pointer",icon:"play_circle_outline","text-color":"dark",style:{width:"64px",height:"64px"}},{default:Object(i["X"])((function(){return[Object(i["l"])(l,{target:!0,anchor:"center middle",self:"bottom middle",class:"text-weight-bold bg-black","transition-show":"scale","transition-hide":"scale"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.attachment.name),1)]})),_:1})]})),_:1})):(Object(i["C"])(),Object(i["h"])(u,{key:4,rounded:"",color:"grey-3",class:"cursor-pointer",icon:"insert_drive_file","text-color":"dark",style:{width:"64px",height:"64px"}},{default:Object(i["X"])((function(){return[Object(i["l"])(l,{target:!0,anchor:"center middle",self:"bottom middle",class:"text-weight-bold bg-black","transition-show":"scale","transition-hide":"scale"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.attachment.name),1)]})),_:1})]})),_:1}))}var Hn=Object(i["m"])({name:"AttachmentsFieldIcon",props:{attachment:{type:Object,required:!0},entryId:{type:String,required:!0}},setup:function(e){var t=st();return{entryAttachment:t.getters.entryAttachment,renderText:ke}}});Hn.render=Fn;var Jn=Hn;Ue()(Hn,"components",{QImg:Yt["a"],QTooltip:Qe["a"],QAvatar:Lt["a"]});var Pn=Object(i["m"])({components:{AttachmentsFieldIcon:Jn},name:"AttachmentsField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=Object(f["a"])(),c=st(),r=Object(i["H"])(""),l=Object(i["f"])((function(){return Object.entries(e.entry.attachments).filter((function(t){return e.modelValue.attachments.includes(t[0])})).map((function(e){return Object(I["a"])({name:e[0]},e[1])}))})),o=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{attachments:t}))},u=function(t){e.modelValue.attachments.includes(t)&&n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{attachments:e.modelValue.attachments.filter((function(e){return e!==t}))}))},s=function(){a.dialog({component:Fe,componentProps:{entry:e.entry}}).onOk((function(t){e.modelValue.attachments.includes(t)||o([].concat(Object(T["a"])(e.modelValue.attachments),[t]))}))},d=function(t){a.dialog({component:Dn,componentProps:{attachment:t,entryId:e.entry.id}})};return{selectAttachments:s,linkedAttachments:l,getAttachmentIcon:ye,removeAttachment:u,currentSlide:r,entryAttachment:c.getters.entryAttachment,renderText:ke,previewAttachment:d}}});n("697f");Pn.render=Sn,Pn.__scopeId="data-v-4846aa0d";var Nn=Pn;Ue()(Pn,"components",{QSpace:qe["a"],QBtn:Le["a"],QList:Ae["a"],QItem:Xe["a"],QItemSection:Se["a"],QIcon:Ie["a"]});var zn={key:0},Bn={key:1},Mn={class:"text-subtitle2 q-mb-xs"};function Kn(e,t,n,a,c,r){var l=Object(i["L"])("q-editor");return e.editView?(Object(i["C"])(),Object(i["h"])("div",zn,[Object(i["l"])(l,{dense:"",modelValue:e.modelValue.content,"onUpdate:modelValue":e.updateValue,class:"q-mt-md","max-height":"200px",toolbar:[["bold","italic","underline","strike","subscript","superscript"],["undo","redo"],["removeFormat"]]},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["C"])(),Object(i["h"])("div",Bn,[Object(i["l"])("div",Mn,Object(i["Q"])(e.modelValue.name),1),Object(i["l"])("div",{class:"text-body2 text-justify",innerHTML:e.modelValue.content,style:{"word-wrap":"break-word"}},null,8,["innerHTML"])]))}var Wn=Object(i["m"])({name:"DescriptionField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{content:t}))};return{FieldType:z,updateValue:a}}}),Yn=n("d66b");Wn.render=Kn;var $n=Wn;Ue()(Wn,"components",{QEditor:Yn["a"]});var Zn=Object(i["ab"])("data-v-1eeca434");Object(i["F"])("data-v-1eeca434");var Gn={key:0},ea={class:"text-body text-grey-8 q-pt-md row items-center"},ta={key:0,class:"text-red"},na=Object(i["k"])(" Please enter a valid URL "),aa=Object(i["k"])(" Unknown, will use generic style. "),ca={key:1},ra={class:"text-subtitle2 q-mb-xs"},la={key:3,class:"text-negative text-subtitle2"};Object(i["D"])();var oa=Zn((function(e,t,n,a,c,r){var l=Object(i["L"])("q-input"),o=Object(i["L"])("q-icon"),u=Object(i["L"])("q-video"),s=Object(i["L"])("q-item-section"),d=Object(i["L"])("q-item"),b=Object(i["L"])("q-card");return e.editView?(Object(i["C"])(),Object(i["h"])("div",Gn,[Object(i["l"])(l,{label:"URL",modelValue:e.modelValue.url,"onUpdate:modelValue":e.updateUrl,debounce:"600",loading:e.embedLoading,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","loading"]),Object(i["l"])("div",ea,[e.embedService==e.EmbedFieldService.Invalid?(Object(i["C"])(),Object(i["h"])("div",ta,[Object(i["l"])(o,{name:"clear",class:"q-pr-sm"}),na])):e.embedService!=e.EmbedFieldService.Unknown?(Object(i["C"])(),Object(i["h"])(i["a"],{key:1},[Object(i["l"])(o,{name:"checkmark",class:"q-pr-sm"}),Object(i["k"])(" Will use "+Object(i["Q"])(e.EmbedFieldService[e.embedService])+" style. ",1)],64)):(Object(i["C"])(),Object(i["h"])(i["a"],{key:2},[Object(i["l"])(o,{name:"help_outline",class:"q-pr-sm"}),aa],64))])])):(Object(i["C"])(),Object(i["h"])("div",ca,[Object(i["l"])("div",ra,Object(i["Q"])(e.modelValue.name),1),e.embedServiceC==e.EmbedFieldService.YouTube?(Object(i["C"])(),Object(i["h"])(u,{key:0,src:e.modelValue.url.replace("watch?v=","embed/")},null,8,["src"])):e.embedServiceC==e.EmbedFieldService.Soundcloud?(Object(i["C"])(),Object(i["h"])("iframe",{key:1,src:"https://soundcloud.com/oembed?format=js&url="+encodeURIComponent(e.modelValue.url)+"&iframe=true"},null,8,["src"])):e.embedServiceC==e.EmbedFieldService.Unknown?(Object(i["C"])(),Object(i["h"])(b,{key:2,class:"q-mt-sm",flat:"",bordered:""},{default:Zn((function(){return[Object(i["l"])(d,null,{default:Zn((function(){return[Object(i["l"])(s,{avatar:"",class:"q-pr-none",style:{"min-width":"48px"}},{default:Zn((function(){return[Object(i["l"])(o,{name:"link"})]})),_:1}),Object(i["l"])(s,{class:"text-subtitle2"},{default:Zn((function(){return[Object(i["l"])("a",{href:e.modelValue.url},Object(i["Q"])(e.modelValue.url),9,["href"])]})),_:1})]})),_:1})]})),_:1})):(Object(i["C"])(),Object(i["h"])("div",la,"Error parsing URL!"))]))})),ia=Object(i["m"])({name:"EmbedField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=(Object(f["a"])(),Object(i["H"])(!1)),c=Object(i["H"])(M.Unknown),r=Object(i["f"])((function(){return ve(e.modelValue.url)})),l=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{url:t}))};return Object(i["W"])(Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.modelValue.url){t.next=2;break}return t.abrupt("return");case 2:return a.value=!0,t.next=5,l(200);case 5:c.value=ve(e.modelValue.url),a.value=!1;case 7:case"end":return t.stop()}}),t)})))),{FieldType:z,updateUrl:o,embedLoading:a,embedService:c,embedServiceC:r,EmbedFieldService:M}}}),ua=(n("45de"),n("6ac0"));ia.render=oa,ia.__scopeId="data-v-1eeca434";var sa=ia;Ue()(ia,"components",{QInput:xt["a"],QIcon:Ie["a"],QVideo:ua["a"],QCard:_e["a"],QItem:Xe["a"],QItemSection:Se["a"]});var da={key:0},ba=Object(i["k"])(" No attachments saved "),ja={key:1},Oa={class:"text-subtitle2 q-mb-xs"},ma={key:1,class:"text-subtitle2 q-mb-xs text-negative"};function fa(e,t,n,a,c,r){var l=Object(i["L"])("q-btn"),o=Object(i["L"])("q-item-label"),u=Object(i["L"])("q-item-section"),s=Object(i["L"])("q-icon"),d=Object(i["L"])("q-item"),b=Object(i["L"])("q-select"),j=Object(i["L"])("q-input"),O=Object(i["L"])("map-view");return e.editView?(Object(i["C"])(),Object(i["h"])("div",da,[Object(i["l"])(l,{label:"Edit locations",outline:"",color:"primary",class:"full-width",disable:!e.modelValue.imageKey,onClick:e.editLocations},null,8,["disable","onClick"]),Object(i["l"])(b,{label:"Image attachment",outlined:"",dense:"",class:"q-mt-sm",options:e.attachmentOptions,modelValue:e.modelValue.imageKey,"onUpdate:modelValue":e.updateImageKey},{option:Object(i["X"])((function(e){return[Object(i["l"])(d,Object(i["s"])(e.itemProps,Object(i["R"])(e.itemEvents),{dense:""}),{default:Object(i["X"])((function(){return[Object(i["l"])(u,null,{default:Object(i["X"])((function(){return[Object(i["l"])(o,{innerHTML:e.opt.label},null,8,["innerHTML"])]})),_:2},1024),Object(i["l"])(u,{avatar:""},{default:Object(i["X"])((function(){return[Object(i["l"])(s,{size:"16px",name:e.opt.icon},null,8,["name"])]})),_:2},1024)]})),_:2},1040)]})),"no-option":Object(i["X"])((function(){return[Object(i["l"])(d,null,{default:Object(i["X"])((function(){return[Object(i["l"])(u,{class:"text-italic text-grey"},{default:Object(i["X"])((function(){return[ba]})),_:1})]})),_:1})]})),_:1},8,["options","modelValue","onUpdate:modelValue"]),Object(i["l"])(j,{class:"q-mt-sm",outlined:"",dense:"",label:"Custom name",modelValue:e.modelValue.customName,"onUpdate:modelValue":e.updateCustomName},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["C"])(),Object(i["h"])("div",ja,[Object(i["l"])("div",Oa,Object(i["Q"])(e.modelValue.name),1),e.mapBackground?(Object(i["C"])(),Object(i["h"])(O,{key:0,locations:e.modelValue.locations,background:e.mapBackground,showLocations:"",style:{height:"200px"}},null,8,["locations","background"])):(Object(i["C"])(),Object(i["h"])("div",ma," Error loading field! Could not retrieve background. "))]))}var pa={class:"text-h6"},ha=Object(i["k"])("Create a new location"),va={class:"row"},ga={class:"col col-md-4"},ya={class:"col"},ka={class:"col-auto"},Ca={class:"row"},xa={class:"col col-md-2 q-pr-sm"},wa={class:"col col-md-2 q-pr-sm"};function _a(e,t,n,a,c,r){var l=Object(i["L"])("q-space"),o=Object(i["L"])("q-tooltip"),u=Object(i["L"])("q-btn"),s=Object(i["L"])("q-card-section"),d=Object(i["L"])("map-view"),b=Object(i["L"])("q-select"),j=Object(i["L"])("select-entry"),O=Object(i["L"])("q-input"),m=Object(i["L"])("q-card"),f=Object(i["L"])("q-dialog");return Object(i["C"])(),Object(i["h"])(f,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:Object(i["X"])((function(){return[Object(i["l"])(m,{class:"q-dialog-plugin",style:{width:"100%"}},{default:Object(i["X"])((function(){return[Object(i["l"])(s,{class:"row align-items-center"},{default:Object(i["X"])((function(){return[Object(i["l"])("div",pa,'Editing "'+Object(i["Q"])(e.modelValue.name)+'"',1),Object(i["l"])(l),Object(i["l"])(u,{icon:"add_location_alt",color:"primary",flat:"",round:"",dense:"",onClick:e.addLocation},{default:Object(i["X"])((function(){return[Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[ha]})),_:1})]})),_:1},8,["onClick"])]})),_:1}),Object(i["l"])("div",null,[Object(i["l"])(d,{background:e.mapBackground,locations:e.mapLocations,showLocations:"",editLocations:"","onUpdate:locations":t[1]||(t[1]=function(t){return e.mapLocations=t}),onSelected:t[2]||(t[2]=function(t){return e.mapSelected=t}),style:{height:"300px"},ref:"mapRef"},null,8,["background","locations"])]),Object(i["l"])(s,{class:"q-pb-sm"},{default:Object(i["X"])((function(){return[Object(i["l"])("div",va,[Object(i["l"])("div",ga,[Object(i["l"])(b,{label:e.selectOpts.length?"Select a location":"(no locations)",disable:!e.selectOpts.length,dense:"",options:e.selectOpts,outlined:"",class:"q-mr-sm",modelValue:e.mapSelected,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.mapSelected=t})},null,8,["label","disable","options","modelValue"])]),Object(i["l"])("div",ya,[e.mapSelectedPtr?(Object(i["C"])(),Object(i["h"])(j,{key:0,outlined:"",dense:"",class:"q-mr-sm","options-dense":"",modelValue:e.mapSelectedPtr.entryId,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.mapSelectedPtr.entryId=t})},null,8,["modelValue"])):Object(i["i"])("",!0)]),Object(i["l"])("div",ka,[Object(i["l"])(u,{icon:"delete_outline",class:"full-height",outline:"",color:"negative",disable:!e.mapSelectedPtr},null,8,["disable"])])])]})),_:1}),Object(i["l"])(s,null,{default:Object(i["X"])((function(){return[Object(i["l"])("div",Ca,[Object(i["l"])("div",xa,[e.mapSelectedPtr?(Object(i["C"])(),Object(i["h"])(O,{key:0,type:"number",label:"X",dense:"",outlined:"",modelValue:e.mapSelectedPtr.position[0],"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.mapRef.moveLocation(e.mapSelected,{lat:e.mapSelectedPtr.position[1],lng:t})})},null,8,["modelValue"])):Object(i["i"])("",!0)]),Object(i["l"])("div",wa,[e.mapSelectedPtr?(Object(i["C"])(),Object(i["h"])(O,{key:0,type:"number",label:"Y",dense:"",outlined:"",modelValue:e.mapSelectedPtr.position[1],"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.mapRef.moveLocation(e.mapSelected,{lat:t,lng:e.mapSelectedPtr.position[0]})})},null,8,["modelValue"])):Object(i["i"])("",!0)]),Object(i["l"])(l),Object(i["l"])(u,{label:"Save changes",color:"primary",flat:"",onClick:e.saveChanges},null,8,["onClick"])])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}function Va(e,t,n,a,c,r){var l=Object(i["L"])("q-avatar"),o=Object(i["L"])("q-item-section"),u=Object(i["L"])("q-item-label"),s=Object(i["L"])("q-item"),d=Object(i["L"])("q-select");return Object(i["C"])(),Object(i["h"])(d,Object(i["s"])(e.attrs,{label:"Select an entry",options:e.selectOpts,modelValue:e.modelValue,"onUpdate:modelValue":e.updateValue,"option-value":function(e){return void 0!==e?e.id:""},"emit-value":"",multiple:e.multiple,"map-options":""}),Object(i["j"])({option:Object(i["X"])((function(e){return[Object(i["l"])(s,e.itemProps,{default:Object(i["X"])((function(){return[Object(i["l"])(o,{avatar:"",style:{"min-width":"0"}},{default:Object(i["X"])((function(){return["attachment"===e.opt.avatar.type?(Object(i["C"])(),Object(i["h"])(l,{key:0,rounded:"",size:"24px"},{default:Object(i["X"])((function(){return[Object(i["l"])("img",{src:e.opt.avatar.data},null,8,["src"])]})),_:2},1024)):(Object(i["C"])(),Object(i["h"])(l,{key:1,"text-color":"primary",rounded:"",icon:e.opt.avatar.data,size:"24px"},null,8,["icon"]))]})),_:2},1024),Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[Object(i["l"])(u,null,{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.opt.label),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1040)]})),_:2},[e.multiple?void 0:{name:"prepend",fn:Object(i["X"])((function(){return[e.currentOpt&&"attachment"===e.currentOpt.avatar.type?(Object(i["C"])(),Object(i["h"])(l,{key:0,rounded:""},{default:Object(i["X"])((function(){return[Object(i["l"])("img",{src:e.currentOpt.avatar.data},null,8,["src"])]})),_:1})):e.currentOpt&&"icon"===e.currentOpt.avatar.type?(Object(i["C"])(),Object(i["h"])(l,{key:1,"text-color":"primary",rounded:"",icon:e.currentOpt.avatar.data},null,8,["icon"])):Object(i["i"])("",!0)]}))}]),1040,["options","modelValue","onUpdate:modelValue","option-value","multiple"])}var qa=Object(i["m"])({name:"SelectEntry",props:{modelValue:{type:Object,required:!0},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup:function(e,t){var n=st(),a=Object(i["f"])((function(){return Object.entries(n.state.entries).map((function(e){var t="attachment"===e[1].avatar.type?n.getters.entryAttachment(e[1].id,e[1].avatar.data):e[1].avatar.data;return{label:e[1].title,avatar:{type:e[1].avatar.type,data:t},id:e[1].id}}))})),c=Object(i["f"])((function(){return a.value.find((function(t){return t.id===e.modelValue}))})),r=function(e){t.emit("update:modelValue",e)};return{attrs:t.attrs,updateValue:r,selectOpts:a,currentOpt:c}}});qa.render=Va;var La=qa;function Qa(e,t,n,a,c,r){var l=Object(i["L"])("l-image-overlay"),o=Object(i["L"])("entry-link"),u=Object(i["L"])("l-popup"),s=Object(i["L"])("l-marker"),d=Object(i["L"])("q-btn"),b=Object(i["L"])("l-control"),j=Object(i["L"])("l-map");return e.mapReady?(Object(i["C"])(),Object(i["h"])(j,{key:0,crs:e.CRS.Simple,center:e.mapCenter,zoom:e.mapZoom,"onUpdate:zoom":t[1]||(t[1]=function(t){return e.mapZoom=t}),minZoom:-2,ref:"mapRef",options:{fullscreenControl:!0,fullscreenControlOptions:{position:"topleft"}}},{default:Object(i["X"])((function(){return[Object(i["l"])(l,{url:e.mapImage,bounds:e.mapBounds},null,8,["url","bounds"]),e.showLocations?(Object(i["C"])(!0),Object(i["h"])(i["a"],{key:0},Object(i["J"])(e.mapLocations,(function(t,n){return Object(i["C"])(),Object(i["h"])(s,{key:n,"lat-lng":t.coordinates,draggable:e.editLocations,ref:function(t){t&&(e.mapLocationRefs[n]=t)},"onUpdate:latLng":function(t){return e.updateLocation(n,t)},onClick:function(t){return e.$emit("selected",n)}},{default:Object(i["X"])((function(){return[Object(i["l"])(u,{options:{minWidth:200,closeButton:!1}},{default:Object(i["X"])((function(){return[Object(i["l"])(o,{entryId:t.entryId,showLink:!e.editLocations},null,8,["entryId","showLink"])]})),_:2},1024)]})),_:2},1032,["lat-lng","draggable","onUpdate:latLng","onClick"])})),128)):Object(i["i"])("",!0),e.locations.length?(Object(i["C"])(),Object(i["h"])(b,{key:1,class:"leaflet-control leaflet-demo-control"},{default:Object(i["X"])((function(){return[Object(i["l"])(d,{icon:"chevron_left",dense:"",flat:"",size:"10px",onClick:e.focusPrevLocation},null,8,["onClick"]),Object(i["l"])(d,{icon:"chevron_right",dense:"",flat:"",size:"10px",onClick:e.focusNextLocation},null,8,["onClick"])]})),_:1})):Object(i["i"])("",!0)]})),_:1},8,["crs","center","zoom"])):Object(i["i"])("",!0)}Ue()(qa,"components",{QSelect:Qt["a"],QItem:Xe["a"],QItemSection:Se["a"],QAvatar:Lt["a"],QItemLabel:Me["a"]});var Aa=n("5afd"),Xa=Object(i["m"])({name:"MapView",props:{background:{type:Object,required:!0},locations:{type:Array,default:[]},showLocations:{type:Boolean,default:!1},editLocations:{type:Boolean,default:!1}},components:{LMap:Aa["c"],LImageOverlay:Aa["b"],LMarker:Aa["d"],LPopup:Aa["e"],EntryLink:Kt,LControl:Aa["a"]},emits:["selected","update:locations"],setup:function(e,t){var n=Object(i["H"])(""),a=Object(i["H"])([[0,0],[0,0]]),r=Object(i["H"])([0,0]),l=Object(i["H"])(0),o=Object(i["H"])([]),u=Object(i["H"])(void 0),s=Object(i["H"])(!1),d=Object(i["H"])(0),b=Object(i["f"])((function(){return e.locations.map((function(e,t){return{entryId:e.entryId,coordinates:{lng:e.position[0],lat:e.position[1]},ref:o.value[t]?o.value[t].leafletObject:void 0}}))})),j=function(e){return{entryId:e.entryId,position:[e.coordinates.lat,e.coordinates.lng]}},O=function(e,n){t.emit("update:locations",b.value.map((function(t,a){return{entryId:t.entryId,position:e===a?[n.lng,n.lat]:[t.coordinates.lng,t.coordinates.lat]}})))},m=function(t){u.value&&o.value[t]&&u.value.leafletObject.flyTo({lat:e.locations[t].position[1],lng:e.locations[t].position[0]})},f=function(){d.value=d.value<=0?e.locations.length-1:d.value-1,m(d.value)},p=function(){d.value=d.value>=e.locations.length-1?0:d.value+1,m(d.value)},h=function(e,t){o.value[e]&&o.value[e].leafletObject.setLatLng(t)},v=function(){s.value=!1;var t=Ce(e.background.data,e.background.contentType);n.value=URL.createObjectURL(t);var c=new Image;c.onload=function(){a.value=[[0,0],[c.height,c.width]],r.value=[c.width/2,c.height/2],s.value=!0},c.src=n.value},g=function(){return r};return Object(i["z"])((function(){v(),setTimeout((function(){u.value&&c["control"].fullscreen().addTo(u.value.leafletObject)}),500)})),Object(i["W"])((function(){e.background&&v()})),Object(i["x"])((function(){o.value=[]})),Object(i["w"])((function(){n.value&&URL.revokeObjectURL(n.value)})),{mapImage:n,mapBounds:a,mapCenter:r,mapLocations:b,mapZoom:l,normalizeLocation:j,CRS:c["CRS"],updateLocation:O,focusPrevLocation:f,focusNextLocation:p,focusLocation:m,mapFocus:d,mapLocationRefs:o,mapRef:u,getMapCenter:g,moveLocation:h,mapReady:s}}});n("20a9");Xa.render=Qa;var Sa=Xa;Ue()(Xa,"components",{QBtn:Le["a"]});var Ia=Object(i["m"])({name:"EditMapDialog",props:{entryId:{type:String,required:!0},modelValue:{type:Object,required:!0}},components:{SelectEntry:La,MapView:Sa},emits:Object(T["a"])(E["a"].emits),setup:function(e){var t=Object(E["a"])(),n=t.dialogRef,a=t.onDialogHide,r=t.onDialogOK,l=t.onDialogCancel,o=st(),u=(Object(f["a"])(),Object(i["f"])((function(){var t=o.getters.entryAttachmentFull(e.entryId,e.modelValue.imageKey);if(t)return{data:t.data,contentType:t.content_type}}))),s=Object(i["H"])(e.modelValue.locations),d=Object(i["H"])(void 0),b=Object(i["H"])(void 0),j=Object(i["f"])((function(){return s.value.map((function(e,t){return t}))})),O=Object(i["f"])((function(){return void 0!==d.value?s.value[d.value]:void 0})),m=function(){s.value=[].concat(Object(T["a"])(s.value),[{entryId:"",position:b.value?b.value.getMapCenter():[0,0]}]),d.value=s.value.length-1},p=function(){r({locations:s})};return{mapBackground:u,saveChanges:p,dialogRef:n,onDialogHide:a,mapLocations:s,selectOpts:j,CRS:c["CRS"],addLocation:m,mapSelected:d,mapSelectedPtr:O,mapRef:b,onCancelClick:l}}});Ia.render=_a;var Ta=Ia;Ue()(Ia,"components",{QDialog:we["a"],QCard:_e["a"],QCardSection:Ve["a"],QSpace:qe["a"],QBtn:Le["a"],QTooltip:Qe["a"],QSelect:Qt["a"],QInput:xt["a"],QCardActions:Ee["a"]});var Ea=Object(i["m"])({name:"MapField",emits:["update:modelValue"],components:{MapView:Sa},props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=st(),c=Object(f["a"])(),r=Object(i["f"])((function(){return a.state.entries[e.entry.id]?Object.entries(a.state.entries[e.entry.id].attachments).filter((function(e){return e[1].content_type.startsWith("image")})).map((function(e){return{label:e[0],value:e[0],icon:ye(e[1].content_type)}})):[]})),l=Object(i["f"])((function(){var t=a.getters.entryAttachmentFull(e.entry.id,e.modelValue.imageKey);if(t)return{data:t.data,contentType:t.content_type}})),o=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{customName:t}))},u=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{imageKey:t.value}))},s=function(){c.dialog({component:Ta,componentProps:{modelValue:e.modelValue,entryId:e.entry.id}}).onOk((function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{locations:t.locations}))}))};return{FieldType:z,updateCustomName:o,updateImageKey:u,attachmentOptions:r,editLocations:s,mapBackground:l}}});Ea.render=fa;var Ra=Ea;Ue()(Ea,"components",{QBtn:Le["a"],QSelect:Qt["a"],QItem:Xe["a"],QItemSection:Se["a"],QItemLabel:Me["a"],QIcon:Ie["a"],QInput:xt["a"]});var Da={key:0},Ua={key:1},Fa={class:"text-subtitle2 q-mb-xs"},Ha={class:"text-body1"};function Ja(e,t,n,a,c,r){var l=Object(i["L"])("q-input");return e.editView?(Object(i["C"])(),Object(i["h"])("div",Da,[Object(i["l"])(l,{label:"Value",type:"number",outlined:"",dense:"",modelValue:e.modelValue.value,"onUpdate:modelValue":e.updateValue},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["C"])(),Object(i["h"])("div",Ua,[Object(i["l"])("div",Fa,Object(i["Q"])(e.modelValue.name),1),Object(i["l"])("div",Ha,Object(i["Q"])(e.modelValue.value),1)]))}n("a9e3"),n("25eb");var Pa=Object(i["m"])({name:"NumberField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{value:Number.parseInt(t)}))};return{FieldType:z,updateValue:a}}});Pa.render=Ja;var Na=Pa;Ue()(Pa,"components",{QInput:xt["a"]});var za={key:0},Ba=Object(i["k"])(" Available variables:"),Ma=Object(i["l"])("br",null,null,-1),Ka=Object(i["k"])(" %min = Minimum value"),Wa=Object(i["l"])("br",null,null,-1),Ya=Object(i["k"])(" %max = Maximum value "),$a=Object(i["l"])("br",null,null,-1),Za=Object(i["k"])(" %val = Current value"),Ga=Object(i["l"])("br",null,null,-1),ec=Object(i["k"])(" %val2 = Current value (%)"),tc=Object(i["l"])("br",null,null,-1),nc=Object(i["k"])(" %rem = Remaining value"),ac=Object(i["l"])("br",null,null,-1),cc=Object(i["k"])(" %rem2 = Remaining value (%) "),rc=Object(i["k"])("hi"),lc={class:"row q-gutter-md q-pt-sm"},oc={class:"col-md"},ic={class:"col-md"},uc={class:"col-md"},sc={class:"row"},dc={class:"col-md"},bc={class:"col-md"},jc={key:1},Oc={class:"text-subtitle2 q-mb-xs"},mc={class:"absolute-full flex flex-center"},fc={key:1,style:{display:"inline-block"}},pc={key:1,class:"text-weight-bold text-h6"};function hc(e,t,n,a,c,r){var l=Object(i["L"])("q-tooltip"),o=Object(i["L"])("q-dialog"),u=Object(i["L"])("q-icon"),s=Object(i["L"])("q-input"),d=Object(i["L"])("q-separator"),b=Object(i["L"])("q-checkbox"),j=Object(i["L"])("q-select"),O=Object(i["L"])("q-color"),m=Object(i["L"])("q-popup-proxy"),f=Object(i["L"])("q-badge"),p=Object(i["L"])("q-linear-progress"),h=Object(i["L"])("q-circular-progress");return e.editView?(Object(i["C"])(),Object(i["h"])("div",za,[Object(i["l"])(s,{label:"Label",modelValue:e.modelValue.label,"onUpdate:modelValue":e.updateLabel,style:{"font-family":"monospace"},outlined:"",dense:""},{append:Object(i["X"])((function(){return[Object(i["l"])(u,{name:"help"},{default:Object(i["X"])((function(){return[Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[Ba,Ma,Ka,Wa,Ya,$a,Za,Ga,ec,tc,nc,ac,cc]})),_:1}),Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[rc]})),_:1})]})),_:1})]})),_:1},8,["modelValue","onUpdate:modelValue"]),Object(i["l"])("div",lc,[Object(i["l"])("div",oc,[Object(i["l"])(s,{outlined:"",dense:"",label:"Min",type:"number",modelValue:e.modelValue.minValue,"onUpdate:modelValue":e.updateMinValue},null,8,["modelValue","onUpdate:modelValue"])]),Object(i["l"])("div",ic,[Object(i["l"])(s,{label:"Max",type:"number",outlined:"",dense:"",modelValue:e.modelValue.maxValue,"onUpdate:modelValue":e.updateMaxValue},null,8,["modelValue","onUpdate:modelValue"])]),Object(i["l"])("div",uc,[Object(i["l"])(s,{label:"Value",type:"number",outlined:"",dense:"",modelValue:e.modelValue.value,"onUpdate:modelValue":e.updateValue},null,8,["modelValue","onUpdate:modelValue"])])]),Object(i["l"])(d,{class:"q-my-md"}),Object(i["l"])("div",sc,[Object(i["l"])("div",dc,[Object(i["l"])(b,{modelValue:e.modelValue.showBar,"onUpdate:modelValue":e.updateShowBar,style:{transform:"translateX(-10px)"},label:"Show bar"},null,8,["modelValue","onUpdate:modelValue"])]),Object(i["l"])("div",bc,[Object(i["l"])(j,{label:"Bar type",disable:!e.modelValue.showBar,options:e.barOptions,modelValue:e.modelValue.barType,"onUpdate:modelValue":e.updateBarType,outlined:"",dense:""},null,8,["disable","options","modelValue","onUpdate:modelValue"])])]),Object(i["l"])(s,{class:"q-mt-sm",label:"Bar color",disable:!e.modelValue.showBar,modelValue:e.modelValue.barColor,"onUpdate:modelValue":e.updateBarColor,outlined:"",dense:""},{append:Object(i["X"])((function(){return[Object(i["l"])(u,{name:"colorize",class:"cursor-pointer"},{default:Object(i["X"])((function(){return[Object(i["l"])(m,{"transition-show":"scale","transition-hide":"scale"},{default:Object(i["X"])((function(){return[Object(i["l"])(O,{modelValue:e.modelValue.barColor,"onUpdate:modelValue":e.updateBarColor},null,8,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1})]})),_:1},8,["disable","modelValue","onUpdate:modelValue"])])):(Object(i["C"])(),Object(i["h"])("div",jc,[Object(i["l"])("div",Oc,Object(i["Q"])(e.modelValue.name),1),e.modelValue.showBar?(Object(i["C"])(),Object(i["h"])(i["a"],{key:0},["linear"==e.modelValue.barType?(Object(i["C"])(),Object(i["h"])(p,{key:0,size:"24px",rounded:"",value:e.barValue,ref:"progress"},{default:Object(i["X"])((function(){return[Object(i["l"])("div",mc,[Object(i["l"])(f,{color:"white","text-color":"accent",class:"text-weight-bold",label:e.progressLabel},null,8,["label"])])]})),_:1},8,["value"])):(Object(i["C"])(),Object(i["h"])("div",fc,[Object(i["l"])(h,{value:e.modelValue.value,size:"xl",min:e.modelValue.minValue,max:e.modelValue.maxValue,"show-value":"",style:{color:e.modelValue.barColor},"center-color":"grey-3","track-color":"grey-3"},null,8,["value","min","max","style"]),Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.progressLabel),1)]})),_:1})]))],64)):(Object(i["C"])(),Object(i["h"])("div",pc,Object(i["Q"])(e.progressLabel),1))]))}n("b680");var vc=n("7962"),gc=Object(i["m"])({name:"ProgressField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=Object(i["H"])(null),c=function(t){var a=Number.parseInt(t)||0;n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{minValue:a}))},r=function(t){var a=Number.parseInt(t)||0;n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{maxValue:a}))},l=function(t){var a=Number.parseInt(t)||0;n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{value:a}))},o=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{showBar:t}))},u=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{barType:t.value}))},s=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{barColor:t}))},d=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{label:t}))},b=Object(i["f"])((function(){return e.modelValue.value/(e.modelValue.maxValue-e.modelValue.minValue)})),j=Object(i["f"])((function(){var t=e.modelValue.label.replaceAll("%min",String(e.modelValue.minValue));return t=t.replaceAll("%max",String(e.modelValue.maxValue)),t=t.replaceAll("%rem2",String((100*(1-b.value)).toFixed(2))),t=t.replaceAll("%rem",String(e.modelValue.maxValue-e.modelValue.value)),t=t.replaceAll("%val2",String((100*b.value).toFixed(2))),t=t.replaceAll("%val",String(e.modelValue.value)),t}));Object(i["W"])((function(){a.value&&Object(vc["a"])("primary",e.modelValue.barColor,a.value.$el)}));var O=[{label:"Linear",value:"linear"},{label:"Circular",value:"circular"}];return{FieldType:z,updateLabel:d,updateMinValue:c,updateMaxValue:r,updateValue:l,updateShowBar:o,updateBarType:u,updateBarColor:s,barOptions:O,barValue:b,progress:a,progressLabel:j}}}),yc=n("8f8e"),kc=n("6b1d"),Cc=n("58ea");gc.render=hc;var xc=gc;Ue()(gc,"components",{QInput:xt["a"],QIcon:Ie["a"],QTooltip:Qe["a"],QDialog:we["a"],QSeparator:Ne["a"],QCheckbox:yc["a"],QSelect:Qt["a"],QPopupProxy:wt["a"],QColor:_t["a"],QLinearProgress:kc["a"],QBadge:Te["a"],QCircularProgress:Cc["a"]});var wc={key:0},_c=Object(i["k"])(" No categories "),Vc={key:1},qc={class:"text-subtitle2 q-mb-xs"};function Lc(e,t,n,a,c,r){var l=Object(i["L"])("q-item-section"),o=Object(i["L"])("q-item"),u=Object(i["L"])("q-select"),s=Object(i["L"])("select-entry"),d=Object(i["L"])("entry-link"),b=Object(i["L"])("q-list");return e.editView?(Object(i["C"])(),Object(i["h"])("div",wc,[Object(i["l"])(u,{label:"Categories",outlined:"",dense:"",multiple:"",modelValue:e.modelValue.categories,"onUpdate:modelValue":e.updateCategories,options:e.categories,class:"q-mt-md","new-value-mode":"add-unique","option-label":"name","options-dense":"","option-value":"id","emit-value":"","map-options":"","use-chips":""},{"no-option":Object(i["X"])((function(){return[Object(i["l"])(o,{dense:""},{default:Object(i["X"])((function(){return[Object(i["l"])(l,{class:"text-italic text-grey"},{default:Object(i["X"])((function(){return[_c]})),_:1})]})),_:1})]})),_:1},8,["modelValue","onUpdate:modelValue","options"]),Object(i["l"])(s,{multiple:"",modelValue:e.modelValue.entries,"onUpdate:modelValue":e.updateEntries,outlined:"",dense:"",class:"q-mt-sm","options-dense":"",label:"Entries"},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["C"])(),Object(i["h"])("div",Vc,[Object(i["l"])("div",qc,Object(i["Q"])(e.modelValue.name),1),Object(i["l"])(b,{bordered:"",separator:"",class:"rounded-borders"},{default:Object(i["X"])((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.entryReferences,(function(e){return Object(i["C"])(),Object(i["h"])(d,{entryId:e,key:e,item:""},null,8,["entryId"])})),128))]})),_:1})]))}n("159b");var Qc=Object(i["m"])({name:"ReferenceField",emits:["update:modelValue"],components:{SelectEntry:La,EntryLink:Kt},props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=st(),c=Object(i["f"])((function(){return a.state.currentJournal?a.state.journals[a.state.currentJournal].categories:[]})),r=Object(i["f"])((function(){return e.entry.category.map((function(e){return c.value.find((function(t){return t.id===e}))})).filter((function(e){return void 0!==e}))})),l=Object(i["f"])((function(){return Object.values(a.state.entries).filter((function(t){return Object(pt["intersection"])(t.category,e.modelValue.categories).length||e.modelValue.entries.includes(t.id)})).map((function(e){return e.id}))})),o=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{categories:t}))},u=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{entries:t}))};return Object(i["W"])((function(){e.editView||(e.modelValue.categories.forEach(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.dispatch(te,{category:t,flush:!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.modelValue.entries.forEach(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.dispatch(ne,{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),{FieldType:z,categories:r,updateCategories:o,updateEntries:u,entryReferences:l}}});Qc.render=Lc;var Ac=Qc;Ue()(Qc,"components",{QSelect:Qt["a"],QItem:Xe["a"],QItemSection:Se["a"],QList:Ae["a"]});var Xc={key:0},Sc={key:1},Ic={class:"text-subtitle2 q-mb-xs"},Tc={class:"text-body2"};function Ec(e,t,n,a,c,r){var l=Object(i["L"])("q-input");return e.editView?(Object(i["C"])(),Object(i["h"])("div",Xc,[Object(i["l"])(l,{label:"Content",outlined:"",dense:"",modelValue:e.modelValue.content,"onUpdate:modelValue":e.updateValue},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["C"])(),Object(i["h"])("div",Sc,[Object(i["l"])("div",Ic,Object(i["Q"])(e.modelValue.name),1),Object(i["l"])("div",Tc,Object(i["Q"])(e.modelValue.content),1)]))}var Rc=Object(i["m"])({name:"TextField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{content:t}))};return{FieldType:z,updateValue:a}}});Rc.render=Ec;var Dc=Rc;Ue()(Rc,"components",{QInput:xt["a"]});var Uc={key:0},Fc=Object(i["k"])(" On"),Hc={class:"text-italic text-grey q-ml-sm"},Jc=Object(i["k"])(" Off"),Pc={class:"text-italic text-grey q-ml-sm"},Nc={key:1},zc={class:"text-subtitle2 q-mb-xs"},Bc={class:"text-body2"};function Mc(e,t,n,a,c,r){var l=Object(i["L"])("q-checkbox"),o=Object(i["L"])("q-input");return e.editView?(Object(i["C"])(),Object(i["h"])("div",Uc,[Object(i["l"])(l,{modelValue:e.modelValue.value,"onUpdate:modelValue":e.updateValue,style:{transform:"translateX(-10px)"}},{default:Object(i["X"])((function(){return[e.modelValue.value?Object(i["K"])(e.$slots,"default",{key:0},(function(){return[Fc,Object(i["l"])("span",Hc,'"'+Object(i["Q"])(e.modelValue.whenTrue)+'"',1)]})):Object(i["K"])(e.$slots,"default",{key:1},(function(){return[Jc,Object(i["l"])("span",Pc,'"'+Object(i["Q"])(e.modelValue.whenFalse)+'"',1)]}))]})),_:1},8,["modelValue","onUpdate:modelValue"]),Object(i["l"])(o,{label:"When on",outlined:"",class:"q-mt-md",dense:"",modelValue:e.modelValue.whenTrue,"onUpdate:modelValue":e.updateWhenTrue},null,8,["modelValue","onUpdate:modelValue"]),Object(i["l"])(o,{label:"When off",outlined:"",dense:"",class:"q-mt-sm",modelValue:e.modelValue.whenFalse,"onUpdate:modelValue":e.updateWhenFalse},null,8,["modelValue","onUpdate:modelValue"])])):(Object(i["C"])(),Object(i["h"])("div",Nc,[Object(i["l"])("div",zc,Object(i["Q"])(e.modelValue.name),1),Object(i["l"])("div",Bc,Object(i["Q"])(e.modelValue.value?e.modelValue.whenTrue:e.modelValue.whenFalse),1)]))}var Kc=Object(i["m"])({name:"ToggleField",emits:["update:modelValue"],props:{modelValue:{type:Object,required:!0},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{value:t}))},c=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{whenTrue:t}))},r=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{whenFalse:t}))};return{FieldType:z,updateValue:a,updateWhenTrue:c,updateWhenFalse:r}}});Kc.render=Mc;var Wc,Yc=Kc;Ue()(Kc,"components",{QCheckbox:yc["a"],QInput:xt["a"]});var $c={name:"New Text",content:""},Zc={name:"New Description",content:""},Gc={name:"New Number",value:0},er={name:"New Toggle",value:!0,whenTrue:"On",whenFalse:"Off"},tr={name:"New Progress",maxValue:100,minValue:0,value:100,showBar:!0,barType:"linear",barColor:"#007bf5",label:"%val / %max"},nr={name:"New Attachments",attachments:[]},ar={name:"New Embed",url:""},cr={name:"New Map",imageKey:void 0,locations:[]},rr={name:"New Reference",categories:[],entries:[]},lr=(Wc={},Object(Ze["a"])(Wc,z.Text,{component:Dc,default:$c,label:"Text",icon:"short_text"}),Object(Ze["a"])(Wc,z.Description,{component:$n,default:Zc,label:"Description",icon:"subject"}),Object(Ze["a"])(Wc,z.Number,{component:Na,default:Gc,label:"Number",icon:"pin"}),Object(Ze["a"])(Wc,z.Toggle,{component:Yc,default:er,label:"Toggle",icon:"toggle_on"}),Object(Ze["a"])(Wc,z.Progress,{component:xc,default:tr,label:"Progress",icon:"horizontal_rule"}),Object(Ze["a"])(Wc,z.Attachments,{component:Nn,default:nr,label:"Attachments",icon:"perm_media"}),Object(Ze["a"])(Wc,z.Map,{component:Ra,default:cr,label:"Map",icon:"map"}),Object(Ze["a"])(Wc,z.Reference,{component:Ac,default:rr,label:"Reference",icon:"file_present"}),Object(Ze["a"])(Wc,z.Embed,{component:sa,default:ar,label:"Embed",icon:"link"}),Wc),or=[{label:"General",icon:"folder",selectable:!1,fieldType:"_",children:Object.entries(lr).map((function(e){return{fieldType:e[0],label:e[1].label,icon:e[1].icon}}))}],ir={class:"text-h6"},ur=Object(i["k"])("Create a new attachment"),sr=Object(i["k"])("Close dialog"),dr={key:1,class:"text-grey q-pa-md"},br={key:0,class:"q-px-sm text-caption",style:{"line-height":"1.3em"}},jr={key:1,class:"q-px-sm text-grey"},Or={key:1},mr={key:2},fr={key:3},pr={key:4,class:"text-body text-grey q-px-sm"},hr=Object(i["l"])("td",{class:"text-left text-grey"},"Name",-1),vr={class:"text-right"},gr=Object(i["l"])("td",{class:"text-left text-grey"},"Type",-1),yr={class:"text-right"},kr=Object(i["l"])("td",{class:"text-left text-grey"},"Size",-1),Cr={class:"text-right"},xr={class:"row justify-end"},wr={key:1,class:"text-grey q-pa-md text-center"},_r={class:"text-body q-pl-md text-grey"};function Vr(e,t,n,a,c,r){var l=Object(i["L"])("q-space"),o=Object(i["L"])("q-tooltip"),u=Object(i["L"])("q-btn"),s=Object(i["L"])("q-card-section"),d=Object(i["L"])("q-icon"),b=Object(i["L"])("q-item-section"),j=Object(i["L"])("q-badge"),O=Object(i["L"])("q-item"),m=Object(i["L"])("q-list"),f=Object(i["L"])("q-img"),p=Object(i["L"])("q-dialog"),h=Object(i["L"])("q-markup-table"),v=Object(i["L"])("q-splitter"),g=Object(i["L"])("q-card-actions"),y=Object(i["L"])("q-card"),k=Object(i["M"])("close-popup"),C=Object(i["M"])("ripple");return Object(i["C"])(),Object(i["h"])(p,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["X"])((function(){return[Object(i["l"])(y,{class:"q-dialog-plugin",style:{width:"800px"}},{default:Object(i["X"])((function(){return[Object(i["l"])(s,{class:"row align-items-center"},{default:Object(i["X"])((function(){return[Object(i["l"])("div",ir,'"'+Object(i["Q"])(e.entry.title)+'" - Attachments',1),Object(i["l"])(l),Object(i["l"])(u,{icon:"add",color:"primary",flat:"",round:"",dense:"",class:"q-mr-sm",onClick:e.createAttachment},{default:Object(i["X"])((function(){return[Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[ur]})),_:1})]})),_:1},8,["onClick"]),Object(i["Y"])(Object(i["l"])(u,{icon:"close",flat:"",round:"",dense:""},{default:Object(i["X"])((function(){return[Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[sr]})),_:1})]})),_:1},512),[[k]])]})),_:1}),Object(i["l"])(s,null,{default:Object(i["X"])((function(){return[Object(i["l"])(v,{modelValue:e.splitVal,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.splitVal=t}),limits:[40,55]},{before:Object(i["X"])((function(){return[e.isEmpty(e.filteredAttachments)?(Object(i["C"])(),Object(i["h"])("div",dr,"No attachments found.")):(Object(i["C"])(),Object(i["h"])(m,{key:0,separator:"",dense:"",style:{overflow:"auto",height:"200px"}},{default:Object(i["X"])((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.filteredAttachments,(function(t,n){return Object(i["Y"])((Object(i["C"])(),Object(i["h"])(O,{clickable:"",key:n,onClick:function(t){return e.setSelected(n)},active:n===e.selectedAttKey},{default:Object(i["X"])((function(){return[Object(i["l"])(b,{avatar:"",class:"q-pr-none",style:{"min-width":"0",width:"28px"}},{default:Object(i["X"])((function(){return[Object(i["l"])(d,{name:e.getAttachmentIcon(t.content_type),size:"20px"},null,8,["name"])]})),_:2},1024),Object(i["l"])(b,{class:"ellipsis"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(n),1)]})),_:2},1024),Object(i["l"])(b,{side:""},{default:Object(i["X"])((function(){return[Object(i["l"])(j,{outline:"",color:"grey"},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.getExtension(t.content_type)||"?"),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["onClick","active"])),[[C]])})),128))]})),_:1}))]})),after:Object(i["X"])((function(){return[e.selectedAttKey&&e.selectedAtt?(Object(i["C"])(),Object(i["h"])(v,{key:0,horizontal:"",modelValue:e.selectedAttSplitter,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selectedAttSplitter=t}),limits:[40,60],style:{height:"200px"}},{before:Object(i["X"])((function(){return["text/plain"===e.selectedAtt.content_type?(Object(i["C"])(),Object(i["h"])(i["a"],{key:0},[e.renderText(e.selectedAtt.data)?(Object(i["C"])(),Object(i["h"])("div",br,Object(i["Q"])(e.renderText(e.selectedAtt.data)),1)):(Object(i["C"])(),Object(i["h"])("div",jr,"Empty content"))],64)):e.selectedAtt.content_type.startsWith("audio")?(Object(i["C"])(),Object(i["h"])("div",Or,[Object(i["l"])("audio",{controls:"",src:e.selectedAttData},null,8,["src"])])):e.selectedAtt.content_type.startsWith("image")?(Object(i["C"])(),Object(i["h"])("div",mr,[Object(i["l"])(f,{onClick:t[1]||(t[1]=function(t){return e.zoomImage=!0}),src:e.selectedAttData,class:"cursor-pointer"},null,8,["src"]),Object(i["l"])(p,{modelValue:e.zoomImage,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.zoomImage=t})},{default:Object(i["X"])((function(){return[Object(i["l"])(f,{src:e.selectedAttData},null,8,["src"])]})),_:1},8,["modelValue"])])):e.selectedAtt.content_type.startsWith("video")?(Object(i["C"])(),Object(i["h"])("div",fr,[Object(i["l"])("video",{controls:"",src:e.selectedAttData},null,8,["src"])])):(Object(i["C"])(),Object(i["h"])("div",pr," Unable to load preview "))]})),after:Object(i["X"])((function(){return[Object(i["l"])(h,{flat:"",dense:""},{default:Object(i["X"])((function(){return[Object(i["l"])("tbody",null,[Object(i["l"])("tr",null,[hr,Object(i["l"])("td",vr,Object(i["Q"])(e.truncate(e.selectedAttKey,{length:16})),1)]),Object(i["l"])("tr",null,[gr,Object(i["l"])("td",yr,Object(i["Q"])(e.truncate(e.selectedAtt.content_type,{length:16})),1)]),Object(i["l"])("tr",null,[kr,Object(i["l"])("td",Cr,Object(i["Q"])(e.humanStorageSize(e.selectedAtt.data.length)),1)])])]})),_:1}),Object(i["l"])("div",xr,[Object(i["l"])(u,{round:"",icon:"mode_edit",class:"q-mr-sm",size:"12px",flat:"",onClick:e.replaceAttachment},{default:Object(i["X"])((function(){return[Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[Object(i["k"])('Replace "'+Object(i["Q"])(e.selectedAttKey)+'"',1)]})),_:1})]})),_:1},8,["onClick"]),Object(i["l"])(u,{onClick:e.deleteAttachment,round:"",icon:"delete_outline",color:"negative",size:"12px",flat:""},{default:Object(i["X"])((function(){return[Object(i["l"])(o,null,{default:Object(i["X"])((function(){return[Object(i["k"])('Delete "'+Object(i["Q"])(e.selectedAttKey)+'"',1)]})),_:1})]})),_:1},8,["onClick"])])]})),_:1},8,["modelValue"])):(Object(i["C"])(),Object(i["h"])("div",wr," No attachment selected. "))]})),_:1},8,["modelValue"])]})),_:1}),Object(i["l"])(g,{align:"left"},{default:Object(i["X"])((function(){return[Object(i["l"])("div",_r,Object(i["Q"])(e.filteredAttachmentsLen)+" attachment"+Object(i["Q"])(1==e.filteredAttachmentsLen?"":"s"),1),Object(i["l"])(l),Object(i["l"])(u,{flat:"",color:"primary",label:"OK",onClick:e.onOKClick},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}var qr=n("7937"),Lr={key:0,class:"text-h6"},Qr={key:1,class:"text-h6"};function Ar(e,t,n,a,c,r){var l=Object(i["L"])("q-card-section"),o=Object(i["L"])("q-tab"),u=Object(i["L"])("q-tabs"),s=Object(i["L"])("q-separator"),d=Object(i["L"])("q-icon"),b=Object(i["L"])("q-file"),j=Object(i["L"])("q-tab-panel"),O=Object(i["L"])("q-input"),m=Object(i["L"])("q-tab-panels"),f=Object(i["L"])("q-btn"),p=Object(i["L"])("q-card-actions"),h=Object(i["L"])("q-card"),v=Object(i["L"])("q-dialog");return Object(i["C"])(),Object(i["h"])(v,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["X"])((function(){return[Object(i["l"])(h,{class:"q-dialog-plugin"},{default:Object(i["X"])((function(){return[Object(i["l"])(l,{class:"row align-items-center q-pb-sm"},{default:Object(i["X"])((function(){return[e.replace?(Object(i["C"])(),Object(i["h"])("div",Lr,'Replace attachment "'+Object(i["Q"])(e.replace)+'"',1)):(Object(i["C"])(),Object(i["h"])("div",Qr,"Create attachment"))]})),_:1}),Object(i["l"])(u,{modelValue:e.currentTab,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.currentTab=t}),dense:"",class:"text-primary"},{default:Object(i["X"])((function(){return[Object(i["l"])(o,{name:"upload",label:"Upload"}),Object(i["l"])(o,{name:"raw",label:"Raw"})]})),_:1},8,["modelValue"]),Object(i["l"])(s),Object(i["l"])(m,{modelValue:e.currentTab,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.currentTab=t}),animated:""},{default:Object(i["X"])((function(){return[Object(i["l"])(j,{name:"upload"},{default:Object(i["X"])((function(){return[Object(i["l"])(b,{outlined:"",label:"Upload a file...",modelValue:e.uploadData,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.uploadData=t}),hint:"Size: "+e.uploadDataSize,debounce:"600"},{prepend:Object(i["X"])((function(){return[Object(i["l"])(d,{name:"attach_file"})]})),_:1},8,["modelValue","hint"])]})),_:1}),Object(i["l"])(j,{name:"raw"},{default:Object(i["X"])((function(){return[Object(i["l"])(O,{type:"textarea",outlined:"",modelValue:e.rawData,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.rawData=t}),hint:"Size: "+e.rawDataSize,debounce:"600"},null,8,["modelValue","hint"])]})),_:1})]})),_:1},8,["modelValue"]),Object(i["l"])(s),Object(i["l"])(O,{label:"Name",class:"q-pt-md q-px-md q-pb-md",modelValue:e.attachmentName,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.attachmentName=t}),outlined:"",dense:"",rules:[function(e){return/^\w+$/.test(e)||"Please use only letters, numbers, and underscores"}]},null,8,["modelValue","rules"]),Object(i["l"])(p,{align:"right"},{default:Object(i["X"])((function(){return[Object(i["l"])(f,{flat:"",color:"primary",label:e.replace?"Replace":"Create",disable:!e.attachmentName||!/^\w+$/.test(e.attachmentName),onClick:e.onOKClick},null,8,["label","disable","onClick"]),Object(i["l"])(f,{color:"primary",flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}var Xr=Object(i["m"])({name:"CreateAttachmentsDialog",props:{attachments:{type:Object,required:!0},replace:{type:String},replaceData:{type:String}},emits:Object(T["a"])(E["a"].emits),setup:function(e){var t=Object(E["a"])(),n=t.dialogRef,a=t.onDialogHide,c=t.onDialogOK,r=t.onDialogCancel,l=Object(f["a"])(),o=Object(i["H"])(e.replaceData?"raw":"upload"),u=Object(i["H"])(void 0),s=Object(i["H"])(e.replaceData?e.replaceData:""),d=Object(i["H"])(e.replace?e.replace:""),b=Object(i["f"])((function(){return qr["b"].humanStorageSize(new Blob([s.value]).size)})),j=Object(i["f"])((function(){return qr["b"].humanStorageSize(u.value?u.value.size:0)})),O=function(){try{switch(o.value){case"upload":if(!u.value)throw new Error("File never uploaded");c({data:u.value,name:d.value});break;case"raw":c({data:s.value,name:d.value});break}}catch(e){l.notify({type:"negative",message:e.message})}},m=function(){try{if(!d.value)throw new Error("Attachment name empty");if(!/^\w+$/.test(d.value))throw new Error("Invalid attachment name");d.value in e.attachments&&e.replace!==d.value?l.dialog({title:"Attachment already exists",message:'Attachment "'.concat(d.value,'" already exists in this entry. Would you like to replace it?'),cancel:!0,ok:"replace",persistent:!0}).onOk((function(){O()})).onCancel((function(){!0})):O()}catch(t){l.notify({type:"negative",message:t.message})}};return{dialogRef:n,onDialogHide:a,currentTab:o,rawData:s,uploadData:u,rawDataSize:b,uploadDataSize:j,attachmentName:d,onOKClick:function(){m()},onCancelClick:r}}});Xr.render=Ar;var Sr=Xr;Ue()(Xr,"components",{QDialog:we["a"],QCard:_e["a"],QCardSection:Ve["a"],QTabs:Je["a"],QTab:Pe["a"],QSeparator:Ne["a"],QTabPanels:ze["a"],QTabPanel:Be["a"],QFile:Ke["a"],QIcon:Ie["a"],QInput:xt["a"],QCardActions:Ee["a"],QBtn:Le["a"]});var Ir={class:"text-h6"},Tr=Object(i["k"])(" Are you sure you want to delete "),Er={class:"text-weight-bold"},Rr=Object(i["k"])(" This action cannot be undone! "),Dr=Object(i["l"])("br",null,null,-1);function Ur(e,t,n,a,c,r){var l=Object(i["L"])("q-card-section"),o=Object(i["L"])("q-btn"),u=Object(i["L"])("q-card-actions"),s=Object(i["L"])("q-card"),d=Object(i["L"])("q-dialog");return Object(i["C"])(),Object(i["h"])(d,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:Object(i["X"])((function(){return[Object(i["l"])(s,{class:"q-dialog-plugin"},{default:Object(i["X"])((function(){return[Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[Object(i["l"])("div",Ir,'Delete attachment "'+Object(i["Q"])(e.name)+'"',1)]})),_:1}),Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[Tr,Object(i["l"])("span",Er,'"'+Object(i["Q"])(e.name)+'"?',1),Rr,Dr]})),_:1}),Object(i["l"])(u,{align:"right"},{default:Object(i["X"])((function(){return[Object(i["l"])(o,{color:"primary",label:"Cancel",onClick:e.onCancelClick,flat:""},null,8,["onClick"]),Object(i["l"])(o,{color:"red",label:"Delete",onClick:e.onOKClick,flat:""},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}var Fr=Object(i["m"])({name:"DeleteAttachmentDialog",props:{name:{type:String,required:!0}},emits:Object(T["a"])(E["a"].emits),setup:function(){var e=Object(E["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,c=e.onDialogCancel;return{dialogRef:t,onDialogHide:n,onOKClick:function(){a()},onCancelClick:c}}});Fr.render=Ur;var Hr=Fr;Ue()(Fr,"components",{QDialog:we["a"],QCard:_e["a"],QCardSection:Ve["a"],QCardActions:Ee["a"],QBtn:Le["a"]});var Jr=Object(i["m"])({name:"ViewAttachmentsDialog",props:{entryId:{type:String,required:!0}},emits:Object(T["a"])(E["a"].emits),setup:function(e){var t=Object(E["a"])(),n=t.dialogRef,a=t.onDialogHide,c=t.onDialogOK,r=t.onDialogCancel,l=Object(f["a"])(),o=st(),u=Object(i["H"])(55),s=Object(i["H"])(""),d=Object(i["H"])(30),b=Object(i["H"])(!1),O=Object(i["f"])((function(){return o.state.entries[e.entryId]})),m=Object(i["f"])((function(){return O.value.attachments})),p=Object(i["f"])((function(){return Object.keys(m.value).length})),h=Object(i["f"])((function(){return O.value.attachments[s.value]||void 0})),v=Object(i["f"])((function(){return h.value?ge(h.value.content_type,h.value.data):void 0})),g=function(e){e in O.value.attachments&&(s.value=e)},y=function(){l.dialog({component:Sr,componentProps:{attachments:O.value.attachments}}).onOk(function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,o.dispatch(re,{id:e.entryId,attachment:n});case 5:return t.next=7,o.dispatch(ne,{id:e.entryId,force:!0});case 7:g(n.name),l.notify({message:"Attachment saved",type:"positive"}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),l.notify({message:t.t0.message,type:"negative"});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}())},k=function(){l.dialog({component:Sr,componentProps:{attachments:O.value.attachments,replace:s.value,replaceData:"text/plain"===h.value.content_type?ke(h.value.data):void 0}}).onOk(function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,o.dispatch(le,{id:e.entryId,name:s.value});case 5:return t.next=7,o.dispatch(re,{id:e.entryId,attachment:n});case 7:g(n.name),l.notify({message:"Attachment saved",type:"positive"}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),l.notify({message:t.t0.message,type:"negative"});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}())},C=function(){s.value&&h.value&&l.dialog({component:Hr,componentProps:{name:s.value}}).onOk(Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.dispatch(le,{id:e.entryId,name:s.value});case 3:s.value="",l.notify({message:"Attachment deleted",type:"positive"}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),l.notify({message:t.t0.message,type:"negative"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))))};return Object(i["z"])((function(){})),{dialogRef:n,onDialogHide:a,splitVal:u,filteredAttachments:m,filteredAttachmentsLen:p,createAttachment:y,getAttachmentIcon:ye,selectedAtt:h,selectedAttKey:s,setSelected:g,entry:O,renderText:ke,deleteAttachment:C,isEmpty:pt["isEmpty"],selectedAttSplitter:d,truncate:pt["truncate"],zoomImage:b,selectedAttData:v,getExtension:K["extension"],replaceAttachment:k,humanStorageSize:qr["b"].humanStorageSize,b64:ge,onOKClick:function(){c()},onCancelClick:r}}}),Pr=n("8562"),Nr=n("2bb1"),zr=n("7f67");Jr.render=Vr;var Br=Jr;Ue()(Jr,"components",{QDialog:we["a"],QCard:_e["a"],QCardSection:Ve["a"],QSpace:qe["a"],QBtn:Le["a"],QTooltip:Qe["a"],QSplitter:Pr["a"],QList:Ae["a"],QItem:Xe["a"],QItemSection:Se["a"],QIcon:Ie["a"],QBadge:Te["a"],QImg:Yt["a"],QMarkupTable:Nr["a"],QCardActions:Ee["a"]}),Ue()(Jr,"directives",{ClosePopup:zr["a"],Ripple:Re["a"]});var Mr={class:"text-h6"},Kr=Object(i["k"])(" Are you sure you want to delete "),Wr={class:"text-weight-bold"},Yr=Object(i["k"])(" This action cannot be undone! "),$r=Object(i["l"])("br",null,null,-1),Zr=Object(i["l"])("div",{class:"text-red q-mt-sm"}," All fields and relationships will be permanently deleted. ",-1);function Gr(e,t,n,a,c,r){var l=Object(i["L"])("q-card-section"),o=Object(i["L"])("q-btn"),u=Object(i["L"])("q-card-actions"),s=Object(i["L"])("q-card"),d=Object(i["L"])("q-dialog");return Object(i["C"])(),Object(i["h"])(d,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:Object(i["X"])((function(){return[Object(i["l"])(s,{class:"q-dialog-plugin"},{default:Object(i["X"])((function(){return[Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[Object(i["l"])("div",Mr,'Delete entry "'+Object(i["Q"])(e.entry.title)+'"',1)]})),_:1}),Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[Kr,Object(i["l"])("span",Wr,'"'+Object(i["Q"])(e.entry.title)+'"?',1),Yr,$r,Zr]})),_:1}),Object(i["l"])(u,{align:"right"},{default:Object(i["X"])((function(){return[Object(i["l"])(o,{color:"primary",label:"Cancel",onClick:e.onCancelClick,flat:""},null,8,["onClick"]),Object(i["l"])(o,{color:"red",label:"Delete",onClick:e.onOKClick,flat:""},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])}var el=Object(i["m"])({name:"DeleteEntryDialog",props:{entry:{type:Object,required:!0}},emits:Object(T["a"])(E["a"].emits),setup:function(){var e=Object(E["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,c=e.onDialogCancel;return{dialogRef:t,onDialogHide:n,onOKClick:function(){a()},onCancelClick:c}}});el.render=Gr;var tl=el;Ue()(el,"components",{QDialog:we["a"],QCard:_e["a"],QCardSection:Ve["a"],QCardActions:Ee["a"],QBtn:Le["a"]});var nl=Object(i["ab"])("data-v-2a9150eb");Object(i["F"])("data-v-2a9150eb");var al={class:"text-h6"},cl=Object(i["k"])("Create a new field"),rl=Object(i["k"])("Cancel editing"),ll={class:"row"},ol={class:"col col-md-6"},il={class:"row items-center"},ul={key:3,class:"text-italic text-red"},sl={key:0,class:"col col-md-6"},dl={class:"row items-center"},bl=Object(i["k"])("Change entry avatar"),jl=Object(i["k"])("Change entry avatar"),Ol=Object(i["k"])(" No categories "),ml={key:1,class:"col col-md-6"},fl={class:"row q-mt-md"},pl={key:2,class:"col col-md-6 text-h6 align-items-center q-px-lg q-py-xl text-grey"},hl=Object(i["k"])(" Select a field to view more information "),vl=Object(i["k"])("Create a field to get started");Object(i["D"])();var gl=nl((function(e,t,n,a,c,r){var l=Object(i["L"])("q-space"),o=Object(i["L"])("q-input"),u=Object(i["L"])("q-item"),s=Object(i["L"])("q-tree"),d=Object(i["L"])("q-list"),b=Object(i["L"])("q-popup-proxy"),j=Object(i["L"])("q-tooltip"),O=Object(i["L"])("q-btn"),m=Object(i["L"])("q-card-section"),f=Object(i["L"])("q-icon"),p=Object(i["L"])("q-img"),h=Object(i["L"])("entry-icon-dialog"),v=Object(i["L"])("q-avatar"),g=Object(i["L"])("q-item-section"),y=Object(i["L"])("q-select"),k=Object(i["L"])("q-form"),C=Object(i["L"])("q-separator"),x=Object(i["L"])("q-btn-group"),w=Object(i["L"])("q-card-actions"),_=Object(i["L"])("q-card"),V=Object(i["L"])("q-dialog"),q=Object(i["M"])("close-popup");return Object(i["C"])(),Object(i["h"])(V,{ref:"dialogRef",onHide:e.onDialogHide,persistent:""},{default:nl((function(){return[Object(i["l"])(_,{class:"q-dialog-plugin",style:{width:"800px"}},{default:nl((function(){return[Object(i["l"])(m,{class:"row align-items-center"},{default:nl((function(){return[Object(i["l"])("div",al,'Editing "'+Object(i["Q"])(e.entryModel.title)+'"',1),Object(i["l"])(l),Object(i["l"])(O,{icon:"add",color:"primary",flat:"",round:"",dense:"",class:"q-mr-sm",onClick:t[6]||(t[6]=function(t){return e.createFieldTooltip=!1})},{default:nl((function(){return[Object(i["l"])(b,{modelValue:e.createFieldPopup,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.createFieldPopup=t})},{default:nl((function(){return[Object(i["l"])(d,null,{default:nl((function(){return[Object(i["l"])(u,{class:"q-px-sm q-pb-none"},{default:nl((function(){return[Object(i["l"])(o,{label:"Search fields...",outlined:"",dense:"",autofocus:"",modelValue:e.createFieldTreeFilter,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.createFieldTreeFilter=t}),ref:e.createFieldTreeFilterRef},null,8,["modelValue"])]})),_:1}),Object(i["l"])(u,{class:"q-px-sm"},{default:nl((function(){return[Object(i["l"])(s,{class:"full-width",nodes:e.createFieldTree,"node-key":"fieldType",filter:e.createFieldTreeFilter,expanded:e.createFieldTreeExpanded,"onUpdate:expanded":t[2]||(t[2]=function(t){return e.createFieldTreeExpanded=t}),selected:e.createFieldTreeSelected,"onUpdate:selected":[t[3]||(t[3]=function(t){return e.createFieldTreeSelected=t}),e.onCreateFieldSubmit]},null,8,["nodes","filter","expanded","selected","onUpdate:selected"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),Object(i["l"])(j,{modelValue:e.createFieldTooltip,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.createFieldTooltip=t})},{default:nl((function(){return[cl]})),_:1},8,["modelValue"])]})),_:1}),Object(i["l"])(O,{icon:"delete_outline",color:"negative",flat:"",round:"",dense:"",class:"q-mr-sm",onClick:e.deleteEntry},{default:nl((function(){return[Object(i["l"])(j,null,{default:nl((function(){return[Object(i["k"])('Delete "'+Object(i["Q"])(e.entryModel.title)+'"',1)]})),_:1})]})),_:1},8,["onClick"]),Object(i["Y"])(Object(i["l"])(O,{icon:"close",flat:"",round:"",dense:""},{default:nl((function(){return[Object(i["l"])(j,null,{default:nl((function(){return[rl]})),_:1})]})),_:1},512),[[q]])]})),_:1}),Object(i["l"])("div",ll,[Object(i["l"])("div",ol,[Object(i["l"])(m,{class:"q-pt-none"},{default:nl((function(){return[Object(i["l"])(s,{nodes:e.fieldTree,"node-key":"key","selected-color":"primary",selected:e.fieldTreeSelected,"onUpdate:selected":t[7]||(t[7]=function(t){return e.fieldTreeSelected=t}),expanded:e.fieldTreeExpanded,"onUpdate:expanded":t[8]||(t[8]=function(t){return e.fieldTreeExpanded=t}),ref:"fieldTreeRef",accordion:""},{"default-header":nl((function(e){return[Object(i["l"])("div",il,[e.node.icon?(Object(i["C"])(),Object(i["h"])(f,{key:0,name:e.node.icon,size:"20px",class:["q-mr-sm",{"text-red":!e.node.label||"warning"==e.node.icon}]},null,8,["name","class"])):(Object(i["C"])(),Object(i["h"])(p,{key:1,src:e.node.avatar,width:"20px",class:"rounded-borders q-mr-sm"},null,8,["src"])),e.node.label?(Object(i["C"])(),Object(i["h"])("div",{key:2,class:{"text-red":"warning"==e.node.icon}},Object(i["Q"])(e.node.label),3)):(Object(i["C"])(),Object(i["h"])("div",ul,"Untitled field"))])]})),_:1},8,["nodes","selected","expanded"])]})),_:1})]),"entry"===e.fieldTreeSelected?(Object(i["C"])(),Object(i["h"])("div",sl,[Object(i["l"])(m,{class:"q-pt-none"},{default:nl((function(){return[Object(i["l"])(k,null,{default:nl((function(){return[Object(i["l"])("div",dl,["icon"===e.entryModel.avatar.type?(Object(i["C"])(),Object(i["h"])(v,{key:0,icon:e.entryModel.avatar.data,class:"q-mr-sm cursor-pointer",rounded:"",color:"grey-4","text-color":"dark",size:"56px"},{default:nl((function(){return[Object(i["l"])(j,null,{default:nl((function(){return[bl]})),_:1}),Object(i["l"])(b,{"max-width":"200px",modelValue:e.showEntryAvatarDialog,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.showEntryAvatarDialog=t})},{default:nl((function(){return[Object(i["l"])(h,{entry:e.entry,useAttachments:"",onAttach:e.updateEntryAvatar},null,8,["entry","onAttach"])]})),_:1},8,["modelValue"])]})),_:1},8,["icon"])):(Object(i["C"])(),Object(i["h"])(v,{key:1,class:"q-mr-sm cursor-pointer",rounded:"",color:"grey-4","text-color":"dark",size:"56px"},{default:nl((function(){return[Object(i["l"])(j,null,{default:nl((function(){return[jl]})),_:1}),Object(i["l"])("img",{src:e.entryAvatar},null,8,["src"]),Object(i["l"])(b,{"max-width":"200px",modelValue:e.showEntryAvatarDialog,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.showEntryAvatarDialog=t})},{default:nl((function(){return[Object(i["l"])(h,{entry:e.entry,useAttachments:"",onAttach:e.updateEntryAvatar},null,8,["entry","onAttach"])]})),_:1},8,["modelValue"])]})),_:1})),Object(i["l"])(o,{label:"Title",outlined:"",class:"col-grow",modelValue:e.entryModel.title,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.entryModel.title=t})},null,8,["modelValue"])]),Object(i["l"])(y,{label:"In category...",outlined:"",class:"q-mt-sm",dense:"",multiple:"",modelValue:e.entryModel.category,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.entryModel.category=t}),options:e.categories,"new-value-mode":"add-unique","option-label":"name","options-dense":"","option-value":"id","emit-value":"","map-options":"","use-chips":""},{"no-option":nl((function(){return[Object(i["l"])(u,{dense:""},{default:nl((function(){return[Object(i["l"])(g,{class:"text-italic text-grey"},{default:nl((function(){return[Ol]})),_:1})]})),_:1})]})),_:1},8,["modelValue","options"])]})),_:1})]})),_:1})])):e.currentField?(Object(i["C"])(),Object(i["h"])("div",ml,[Object(i["l"])(m,{class:"q-pt-none"},{default:nl((function(){return[Object(i["l"])(k,null,{default:nl((function(){return[Object(i["l"])(o,{label:"Name",outlined:"",dense:"",modelValue:e.currentField.name,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.currentField.name=t}),ref:"currentFieldName"},null,8,["modelValue"]),Object(i["l"])(C,{class:"q-my-md"}),(Object(i["C"])(),Object(i["h"])(Object(i["N"])(e.getComponentFromField(e.currentField.type)),{editView:!0,entry:e.entryModel,modelValue:e.currentField,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.currentField=t})},null,8,["entry","modelValue"])),Object(i["l"])("div",fl,[Object(i["l"])(x,{flat:""},{default:nl((function(){return[Object(i["l"])(O,{color:"primary",flat:"",icon:"north",onClick:t[15]||(t[15]=function(t){return e.moveCurrentField(-1)}),class:"q-px-sm"}),Object(i["l"])(O,{color:"primary",flat:"",icon:"south",class:"q-px-sm",onClick:t[16]||(t[16]=function(t){return e.moveCurrentField(1)})})]})),_:1}),Object(i["l"])(O,{class:"q-ml-auto",color:"negative",flat:"",label:"Delete field",onClick:e.deleteField},null,8,["onClick"])])]})),_:1})]})),_:1})])):(Object(i["C"])(),Object(i["h"])("div",pl,[e.entryModel.fields.length?(Object(i["C"])(),Object(i["h"])(i["a"],{key:0},[hl],64)):(Object(i["C"])(),Object(i["h"])(i["a"],{key:1},[vl],64))]))]),Object(i["l"])(w,{align:"right"},{default:nl((function(){return[Object(i["l"])(O,{color:"primary",flat:"",label:"Save changes",onClick:e.submit},null,8,["onClick"]),Object(i["l"])(O,{color:"primary",flat:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["onHide"])})),yl=(n("a434"),n("e1bd")),kl={class:"text-subtitle2 q-mb-xs text-negative"};function Cl(e,t,n,a,c,r){return Object(i["C"])(),Object(i["h"])("div",kl,"Error loading field!")}var xl=Object(i["m"])({name:"ErrorField",emits:["update:modelValue"],props:{modelValue:{type:Object},editView:{type:Boolean,default:!1},entry:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,a=function(t){n("update:modelValue",Object(I["a"])(Object(I["a"])({},e.modelValue),{},{content:t}))};return{FieldType:z,updateValue:a}}});xl.render=Cl;var wl=xl,_l=Object(i["m"])({name:"EditEntryDialog",props:{entry:{type:Object,required:!0},entryID:{type:String,required:!0}},emits:Object(T["a"])(E["a"].emits),components:{EntryIconDialog:We},setup:function(e){var t=Object(E["a"])(),n=t.dialogRef,a=t.onDialogHide,c=t.onDialogOK,r=t.onDialogCancel,l=Object(f["a"])(),o=st(),u=Object(p["e"])(),s=Object(i["G"])(Object(I["a"])({},e.entry));console.log(s);var d=Object(i["H"])(null),b=Object(i["f"])((function(){return o.getters.entryAttachment(e.entryID,s.avatar.data)})),O=function(e){if(e)for(var t=0;t<s.fields.length;t++)if(s.fields[t]&&e==s.fields[t].id)return s.fields[t]},m=function(e,t){if(e)for(var n=0;n<s.fields.length;n++)s.fields[n]&&e==s.fields[n].id&&(s.fields[n]=t)},h=function(e){return e in lr?lr[e].icon:"help"},v=Object(i["H"])(null),g=Object(i["H"])(null),y=Object(i["H"])(["entry"]),k=Object(i["H"])(!1),C=Object(i["H"])(null),x=Object(i["f"])({get:function(){return O(g.value)},set:function(e){e&&m(g.value,e)}}),w=Object(i["H"])(!1),_=Object(i["f"])((function(){return o.state.currentJournal})),V=function(e){if(x.value){var t=s.fields.indexOf(x.value);if(-1!==t){var n=t+e;if(!(n<0||n===s.fields.length)){var a=[t,n].sort();s.fields.splice(a[0],2,s.fields[a[1]],s.fields[a[0]])}}}},q=function(e){var t={label:e.title,avatar:"attachment"==e.avatar.type?b.value:void 0,icon:"icon"==e.avatar.type?e.avatar.data:void 0,children:[],key:"entry"};return t.children=e.fields.map((function(e){if(!e)return{label:"Broken field",key:Object(yl["a"])(13),icon:"warning"};switch(e.type){default:return{label:e.name,key:e.id,icon:h(e.type)}}})),[t]},L=function(){l.dialog({component:tl,componentProps:{entry:s}}).onOk(Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.dispatch(ce,e.entryID);case 3:c(),u.push("/j/".concat(_.value)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),l.notify({message:t.t0.message,type:"negative"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))))},Q=function(e){w.value=!1,"image"!==e.type&&(s.avatar={type:e.type,data:e.data})},A=function(){x.value&&l.dialog({title:'Delete field "'.concat(x.value.name,'"'),message:'Are you sure you want to delete "'.concat(x.value.name,'"? This action cannot be undone!'),cancel:!0,persistent:!0,ok:{color:"red",label:"Delete",flat:!0}}).onOk((function(){for(var e=0;e<s.fields.length;e++){var t;if((null===(t=x.value)||void 0===t?void 0:t.id)==s.fields[e].id){s.fields=s.fields.filter((function(e){var t;return e.id!=(null===(t=x.value)||void 0===t?void 0:t.id)}));break}}}))},X=function(e){var t=Object(yl["a"])(13),n=Object(I["a"])(Object(I["a"])({},lr[e].default),{},{type:e,id:t});s.fields.push(n),C.value=null,g.value=n.id,k.value=!1,y.value.includes("entry")||y.value.push("entry"),d.value&&d.value.focus()},S=function(e){return e in lr?lr[e].component:wl},T={entryModel:s,currentField:x,fieldTreeRef:v,fieldTree:Object(i["f"])((function(){return q(s)})),fieldTreeSelected:g,fieldTreeExpanded:y,createFieldTree:or,createFieldTooltip:Object(i["H"])(!1),createFieldPopup:k,createFieldTreeExpanded:Object(i["H"])(["_"]),createFieldTreeFilter:Object(i["H"])(""),createFieldTreeFilterRef:Object(i["H"])(null),createFieldTreeSelected:C,getComponentFromField:S,submitCreateField:X,onCreateFieldSubmit:function(e){X(e)},categories:Object(i["f"])((function(){return o.state.currentJournal?o.state.journals[o.state.currentJournal].categories:[]}))},R=function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.dispatch(ae,{id:e.entryID,data:s});case 3:c(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),l.notify({message:t.t0,type:"negative"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();return Object(I["a"])(Object(I["a"])({dialogRef:n,onDialogHide:a},T),{},{submit:R,currentFieldName:d,deleteField:A,deleteEntry:L,entryAvatar:b,showEntryAvatarDialog:w,moveCurrentField:V,updateEntryAvatar:Q,onCancelClick:r})}}),Vl=(n("8e0b"),n("7f41")),ql=n("0378"),Ll=n("e7a9");_l.render=gl,_l.__scopeId="data-v-2a9150eb";var Ql=_l;Ue()(_l,"components",{QDialog:we["a"],QCard:_e["a"],QCardSection:Ve["a"],QSpace:qe["a"],QBtn:Le["a"],QPopupProxy:wt["a"],QList:Ae["a"],QItem:Xe["a"],QInput:xt["a"],QTree:Vl["a"],QTooltip:Qe["a"],QIcon:Ie["a"],QImg:Yt["a"],QForm:ql["a"],QAvatar:Lt["a"],QSelect:Qt["a"],QItemSection:Se["a"],QSeparator:Ne["a"],QBtnGroup:Ll["a"],QCardActions:Ee["a"]}),Ue()(_l,"directives",{ClosePopup:zr["a"]});var Al=Object(i["m"])({name:"EntryView",setup:function(){var e=st(),t=Object(p["d"])(),n=Object(p["e"])(),a=Object(f["a"])(),c={entry:Object(i["f"])((function(){return e.state.entries[t.params.eid]}))},r=Object(i["f"])((function(){return e.state.currentJournal?e.state.journals[e.state.currentJournal].categories:[]})),l=Object(i["f"])((function(){return c.entry.value?c.entry.value.category.map((function(e){return r.value.find((function(t){return t.id===e}))})).filter((function(e){return void 0!==e})):[]})),o=Object(i["H"])(null),u=function(e){return _n["a"].brightness(e)<128?"#fff":"#1d1d1d"},s=function(e){return _n["a"].lighten(e,-25)},d=function(e){return e&&pt["has"](e,"type")&&e.type in lr?lr[e.type].component:wl},b=Object(i["f"])((function(){return e.getters.entryAttachment(c.entry.value.id,c.entry.value.avatar.data)})),O=function(){c.entry.value.attachments["avatar"]&&a.dialog({component:Dn,componentProps:{attachment:Object(I["a"])(Object(I["a"])({},c.entry.value.attachments["avatar"]),{},{name:"avatar"}),entryId:t.params.eid}})},m=function(){a.dialog({component:Ql,persistent:!0,componentProps:{entry:pt["cloneDeep"](c.entry.value),entryID:t.params.eid}})},h=function(){a.dialog({component:tl,componentProps:{entry:c.entry.value}}).onOk(Object(j["a"])(regeneratorRuntime.mark((function c(){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,e.dispatch(ce,t.params.eid);case 3:e.state.lastEntry="",n.push("/j/".concat(e.state.currentJournal)),c.next=10;break;case 7:c.prev=7,c.t0=c["catch"](0),a.notify({message:c.t0.message,type:"negative"});case 10:case"end":return c.stop()}}),c,null,[[0,7]])}))))},v=function(){a.dialog({component:Br,componentProps:{entryId:t.params.eid}})};return Object(p["c"])((function(){e.dispatch(oe,c.entry.value.id)})),Object(I["a"])(Object(I["a"])({},c),{},{editEntry:m,categories:l,deleteEntry:h,entryAvatar:b,viewAttachments:v,getComponentFromField:d,getCategoryTextColor:u,getCategoryBorderColor:s,previewAvatar:O,categoryBadgeRef:o})}}),Xl=(n("633f"),n("f20b"));Al.render=wn,Al.__scopeId="data-v-0ecb68b3";var Sl=Al;Ue()(Al,"components",{QCard:_e["a"],QItem:Xe["a"],QItemSection:Se["a"],QAvatar:Lt["a"],QIcon:Ie["a"],QImg:Yt["a"],QSeparator:Ne["a"],QCardSection:Ve["a"],QBtn:Le["a"],QTooltip:Qe["a"],QBadge:Te["a"],QBtnDropdown:Xl["a"],QList:Ae["a"],QItemLabel:Me["a"]}),Ue()(Al,"directives",{ClosePopup:zr["a"]});var Il={class:"q-ma-lg"};function Tl(e,t,n,a,c,r){var l=Object(i["L"])("router-view");return Object(i["C"])(),Object(i["h"])("div",Il,[Object(i["l"])(l,{name:"view"})])}var El=Object(i["m"])({name:"Dashboard",setup:function(){var e=st();Object(f["a"])();return Object(i["z"])((function(){e.commit(je,!0)})),Object(i["A"])((function(){e.commit(je,!1)})),{currentJournal:Object(i["f"])((function(){return e.getters.currentJournal}))}}});El.render=Tl;var Rl=El,Dl={class:"row items-center q-pt-xl"},Ul=Object(i["l"])("div",{class:"col-none col-sm-1 col-md-3"},null,-1),Fl={class:"col justify-center text-center"},Hl=Object(i["l"])("h2",{class:"q-mb-sm"},"ajourn",-1),Jl=Object(i["l"])("p",{class:"text-subtitle-1 text-italic"},"offline world planner.",-1),Pl=Object(i["l"])("hr",{class:"q-my-xl"},null,-1),Nl={key:0,class:"text-grey"},zl=Object(i["k"])(" No journals available."),Bl=Object(i["l"])("br",null,null,-1),Ml=Object(i["k"])(" Make one? "),Kl=Object(i["l"])("div",{class:"col-none col-sm-1 col-md-3"},null,-1);function Wl(e,t,n,a,c,r){var l=Object(i["L"])("q-btn"),o=Object(i["L"])("q-item-section"),u=Object(i["L"])("q-item"),s=Object(i["L"])("q-list");return Object(i["C"])(),Object(i["h"])("div",Dl,[Ul,Object(i["l"])("div",Fl,[Hl,Jl,Object(i["l"])(l,{color:"primary",label:"New journal",icon:"add",onClick:e.openCreateJournal},null,8,["onClick"]),Pl,Object.keys(e.journals).length<=0?(Object(i["C"])(),Object(i["h"])("h6",Nl,[zl,Bl,Object(i["l"])(l,{flat:"","no-caps":"",size:"lg",class:"text-primary",onClick:e.openCreateJournal},{default:Object(i["X"])((function(){return[Ml]})),_:1},8,["onClick"])])):(Object(i["C"])(),Object(i["h"])(s,{key:1,bordered:"",separator:""},{default:Object(i["X"])((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["J"])(e.journals,(function(e,t){return Object(i["C"])(),Object(i["h"])(u,{key:t,clickable:"",to:"/j/"+t},{default:Object(i["X"])((function(){return[e.title?(Object(i["C"])(),Object(i["h"])(o,{key:0},{default:Object(i["X"])((function(){return[Object(i["k"])(Object(i["Q"])(e.title),1)]})),_:2},1024)):(Object(i["C"])(),Object(i["h"])(o,{key:1,class:"text-italic text-grey"},{default:Object(i["X"])((function(){return[Object(i["k"])("Unknown journal, ID: "+Object(i["Q"])(t)+")",1)]})),_:2},1024))]})),_:2},1032,["to"])})),128))]})),_:1}))]),Kl])}var Yl=Object(i["l"])("div",{class:"text-h6"},"Create a new journal",-1),$l={class:"column"},Zl=Object(i["l"])("small",{class:"text-grey"}," Log in to enable online sync. ",-1);function Gl(e,t,n,a,c,r){var l=Object(i["L"])("q-card-section"),o=Object(i["L"])("q-input"),u=Object(i["L"])("q-checkbox"),s=Object(i["L"])("q-btn"),d=Object(i["L"])("q-card-actions"),b=Object(i["L"])("q-form"),j=Object(i["L"])("q-card"),O=Object(i["L"])("q-dialog");return Object(i["C"])(),Object(i["h"])(O,{ref:"dialogRef",onHide:e.onDialogHide},{default:Object(i["X"])((function(){return[Object(i["l"])(j,{class:"q-dialog-plugin"},{default:Object(i["X"])((function(){return[Object(i["l"])(b,{onSubmit:Object(i["Z"])(e.submit,["prevent"])},{default:Object(i["X"])((function(){return[Object(i["l"])(l,null,{default:Object(i["X"])((function(){return[Yl]})),_:1}),Object(i["l"])(l,{class:"q-py-none"},{default:Object(i["X"])((function(){return[Object(i["l"])(o,{outlined:"",autofocus:"",placeholder:"Title",modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.title=t}),rules:[function(e){return e.length>=0||"Title is required"}]},null,8,["modelValue","rules"]),Object(i["l"])("div",$l,[Object(i["l"])(u,{label:"Sync online",modelValue:e.createOnline,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.createOnline=t}),disable:""},null,8,["modelValue"]),Zl])]})),_:1}),Object(i["l"])(d,{align:"right",class:"text-primary"},{default:Object(i["X"])((function(){return[Object(i["l"])(s,{flat:"",label:"Cancel",type:"button"}),Object(i["l"])(s,{flat:"",label:"Create",type:"submit",loading:e.loading,disable:e.title.length<=0},null,8,["loading","disable"])]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1},8,["onHide"])}var eo=Object(i["m"])({name:"CreateJournalDialog",emits:Object(T["a"])(E["a"].emits),setup:function(){var e=Object(E["a"])(),t=e.dialogRef,n=e.onDialogHide,a=e.onDialogOK,c=e.onDialogCancel,r=Object(f["a"])(),l=st(),o=Object(p["e"])(),u=Object(i["H"])(""),s=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.dispatch(Y,{title:u.value});case 3:return t=e.sent,e.next=6,l.dispatch($,t);case 6:return e.next=8,o.push("/j/".concat(t));case 8:a(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),r.notify(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return{dialogRef:t,onDialogHide:n,createOnline:Object(i["H"])(!1),title:u,loading:Object(i["H"])(!1),submit:s,onOKClick:function(){s(),a()},onCancelClick:c}}});eo.render=Gl;var to=eo;Ue()(eo,"components",{QDialog:we["a"],QCard:_e["a"],QForm:ql["a"],QCardSection:Ve["a"],QInput:xt["a"],QCheckbox:yc["a"],QCardActions:Ee["a"],QBtn:Le["a"]});var no=Object(i["m"])({name:"Landing",setup:function(){var e=st(),t=Object(f["a"])();return Object(i["v"])(Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch(W);case 2:case"end":return t.stop()}}),t)})))),{journals:Object(i["f"])((function(){return e.state.journals})),openCreateJournal:function(){t.dialog({component:to})}}}});no.render=Wl;var ao=no;Ue()(no,"components",{QBtn:Le["a"],QList:Ae["a"],QItem:Xe["a"],QItemSection:Se["a"]});var co=[{path:"/",name:"Landing",component:ao},{path:"/j/:jid",name:"Dashboard",component:Rl,children:[{path:"e/:eid",name:"Entry",components:{default:Rl,view:Sl},beforeEnter:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt.dispatch(ne,{id:t.params.eid});case 3:a(),e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),sn["a"].create({message:e.t0.message,type:"negative"}),a("/j/".concat(t.params.jid));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t,n,a){return e.apply(this,arguments)}return t}()}],beforeEnter:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return bn["a"].show({message:"Loading journal...",spinner:jn["a"]}),e.prev=1,e.next=4,dt.dispatch(W);case 4:return e.next=6,dt.dispatch($,t.params.jid);case 6:a(),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),sn["a"].create({message:e.t0.message,type:"negative"}),a("/");case 13:return e.prev=13,bn["a"].hide(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));function t(t,n,a){return e.apply(this,arguments)}return t}()}],ro=Object(p["a"])({history:Object(p["b"])("/ajourn"),routes:co}),lo=ro;window.screenfull=l.a;var oo=Object(i["g"])(rn).use(ln).use(o["a"],dn).use(dt,it).use(lo).use(s.a,{listenTo:"input"}).mount("#app");oo.$options.devt},e0c3:function(e,t,n){},f712:function(e,t,n){}});
//# sourceMappingURL=app.6e1bb289.js.map